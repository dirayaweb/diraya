<div class="container text-center mt-5" style="max-width: 400px; margin: auto">
  <h2 class="mb-4">Barcode / QR Scanner</h2>

  <!-- Camera control buttons -->
  <div class="mb-3">
    <button
      class="btn btn-primary me-2"
      (click)="startCamera()"
      [disabled]="isCameraActive"
    >
      Start Camera
    </button>
    <button
      class="btn btn-secondary"
      (click)="stopCamera()"
      [disabled]="!isCameraActive"
    >
      Stop Camera
    </button>
  </div>

  <!-- Camera selection dropdown (if more than one camera is available) -->
  <div class="mb-3" *ngIf="isCameraActive && availableDevices.length > 1">
    <label for="cameraSelect" class="form-label">Select Camera:</label>
    <select
      id="cameraSelect"
      class="form-select"
      (change)="onDeviceSelect($event)"
      [value]="selectedDevice?.deviceId"
    >
      <option *ngFor="let device of availableDevices" [value]="device.deviceId">
        {{ device.label || device.deviceId }}
      </option>
    </select>
  </div>

  <!-- ZXing scanner component -->
  <zxing-scanner
    *ngIf="isCameraActive"
    [device]="selectedDevice"
    [formats]="allowedFormats"
    (camerasFound)="onCamerasFound($event)"
    (scanSuccess)="onScanSuccess($event)"
    (scanFailure)="onScanFailure($event)"
    style="display: block; margin: 20px auto; width: 100%; max-width: 350px"
  >
  </zxing-scanner>

  <!-- Display scanned result -->
  <div
    class="alert alert-info w-100 mt-3"
    style="white-space: pre-line"
    *ngIf="scannedResult"
  >
    Scanned Code: {{ scannedResult }}
  </div>

  <!-- Error messages -->
  <div class="alert alert-danger w-100 mt-3" *ngIf="errorMsg">
    {{ errorMsg }}
  </div>
</div>
