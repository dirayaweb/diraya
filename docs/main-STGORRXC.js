var Yk=Object.defineProperty,Zk=Object.defineProperties;var Qk=Object.getOwnPropertyDescriptors;var Ex=Object.getOwnPropertySymbols,Jk=Object.getPrototypeOf,e3=Object.prototype.hasOwnProperty,t3=Object.prototype.propertyIsEnumerable,n3=Reflect.get;var Ix=(n,e,t)=>e in n?Yk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,X=(n,e)=>{for(var t in e||={})e3.call(e,t)&&Ix(n,t,e[t]);if(Ex)for(var t of Ex(e))t3.call(e,t)&&Ix(n,t,e[t]);return n},Ae=(n,e)=>Zk(n,Qk(e));var uo=(n,e,t)=>n3(Jk(n),t,e);var b=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function xx(n,e){return Object.is(n,e)}var Ht=null,yf=!1,l0=1,Zn=Symbol("SIGNAL");function Ue(n){let e=Ht;return Ht=n,e}function Ax(){return Ht}var Vu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function wf(n){if(yf)throw new Error("");if(Ht===null)return;Ht.consumerOnSignalRead(n);let e=Ht.nextProducerIndex++;if(Cf(Ht),e<Ht.producerNode.length&&Ht.producerNode[e]!==n&&Lu(Ht)){let t=Ht.producerNode[e];If(t,Ht.producerIndexOfThis[e])}Ht.producerNode[e]!==n&&(Ht.producerNode[e]=n,Ht.producerIndexOfThis[e]=Lu(Ht)?bx(n,Ht,e):0),Ht.producerLastReadVersion[e]=n.version}function r3(){l0++}function Tx(n){if(!(Lu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===l0)){if(!n.producerMustRecompute(n)&&!f0(n)){Cx(n);return}n.producerRecomputeValue(n),Cx(n)}}function Dx(n){if(n.liveConsumerNode===void 0)return;let e=yf;yf=!0;try{for(let t of n.liveConsumerNode)t.dirty||i3(t)}finally{yf=e}}function Sx(){return Ht?.consumerAllowSignalWrites!==!1}function i3(n){n.dirty=!0,Dx(n),n.consumerMarkedDirty?.(n)}function Cx(n){n.dirty=!1,n.lastCleanEpoch=l0}function Ef(n){return n&&(n.nextProducerIndex=0),Ue(n)}function d0(n,e){if(Ue(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Lu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)If(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function f0(n){Cf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Tx(t),r!==t.version))return!0}return!1}function h0(n){if(Cf(n),Lu(n))for(let e=0;e<n.producerNode.length;e++)If(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function bx(n,e,t){if(Rx(n),n.liveConsumerNode.length===0&&Nx(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=bx(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function If(n,e){if(Rx(n),n.liveConsumerNode.length===1&&Nx(n))for(let r=0;r<n.producerNode.length;r++)If(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Cf(i),i.producerIndexOfThis[r]=e}}function Lu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Cf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Rx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Nx(n){return n.producerNode!==void 0}function Mx(n){let e=Object.create(o3);e.computation=n;let t=()=>{if(Tx(e),wf(e),e.value===_f)throw e.error;return e.value};return t[Zn]=e,t}var c0=Symbol("UNSET"),u0=Symbol("COMPUTING"),_f=Symbol("ERRORED"),o3=Ae(X({},Vu),{value:c0,dirty:!0,error:null,equal:xx,kind:"computed",producerMustRecompute(n){return n.value===c0||n.value===u0},producerRecomputeValue(n){if(n.value===u0)throw new Error("Detected cycle in computations.");let e=n.value;n.value=u0;let t=Ef(n),r,i=!1;try{r=n.computation(),Ue(null),i=e!==c0&&e!==_f&&r!==_f&&n.equal(e,r)}catch(o){r=_f,n.error=o}finally{d0(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function s3(){throw new Error}var Ox=s3;function Px(n){Ox(n)}function kx(n){Ox=n}var a3=null;function Fx(n){let e=Object.create(p0);e.value=n;let t=()=>(wf(e),e.value);return t[Zn]=e,t}function xf(n,e){Sx()||Px(n),n.equal(n.value,e)||(n.value=e,c3(n))}function Lx(n,e){Sx()||Px(n),xf(n,e(n.value))}var p0=Ae(X({},Vu),{equal:xx,value:void 0,kind:"signal"});function c3(n){n.version++,r3(),Dx(n),a3?.()}var g0;function Bu(){return g0}function vi(n){let e=g0;return g0=n,e}var m0=Symbol("NotFound");function se(n){return typeof n=="function"}function da(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Af=da(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function is(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Tt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(o){e=o instanceof Af?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Vx(o)}catch(s){e=e??[],s instanceof Af?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Af(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Vx(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&is(t,e)}remove(e){let{_finalizers:t}=this;t&&is(t,e),e instanceof n&&e._removeParent(this)}};Tt.EMPTY=(()=>{let n=new Tt;return n.closed=!0,n})();var v0=Tt.EMPTY;function Tf(n){return n instanceof Tt||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function Vx(n){se(n)?n():n.unsubscribe()}var Ir={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fa={setTimeout(n,e,...t){let{delegate:r}=fa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=fa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Df(n){fa.setTimeout(()=>{let{onUnhandledError:e}=Ir;if(e)e(n);else throw n})}function yi(){}var Bx=y0("C",void 0,void 0);function Ux(n){return y0("E",void 0,n)}function jx(n){return y0("N",n,void 0)}function y0(n,e,t){return{kind:n,value:e,error:t}}var os=null;function ha(n){if(Ir.useDeprecatedSynchronousErrorHandling){let e=!os;if(e&&(os={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=os;if(os=null,t)throw r}}else n()}function Hx(n){Ir.useDeprecatedSynchronousErrorHandling&&os&&(os.errorThrown=!0,os.error=n)}var ss=class extends Tt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tf(e)&&e.add(this)):this.destination=d3}static create(e,t,r){return new pa(e,t,r)}next(e){this.isStopped?w0(jx(e),this):this._next(e)}error(e){this.isStopped?w0(Ux(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?w0(Bx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},u3=Function.prototype.bind;function _0(n,e){return u3.call(n,e)}var E0=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Sf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Sf(r)}else Sf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Sf(t)}}},pa=class extends ss{constructor(e,t,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Ir.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_0(e.next,o),error:e.error&&_0(e.error,o),complete:e.complete&&_0(e.complete,o)}):i=e}this.destination=new E0(i)}};function Sf(n){Ir.useDeprecatedSynchronousErrorHandling?Hx(n):Df(n)}function l3(n){throw n}function w0(n,e){let{onStoppedNotification:t}=Ir;t&&fa.setTimeout(()=>t(n,e))}var d3={closed:!0,next:yi,error:l3,complete:yi};var ga=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qn(n){return n}function I0(...n){return C0(n)}function C0(n){return n.length===0?Qn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ve=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=h3(t)?t:new pa(t,r,i);return ha(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=$x(r),new r((i,o)=>{let s=new pa({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ga](){return this}pipe(...t){return C0(t)(this)}toPromise(t){return t=$x(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function $x(n){var e;return(e=n??Ir.Promise)!==null&&e!==void 0?e:Promise}function f3(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}function h3(n){return n&&n instanceof ss||f3(n)&&Tf(n)}function x0(n){return se(n?.lift)}function Re(n){return e=>{if(x0(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(n,e,t,r,i){return new A0(n,e,t,r,i)}var A0=class extends ss{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ma(){return Re((n,e)=>{let t=null;n._refCount++;let r=Ne(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var lo=class extends ve{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,x0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Tt;let t=this.getSubject();e.add(this.source.subscribe(Ne(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Tt.EMPTY)}return e}refCount(){return ma()(this)}};var Gx=da(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pt=(()=>{class n extends ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new bf(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Gx}next(t){ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?v0:(this.currentObservers=null,o.push(t),new Tt(()=>{this.currentObservers=null,is(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ve;return t.source=this,t}}return n.create=(e,t)=>new bf(e,t),n})(),bf=class extends pt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:v0}};var Mt=class extends pt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var T0={now(){return(T0.delegate||Date).now()},delegate:void 0};var Rf=class extends Tt{constructor(e,t){super()}schedule(e,t=0){return this}};var Uu={setInterval(n,e,...t){let{delegate:r}=Uu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Uu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var va=class extends Rf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Uu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Uu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,is(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ya=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ya.now=T0.now;var _a=class extends ya{constructor(e,t=ya.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var wa=new _a(va),D0=wa;var Nf=class extends va{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Mf=class extends _a{};var S0=new Mf(Nf);var yn=new ve(n=>n.complete());function Of(n){return n&&se(n.schedule)}function b0(n){return n[n.length-1]}function Pf(n){return se(b0(n))?n.pop():void 0}function Br(n){return Of(b0(n))?n.pop():void 0}function zx(n,e){return typeof b0(n)=="number"?n.pop():e}function kf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function qx(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function Wx(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function as(n){return this instanceof as?(this.v=n,this):new as(n)}function Kx(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(m){return Promise.resolve(m).then(p,f)}}function a(p,m){r[p]&&(i[p]=function(y){return new Promise(function(_,C){o.push([p,y,_,C])>1||c(p,y)})},m&&(i[p]=m(i[p])))}function c(p,m){try{u(r[p](m))}catch(y){h(o[0][3],y)}}function u(p){p.value instanceof as?Promise.resolve(p.value.v).then(l,f):h(o[0][2],p)}function l(p){c("next",p)}function f(p){c("throw",p)}function h(p,m){p(m),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Xx(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Wx=="function"?Wx(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Ea=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ff(n){return se(n?.then)}function Lf(n){return se(n[ga])}function Vf(n){return Symbol.asyncIterator&&se(n?.[Symbol.asyncIterator])}function Bf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function p3(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Uf=p3();function jf(n){return se(n?.[Uf])}function Hf(n){return Kx(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield as(t.read());if(i)return yield as(void 0);yield yield as(r)}}finally{t.releaseLock()}})}function $f(n){return se(n?.getReader)}function nt(n){if(n instanceof ve)return n;if(n!=null){if(Lf(n))return g3(n);if(Ea(n))return m3(n);if(Ff(n))return v3(n);if(Vf(n))return Yx(n);if(jf(n))return y3(n);if($f(n))return _3(n)}throw Bf(n)}function g3(n){return new ve(e=>{let t=n[ga]();if(se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function m3(n){return new ve(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function v3(n){return new ve(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Df)})}function y3(n){return new ve(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Yx(n){return new ve(e=>{w3(n,e).catch(t=>e.error(t))})}function _3(n){return Yx(Hf(n))}function w3(n,e){var t,r,i,o;return qx(this,void 0,void 0,function*(){try{for(t=Xx(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Hn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function fo(n,e=0){return Re((t,r)=>{t.subscribe(Ne(r,i=>Hn(r,n,()=>r.next(i),e),()=>Hn(r,n,()=>r.complete(),e),i=>Hn(r,n,()=>r.error(i),e)))})}function ho(n,e=0){return Re((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Zx(n,e){return nt(n).pipe(ho(e),fo(e))}function Qx(n,e){return nt(n).pipe(ho(e),fo(e))}function Jx(n,e){return new ve(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function eA(n,e){return new ve(t=>{let r;return Hn(t,e,()=>{r=n[Uf](),Hn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function Gf(n,e){if(!n)throw new Error("Iterable cannot be null");return new ve(t=>{Hn(t,e,()=>{let r=n[Symbol.asyncIterator]();Hn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function tA(n,e){return Gf(Hf(n),e)}function nA(n,e){if(n!=null){if(Lf(n))return Zx(n,e);if(Ea(n))return Jx(n,e);if(Ff(n))return Qx(n,e);if(Vf(n))return Gf(n,e);if(jf(n))return eA(n,e);if($f(n))return tA(n,e)}throw Bf(n)}function ke(n,e){return e?nA(n,e):nt(n)}function ae(...n){let e=Br(n);return ke(n,e)}function po(n,e){let t=se(n)?n:()=>n,r=i=>i.error(t());return new ve(e?i=>e.schedule(r,0,i):r)}function R0(n){return!!n&&(n instanceof ve||se(n.lift)&&se(n.subscribe))}var _i=da(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function rA(n){return n instanceof Date&&!isNaN(n)}function ue(n,e){return Re((t,r)=>{let i=0;t.subscribe(Ne(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:E3}=Array;function I3(n,e){return E3(e)?n(...e):n(e)}function Ia(n){return ue(e=>I3(n,e))}var{isArray:C3}=Array,{getPrototypeOf:x3,prototype:A3,keys:T3}=Object;function zf(n){if(n.length===1){let e=n[0];if(C3(e))return{args:e,keys:null};if(D3(e)){let t=T3(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function D3(n){return n&&typeof n=="object"&&x3(n)===A3}function Wf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ju(...n){let e=Br(n),t=Pf(n),{args:r,keys:i}=zf(n);if(r.length===0)return ke([],e);let o=new ve(S3(r,e,i?s=>Wf(i,s):Qn));return t?o.pipe(Ia(t)):o}function S3(n,e,t=Qn){return r=>{iA(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)iA(e,()=>{let u=ke(n[c],e),l=!1;u.subscribe(Ne(r,f=>{o[c]=f,l||(l=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function iA(n,e,t){n?Hn(t,n,e):e()}function oA(n,e,t,r,i,o,s,a){let c=[],u=0,l=0,f=!1,h=()=>{f&&!c.length&&!u&&e.complete()},p=y=>u<r?m(y):c.push(y),m=y=>{o&&e.next(y),u++;let _=!1;nt(t(y,l++)).subscribe(Ne(e,C=>{i?.(C),o?p(C):e.next(C)},()=>{_=!0},void 0,()=>{if(_)try{for(u--;c.length&&u<r;){let C=c.shift();s?Hn(e,s,()=>m(C)):m(C)}h()}catch(C){e.error(C)}}))};return n.subscribe(Ne(e,p,()=>{f=!0,h()})),()=>{a?.()}}function yt(n,e,t=1/0){return se(e)?yt((r,i)=>ue((o,s)=>e(r,o,i,s))(nt(n(r,i))),t):(typeof e=="number"&&(t=e),Re((r,i)=>oA(r,i,n,t)))}function go(n=1/0){return yt(Qn,n)}function sA(){return go(1)}function Ur(...n){return sA()(ke(n,Br(n)))}function cs(n){return new ve(e=>{nt(n()).subscribe(e)})}function N0(...n){let e=Pf(n),{args:t,keys:r}=zf(n),i=new ve(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let f=!1;nt(t[l]).subscribe(Ne(o,h=>{f||(f=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?Wf(r,a):a),o.complete())}))}});return e?i.pipe(Ia(e)):i}var b3=["addListener","removeListener"],R3=["addEventListener","removeEventListener"],N3=["on","off"];function Ca(n,e,t,r){if(se(t)&&(r=t,t=void 0),r)return Ca(n,e,t).pipe(Ia(r));let[i,o]=P3(n)?R3.map(s=>a=>n[s](e,a,t)):M3(n)?b3.map(aA(n,e)):O3(n)?N3.map(aA(n,e)):[];if(!i&&Ea(n))return yt(s=>Ca(s,e,t))(nt(n));if(!i)throw new TypeError("Invalid event target");return new ve(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function aA(n,e){return t=>r=>n[t](e,r)}function M3(n){return se(n.addListener)&&se(n.removeListener)}function O3(n){return se(n.on)&&se(n.off)}function P3(n){return se(n.addEventListener)&&se(n.removeEventListener)}function cA(n=0,e,t=D0){let r=-1;return e!=null&&(Of(e)?t=e:r=e),new ve(i=>{let o=rA(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function qf(...n){let e=Br(n),t=zx(n,1/0),r=n;return r.length?r.length===1?nt(r[0]):go(t)(ke(r,e)):yn}var us=new ve(yi);function $t(n,e){return Re((t,r)=>{let i=0;t.subscribe(Ne(r,o=>n.call(e,o,i++)&&r.next(o)))})}function mo(n){return Re((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ne(t,void 0,void 0,s=>{o=nt(n(s,mo(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function uA(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Ne(s,l=>{let f=u++;c=a?n(c,l,f):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function wi(n,e){return se(e)?yt(n,e,1):yt(n,1)}function lA(n){return new ve(e=>n.subscribe(e))}var k3={connector:()=>new pt};function Kf(n,e=k3){let{connector:t}=e;return Re((r,i)=>{let o=t();nt(n(lA(o))).subscribe(i),i.add(r.subscribe(o))})}function vo(n){return Re((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gt(n){return n<=0?()=>yn:Re((e,t)=>{let r=0;e.subscribe(Ne(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dA(){return Re((n,e)=>{n.subscribe(Ne(e,yi))})}function fA(n){return ue(()=>n)}function M0(n,e){return e?t=>Ur(e.pipe(Gt(1),dA()),t.pipe(M0(n))):yt((t,r)=>nt(n(t,r)).pipe(Gt(1),fA(t)))}function O0(n,e=wa){let t=cA(n,e);return M0(()=>t)}function Xf(n=F3){return Re((e,t)=>{let r=!1;e.subscribe(Ne(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function F3(){return new _i}function yo(n){return Re((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ei(n,e){let t=arguments.length>=2;return r=>r.pipe(n?$t((i,o)=>n(i,o,r)):Qn,Gt(1),t?vo(e):Xf(()=>new _i))}function xa(n){return n<=0?()=>yn:Re((e,t)=>{let r=[];e.subscribe(Ne(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function P0(n,e){let t=arguments.length>=2;return r=>r.pipe(n?$t((i,o)=>n(i,o,r)):Qn,xa(1),t?vo(e):Xf(()=>new _i))}function hA(n,e){let t=se(n)?n:()=>n;return se(e)?Kf(e,{connector:t}):r=>new lo(r,t)}function k0(n){return n?e=>Kf(n)(e):e=>hA(new pt)(e)}function F0(n,e){return Re(uA(n,e,arguments.length>=2,!0))}function L0(...n){let e=Br(n);return Re((t,r)=>{(e?Ur(n,t,e):Ur(n,t)).subscribe(r)})}function zt(n,e){return Re((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ne(r,c=>{i?.unsubscribe();let u=0,l=o++;nt(n(c,l)).subscribe(i=Ne(r,f=>r.next(e?e(c,f,l,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function V0(n){return Re((e,t)=>{nt(n).subscribe(Ne(t,()=>t.complete(),yi)),!t.closed&&e.subscribe(t)})}function kt(n,e,t){let r=se(n)||e||t?{next:n,error:e,complete:t}:n;return r?Re((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ne(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Qn}var rT="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",re=class extends Error{code;constructor(e,t){super(bh(e,t)),this.code=e}};function bh(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var iT=Symbol("InputSignalNode#UNSET"),L3=Ae(X({},p0),{transformFn:void 0,applyValueToInputSignal(n,e){xf(n,e)}});function oT(n,e){let t=Object.create(L3);t.value=n,t.transformFn=e?.transform;function r(){if(wf(t),t.value===iT)throw new re(-950,!1);return t.value}return r[Zn]=t,r}function Ju(n){return{toString:n}.toString()}var Yf="__parameters__";function V3(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function sT(n,e,t){return Ju(()=>{let r=V3(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let f=c.hasOwnProperty(Yf)?c[Yf]:Object.defineProperty(c,Yf,{value:[]})[Yf];for(;f.length<=l;)f.push(null);return(f[l]=f[l]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Q0=globalThis;function ut(n){for(let e in n)if(n[e]===ut)return e;throw Error("Could not find renamed property on target object.")}function B3(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function $n(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map($n).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function pA(n,e){return n?e?`${n} ${e}`:n:e||""}var U3=ut({__forward_ref__:ut});function Eo(n){return n.__forward_ref__=Eo,n.toString=function(){return $n(this())},n}function Mn(n){return aT(n)?n():n}function aT(n){return typeof n=="function"&&n.hasOwnProperty(U3)&&n.__forward_ref__===Eo}function ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function er(n){return{providers:n.providers||[],imports:n.imports||[]}}function Rh(n){return gA(n,uT)||gA(n,lT)}function cT(n){return Rh(n)!==null}function gA(n,e){return n.hasOwnProperty(e)?n[e]:null}function j3(n){let e=n&&(n[uT]||n[lT]);return e||null}function mA(n){return n&&(n.hasOwnProperty(vA)||n.hasOwnProperty(H3))?n[vA]:null}var uT=ut({\u0275prov:ut}),vA=ut({\u0275inj:ut}),lT=ut({ngInjectableDef:ut}),H3=ut({ngInjectorDef:ut}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function dT(n){return n&&!!n.\u0275providers}var $3=ut({\u0275cmp:ut}),G3=ut({\u0275dir:ut}),z3=ut({\u0275pipe:ut}),W3=ut({\u0275mod:ut}),oh=ut({\u0275fac:ut}),zu=ut({__NG_ELEMENT_ID__:ut}),yA=ut({__NG_ENV_ID__:ut});function Nh(n){return typeof n=="string"?n:n==null?"":String(n)}function q3(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Nh(n)}function fT(n,e){throw new re(-200,n)}function qv(n,e){throw new re(-201,!1)}var be=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(be||{}),J0;function hT(){return J0}function ar(n){let e=J0;return J0=n,e}function pT(n,e,t){let r=Rh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&be.Optional)return null;if(e!==void 0)return e;qv(n,"Injector")}var K3={},ls=K3,ev="__NG_DI_FLAG__",sh=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?m0:ls,r)}},ah="ngTempTokenPath",X3="ngTokenPath",Y3=/\n/gm,Z3="\u0275",_A="__source";function Q3(n,e=be.Default){if(Bu()===void 0)throw new re(-203,!1);if(Bu()===null)return pT(n,void 0,e);{let t=Bu(),r;return t instanceof sh?r=t.injector:r=t,r.get(n,e&be.Optional?null:void 0,e)}}function ie(n,e=be.Default){return(hT()||Q3)(Mn(n),e)}function H(n,e=be.Default){return ie(n,Mh(e))}function Mh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function tv(n){let e=[];for(let t=0;t<n.length;t++){let r=Mn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,o=be.Default;for(let s=0;s<r.length;s++){let a=r[s],c=J3(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ie(i,o))}else e.push(ie(r))}return e}function gT(n,e){return n[ev]=e,n.prototype[ev]=e,n}function J3(n){return n[ev]}function eF(n,e,t,r){let i=n[ah];throw e[_A]&&i.unshift(e[_A]),n.message=tF(`
`+n.message,i,t,r),n[X3]=i,n[ah]=null,n}function tF(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Z3?n.slice(2):n;let i=$n(e);if(Array.isArray(e))i=e.map($n).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):$n(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Y3,`
  `)}`}var zn=gT(sT("Optional"),8);var nF=gT(sT("SkipSelf"),4);function Na(n,e){let t=n.hasOwnProperty(oh);return t?n[oh]:null}function rF(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function iF(n){return n.flat(Number.POSITIVE_INFINITY)}function Kv(n,e){n.forEach(t=>Array.isArray(t)?Kv(t,e):e(t))}function mT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ch(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function oF(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function sF(n,e,t){let r=el(n,e);return r>=0?n[r|1]=t:(r=~r,oF(n,r,e,t)),r}function B0(n,e){let t=el(n,e);if(t>=0)return n[t|1]}function el(n,e){return aF(n,e,1)}function aF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var fs={},cr=[],Ma=new J(""),vT=new J("",-1),yT=new J(""),uh=class{get(e,t=ls){if(t===ls){let r=new Error(`NullInjectorError: No provider for ${$n(e)}!`);throw r.name="NullInjectorError",r}return t}};function _T(n,e){let t=n[W3]||null;if(!t&&e===!0)throw new Error(`Type ${$n(n)} does not have '\u0275mod' property.`);return t}function hs(n){return n[$3]||null}function cF(n){return n[G3]||null}function uF(n){return n[z3]||null}function Wn(n){return{\u0275providers:n}}function lF(...n){return{\u0275providers:wT(!0,n),\u0275fromNgModule:!0}}function wT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Kv(e,s=>{let a=s;nv(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ET(i,o),t}function ET(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Xv(i,o=>{e(o,r)})}}function nv(n,e,t,r){if(n=Mn(n),!n)return!1;let i=null,o=mA(n),s=!o&&hs(n);if(!o&&!s){let c=n.ngModule;if(o=mA(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)nv(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Kv(o.imports,l=>{nv(l,e,t,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&ET(u,e)}if(!a){let u=Na(i)||(()=>new i);e({provide:i,useFactory:u,deps:cr},i),e({provide:yT,useValue:i,multi:!0},i),e({provide:Ma,useValue:()=>ie(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;Xv(c,l=>{e(l,u)})}}else return!1;return i!==n&&n.providers!==void 0}function Xv(n,e){for(let t of n)dT(t)&&(t=t.\u0275providers),Array.isArray(t)?Xv(t,e):e(t)}var dF=ut({provide:String,useValue:ut});function IT(n){return n!==null&&typeof n=="object"&&dF in n}function fF(n){return!!(n&&n.useExisting)}function hF(n){return!!(n&&n.useFactory)}function Oa(n){return typeof n=="function"}function pF(n){return!!n.useClass}var Oh=new J(""),Jf={},wA={},U0;function Yv(){return U0===void 0&&(U0=new uh),U0}var an=class{},Wu=class extends an{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,iv(e,s=>this.processProvider(s)),this.records.set(vT,Aa(void 0,this)),i.has("environment")&&this.records.set(an,Aa(void 0,this));let o=this.records.get(Oh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(yT,cr,be.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?m0:ls,r)}destroy(){$u(this),this._destroyed=!0;let e=Ue(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ue(e)}}onDestroy(e){return $u(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){$u(this);let t=vi(this),r=ar(void 0),i;try{return e()}finally{vi(t),ar(r)}}get(e,t=ls,r=be.Default){if($u(this),e.hasOwnProperty(yA))return e[yA](this);r=Mh(r);let i,o=vi(this),s=ar(void 0);try{if(!(r&be.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=_F(e)&&Rh(e);u&&this.injectableDefInScope(u)?c=Aa(rv(e),Jf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&be.Self?Yv():this.parent;return t=r&be.Optional&&t===ls?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[ah]=a[ah]||[]).unshift($n(e)),o)throw a;return eF(a,e,"R3InjectorError",this.source)}else throw a}finally{ar(s),vi(o)}}resolveInjectorInitializers(){let e=Ue(null),t=vi(this),r=ar(void 0),i;try{let o=this.get(Ma,cr,be.Self);for(let s of o)s()}finally{vi(t),ar(r),Ue(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push($n(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Mn(e);let t=Oa(e)?e:Mn(e&&e.provide),r=mF(e);if(!Oa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Aa(void 0,Jf,!0),i.factory=()=>tv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ue(null);try{return t.value===wA?fT($n(e)):t.value===Jf&&(t.value=wA,t.value=t.factory()),typeof t.value=="object"&&t.value&&yF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ue(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Mn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function rv(n){let e=Rh(n),t=e!==null?e.factory:Na(n);if(t!==null)return t;if(n instanceof J)throw new re(204,!1);if(n instanceof Function)return gF(n);throw new re(204,!1)}function gF(n){if(n.length>0)throw new re(204,!1);let t=j3(n);return t!==null?()=>t.factory(n):()=>new n}function mF(n){if(IT(n))return Aa(void 0,n.useValue);{let e=CT(n);return Aa(e,Jf)}}function CT(n,e,t){let r;if(Oa(n)){let i=Mn(n);return Na(i)||rv(i)}else if(IT(n))r=()=>Mn(n.useValue);else if(hF(n))r=()=>n.useFactory(...tv(n.deps||[]));else if(fF(n))r=()=>ie(Mn(n.useExisting));else{let i=Mn(n&&(n.useClass||n.provide));if(vF(n))r=()=>new i(...tv(n.deps));else return Na(i)||rv(i)}return r}function $u(n){if(n.destroyed)throw new re(205,!1)}function Aa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function vF(n){return!!n.deps}function yF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function _F(n){return typeof n=="function"||typeof n=="object"&&n instanceof J}function iv(n,e){for(let t of n)Array.isArray(t)?iv(t,e):t&&dT(t)?iv(t.\u0275providers,e):e(t)}function Zt(n,e){let t;n instanceof Wu?($u(n),t=n):t=new sh(n);let r,i=vi(t),o=ar(void 0);try{return e()}finally{vi(i),ar(o)}}function xT(){return hT()!==void 0||Bu()!=null}function Ph(n){if(!xT())throw new re(-203,!1)}function wF(n){return typeof n=="function"}var Di=0,Oe=1,we=2,_n=3,xr=4,Ar=5,lh=6,dh=7,Gn=8,qu=9,Ii=10,Wt=11,Ku=12,EA=13,Ba=14,Hr=15,ps=16,Ta=17,Ci=18,kh=19,AT=20,_o=21,j0=22,fh=23,ur=24,ba=25,$r=26,TT=1;var gs=7,hh=8,Pa=9,Jn=10;function wo(n){return Array.isArray(n)&&typeof n[TT]=="object"}function Si(n){return Array.isArray(n)&&n[TT]===!0}function DT(n){return(n.flags&4)!==0}function Ua(n){return n.componentOffset>-1}function Zv(n){return(n.flags&1)===1}function Gr(n){return!!n.template}function ph(n){return(n[we]&512)!==0}function tl(n){return(n[we]&256)===256}var ov=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ST(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ja=(()=>{let n=()=>bT;return n.ngInherit=!0,n})();function bT(n){return n.type.prototype.ngOnChanges&&(n.setInput=IF),EF}function EF(){let n=NT(this),e=n?.current;if(e){let t=n.previous;if(t===fs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function IF(n,e,t,r,i){let o=this.declaredInputs[r],s=NT(n)||CF(n,{previous:fs,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new ov(u&&u.currentValue,t,c===fs),ST(n,e,i,t)}var RT="__ngSimpleChanges__";function NT(n){return n[RT]||null}function CF(n,e){return n[RT]=e}var IA=null;var rt=function(n,e=null,t){IA?.(n,e,t)},xF="svg",AF="math";function zr(n){for(;Array.isArray(n);)n=n[Di];return n}function MT(n,e){return zr(e[n])}function Kr(n,e){return zr(e[n.index])}function OT(n,e){return n.data[e]}function TF(n,e){return n[e]}function Wr(n,e){let t=e[n];return wo(t)?t:t[Di]}function DF(n){return(n[we]&4)===4}function Qv(n){return(n[we]&128)===128}function SF(n){return Si(n[_n])}function gh(n,e){return e==null?null:n[e]}function PT(n){n[Ta]=0}function kT(n){n[we]&1024||(n[we]|=1024,Qv(n)&&nl(n))}function bF(n,e){for(;n>0;)e=e[Ba],n--;return e}function Fh(n){return!!(n[we]&9216||n[ur]?.dirty)}function sv(n){n[Ii].changeDetectionScheduler?.notify(8),n[we]&64&&(n[we]|=1024),Fh(n)&&nl(n)}function nl(n){n[Ii].changeDetectionScheduler?.notify(0);let e=ms(n);for(;e!==null&&!(e[we]&8192||(e[we]|=8192,!Qv(e)));)e=ms(e)}function FT(n,e){if(tl(n))throw new re(911,!1);n[_o]===null&&(n[_o]=[]),n[_o].push(e)}function RF(n,e){if(n[_o]===null)return;let t=n[_o].indexOf(e);t!==-1&&n[_o].splice(t,1)}function ms(n){let e=n[_n];return Si(e)?e[_n]:e}function LT(n){return n[dh]??=[]}function VT(n){return n.cleanup??=[]}function NF(n,e,t,r){let i=LT(e);i.push(t),n.firstCreatePass&&VT(n).push(r,i.length-1)}var Me={lFrame:WT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var av=!1;function MF(){return Me.lFrame.elementDepthCount}function OF(){Me.lFrame.elementDepthCount++}function PF(){Me.lFrame.elementDepthCount--}function BT(){return Me.bindingsEnabled}function kF(){return Me.skipHydrationRootTNode!==null}function FF(n){return Me.skipHydrationRootTNode===n}function LF(){Me.skipHydrationRootTNode=null}function it(){return Me.lFrame.lView}function On(){return Me.lFrame.tView}function wn(n){return Me.lFrame.contextLView=n,n[Gn]}function En(n){return Me.lFrame.contextLView=null,n}function qn(){let n=UT();for(;n!==null&&n.type===64;)n=n.parent;return n}function UT(){return Me.lFrame.currentTNode}function VF(){let n=Me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function rl(n,e){let t=Me.lFrame;t.currentTNode=n,t.isParent=e}function jT(){return Me.lFrame.isParent}function BF(){Me.lFrame.isParent=!1}function UF(){return Me.lFrame.contextLView}function HT(){return av}function CA(n){let e=av;return av=n,e}function jF(n){return Me.lFrame.bindingIndex=n}function Lh(){return Me.lFrame.bindingIndex++}function HF(n){let e=Me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function $F(){return Me.lFrame.inI18n}function GF(n,e){let t=Me.lFrame;t.bindingIndex=t.bindingRootIndex=n,cv(e)}function zF(){return Me.lFrame.currentDirectiveIndex}function cv(n){Me.lFrame.currentDirectiveIndex=n}function WF(n){let e=Me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function $T(){return Me.lFrame.currentQueryIndex}function Jv(n){Me.lFrame.currentQueryIndex=n}function qF(n){let e=n[Oe];return e.type===2?e.declTNode:e.type===1?n[Ar]:null}function GT(n,e,t){if(t&be.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&be.Host);)if(i=qF(o),i===null||(o=o[Ba],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Me.lFrame=zT();return r.currentTNode=e,r.lView=n,!0}function ey(n){let e=zT(),t=n[Oe];Me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function zT(){let n=Me.lFrame,e=n===null?null:n.child;return e===null?WT(n):e}function WT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function qT(){let n=Me.lFrame;return Me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var KT=qT;function ty(){let n=qT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function KF(n){return(Me.lFrame.contextLView=bF(n,Me.lFrame.contextLView))[Gn]}function Ha(){return Me.lFrame.selectedIndex}function vs(n){Me.lFrame.selectedIndex=n}function ny(){let n=Me.lFrame;return OT(n.tView,n.selectedIndex)}function XF(){return Me.lFrame.currentNamespace}var XT=!0;function ry(){return XT}function iy(n){XT=n}function YF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=bT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function YT(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),l!=null&&(n.destroyHooks??=[]).push(t,l)}}function eh(n,e,t){ZT(n,e,3,t)}function th(n,e,t,r){(n[we]&3)===t&&ZT(n,e,t,r)}function H0(n,e){let t=n[we];(t&3)===e&&(t&=16383,t+=1,n[we]=t)}function ZT(n,e,t,r){let i=r!==void 0?n[Ta]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ta]+=65536),(a<o||o==-1)&&(ZF(n,t,e,c),n[Ta]=(n[Ta]&4294901760)+c+2),c++}function xA(n,e){rt(4,n,e);let t=Ue(null);try{e.call(n)}finally{Ue(t),rt(5,n,e)}}function ZF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[we]>>14<n[Ta]>>16&&(n[we]&3)===e&&(n[we]+=16384,xA(a,o)):xA(a,o)}var Ra=-1,ys=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function QF(n){return(n.flags&8)!==0}function JF(n){return(n.flags&16)!==0}function e4(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];t4(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function QT(n){return n===3||n===4||n===6}function t4(n){return n.charCodeAt(0)===64}function Xu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?AA(n,t,i,null,e[++r]):AA(n,t,i,null,null))}}return n}function AA(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}var $0={},uv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Mh(r);let i=this.injector.get(e,$0,r);return i!==$0||t===$0?i:this.parentInjector.get(e,t,r)}};function JT(n){return n!==Ra}function mh(n){return n&32767}function n4(n){return n>>16}function vh(n,e){let t=n4(n),r=e;for(;t>0;)r=r[Ba],t--;return r}var lv=!0;function TA(n){let e=lv;return lv=n,e}var r4=256,eD=r4-1,tD=5,i4=0,jr={};function o4(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(zu)&&(r=t[zu]),r==null&&(r=t[zu]=i4++);let i=r&eD,o=1<<i;e.data[n+(i>>tD)]|=o}function yh(n,e){let t=nD(n,e);if(t!==-1)return t;let r=e[Oe];r.firstCreatePass&&(n.injectorIndex=e.length,G0(r.data,n),G0(e,null),G0(r.blueprint,null));let i=oy(n,e),o=n.injectorIndex;if(JT(i)){let s=mh(i),a=vh(i,e),c=a[Oe].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function G0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function nD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function oy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=aD(i),r===null)return Ra;if(t++,i=i[Ba],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ra}function dv(n,e,t){o4(n,e,t)}function s4(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(QT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function rD(n,e,t){if(t&be.Optional||n!==void 0)return n;qv(e,"NodeInjector")}function iD(n,e,t,r){if(t&be.Optional&&r===void 0&&(r=null),(t&(be.Self|be.Host))===0){let i=n[qu],o=ar(void 0);try{return i?i.get(e,r,t&be.Optional):pT(e,r,t&be.Optional)}finally{ar(o)}}return rD(r,e,t)}function oD(n,e,t,r=be.Default,i){if(n!==null){if(e[we]&2048&&!(r&be.Self)){let s=l4(n,e,t,r,jr);if(s!==jr)return s}let o=sD(n,e,t,r,jr);if(o!==jr)return o}return iD(e,t,r,i)}function sD(n,e,t,r,i){let o=c4(t);if(typeof o=="function"){if(!GT(e,n,r))return r&be.Host?rD(i,t,r):iD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&be.Optional))qv(t);else return s}finally{KT()}}else if(typeof o=="number"){let s=null,a=nD(n,e),c=Ra,u=r&be.Host?e[Hr][Ar]:null;for((a===-1||r&be.SkipSelf)&&(c=a===-1?oy(n,e):e[a+8],c===Ra||!SA(r,!1)?a=-1:(s=e[Oe],a=mh(c),e=vh(c,e)));a!==-1;){let l=e[Oe];if(DA(o,a,l.data)){let f=a4(a,e,t,s,r,u);if(f!==jr)return f}c=e[a+8],c!==Ra&&SA(r,e[Oe].data[a+8]===u)&&DA(o,a,e)?(s=l,a=mh(c),e=vh(c,e)):a=-1}}return i}function a4(n,e,t,r,i,o){let s=e[Oe],a=s.data[n+8],c=r==null?Ua(a)&&lv:r!=s&&(a.type&3)!==0,u=i&be.Host&&o===a,l=nh(a,s,t,c,u);return l!==null?Yu(e,s,l,a):jr}function nh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,l=o>>20,f=r?a:a+l,h=i?a+l:u;for(let p=f;p<h;p++){let m=s[p];if(p<c&&t===m||p>=c&&m.type===t)return p}if(i){let p=s[c];if(p&&Gr(p)&&p.type===t)return c}return null}function Yu(n,e,t,r){let i=n[t],o=e.data;if(i instanceof ys){let s=i;s.resolving&&fT(q3(o[t]));let a=TA(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?ar(s.injectImpl):null,l=GT(n,r,be.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&YF(t,o[t],e)}finally{u!==null&&ar(u),TA(a),s.resolving=!1,KT()}}return i}function c4(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(zu)?n[zu]:void 0;return typeof e=="number"?e>=0?e&eD:u4:e}function DA(n,e,t){let r=1<<n;return!!(t[e+(n>>tD)]&r)}function SA(n,e){return!(n&be.Self)&&!(n&be.Host&&e)}var ds=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return oD(this._tNode,this._lView,e,Mh(r),t)}};function u4(){return new ds(qn(),it())}function Io(n){return Ju(()=>{let e=n.prototype.constructor,t=e[oh]||fv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[oh]||fv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function fv(n){return aT(n)?()=>{let e=fv(Mn(n));return e&&e()}:Na(n)}function l4(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[we]&2048&&!ph(s);){let a=sD(o,s,t,r|be.Self,jr);if(a!==jr)return a;let c=o.parent;if(!c){let u=s[AT];if(u){let l=u.get(t,jr,r);if(l!==jr)return l}c=aD(s),s=s[Ba]}o=c}return i}function aD(n){let e=n[Oe],t=e.type;return t===2?e.declTNode:t===1?n[Ar]:null}function sy(n){return s4(qn(),n)}function bA(n,e=null,t=null,r){let i=cD(n,e,t,r);return i.resolveInjectorInitializers(),i}function cD(n,e=null,t=null,r,i=new Set){let o=[t||cr,lF(n)];return r=r||(typeof n=="object"?void 0:$n(n)),new Wu(o,e||Yv(),r||null,i)}var _t=class n{static THROW_IF_NOT_FOUND=ls;static NULL=new uh;static create(e,t){if(Array.isArray(e))return bA({name:""},t,e,"");{let r=e.name??"";return bA({name:r},e.parent,e.providers,r)}}static \u0275prov=ne({token:n,providedIn:"any",factory:()=>ie(vT)});static __NG_ELEMENT_ID__=-1};var d4=new J("");d4.__NG_ELEMENT_ID__=n=>{let e=qn();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(n&be.Optional)return null;throw new re(204,!1)};var uD=!1,$a=(()=>{class n{static __NG_ELEMENT_ID__=f4;static __NG_ENV_ID__=t=>t}return n})(),hv=class extends $a{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return FT(this._lView,e),()=>RF(this._lView,e)}};function f4(){return new hv(it())}var _s=class{},Vh=new J("",{providedIn:"root",factory:()=>!1});var lD=new J(""),dD=new J(""),Xr=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Mt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),Bh=(()=>{class n{internalPendingTasks=H(Xr);scheduler=H(_s);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return b(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),pv=class extends pt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,xT()&&(this.destroyRef=H($a,{optional:!0})??void 0,this.pendingTasks=H(Xr,{optional:!0})??void 0)}emit(e){let t=Ue(null);try{super.next(e)}finally{Ue(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Tt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Xe=pv;function _h(...n){}function fD(n){let e,t;function r(){n=_h;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function RA(n){return queueMicrotask(()=>n()),()=>{n=_h}}var ay="isAngularZone",wh=ay+"_ID",h4=0,$e=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Xe(!1);onMicrotaskEmpty=new Xe(!1);onStable=new Xe(!1);onError=new Xe(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=uD}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,m4(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ay)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new re(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,p4,_h,_h);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},p4={};function cy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function g4(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){fD(()=>{n.callbackScheduled=!1,gv(n),n.isCheckStableRunning=!0,cy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),gv(n)}function m4(n){let e=()=>{g4(n)},t=h4++;n._inner=n._inner.fork({name:"angular",properties:{[ay]:!0,[wh]:t,[wh+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(v4(c))return r.invokeTask(o,s,a,c);try{return NA(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),MA(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return NA(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!y4(c)&&e(),MA(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,gv(n),cy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function gv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function NA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function MA(n){n._nesting--,cy(n)}var mv=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Xe;onMicrotaskEmpty=new Xe;onStable=new Xe;onError=new Xe;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function v4(n){return hD(n,"__ignore_ng_zone__")}function y4(n){return hD(n,"__scheduler_tick__")}function hD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var xi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},_4=new J("",{providedIn:"root",factory:()=>{let n=H($e),e=H(xi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function OA(n,e){return oT(n,e)}function w4(n){return oT(iT,n)}var pD=(OA.required=w4,OA);function E4(){return Ga(qn(),it())}function Ga(n,e){return new tr(Kr(n,e))}var tr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=E4}return n})();function I4(n){return n instanceof tr?n.nativeElement:n}function C4(n){return typeof n=="function"&&n[Zn]!==void 0}function za(n,e){let t=Fx(n),r=t[Zn];return e?.equal&&(r.equal=e.equal),t.set=i=>xf(r,i),t.update=i=>Lx(r,i),t.asReadonly=x4.bind(t),t}function x4(){let n=this[Zn];if(n.readonlyFn===void 0){let e=()=>this();e[Zn]=n,n.readonlyFn=e}return n.readonlyFn}function gD(n){return C4(n)&&typeof n.set=="function"}function A4(){return this._results[Symbol.iterator]()}var vv=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new pt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=iF(e);(this._changesDetected=!rF(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=A4};function mD(n){return(n.flags&128)===128}var vD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(vD||{}),yD=new Map,T4=0;function D4(){return T4++}function S4(n){yD.set(n[kh],n)}function yv(n){yD.delete(n[kh])}var PA="__ngContext__";function il(n,e){wo(e)?(n[PA]=e[kh],S4(e)):n[PA]=e}function _D(n){return ED(n[Ku])}function wD(n){return ED(n[xr])}function ED(n){for(;n!==null&&!Si(n);)n=n[xr];return n}var _v;function ID(n){_v=n}function b4(){if(_v!==void 0)return _v;if(typeof document<"u")return document;throw new re(210,!1)}var uy=new J("",{providedIn:"root",factory:()=>R4}),R4="ng",ly=new J(""),bi=new J("",{providedIn:"platform",factory:()=>"unknown"});var dy=new J("",{providedIn:"root",factory:()=>b4().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var N4="h",M4="b";var CD=!1,O4=new J("",{providedIn:"root",factory:()=>CD});var fy=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(fy||{}),Wa=new J(""),kA=new Set;function ol(n){kA.has(n)||(kA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var xD=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=P4}return n})();function P4(){return new xD(it(),qn())}var Da=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Da||{}),AD=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),k4=[Da.EarlyRead,Da.Write,Da.MixedReadWrite,Da.Read],F4=(()=>{class n{ngZone=H($e);scheduler=H(_s);errorHandler=H(xi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){H(Wa,{optional:!0})}execute(){let t=this.sequences.size>0;t&&rt(16),this.executing=!0;for(let r of k4)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&rt(17)}register(t){let{view:r}=t;r!==void 0?((r[ba]??=[]).push(t),nl(r),r[we]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(fy.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),wv=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ba];e&&(this.view[ba]=e.filter(t=>t!==this))}};function hy(n,e){!e?.injector&&Ph(hy);let t=e?.injector??H(_t);return ol("NgAfterNextRender"),V4(n,t,e,!0)}function L4(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function V4(n,e,t,r){let i=e.get(AD);i.impl??=e.get(F4);let o=e.get(Wa,null,{optional:!0}),s=t?.phase??Da.MixedReadWrite,a=t?.manualCleanup!==!0?e.get($a):null,c=e.get(xD,null,{optional:!0}),u=new wv(i.impl,L4(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(u),u}var B4=()=>null;function TD(n,e,t=!1){return B4(n,e,t)}function DD(n,e){let t=n.contentQueries;if(t!==null){let r=Ue(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Jv(o),a.contentQueries(2,e[s],s)}}}finally{Ue(r)}}}function Ev(n,e,t){Jv(0);let r=Ue(null);try{e(n,t)}finally{Ue(r)}}function SD(n,e,t){if(DT(e)){let r=Ue(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ue(r)}}}var qr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(qr||{});var Zf;function U4(){if(Zf===void 0&&(Zf=null,Q0.trustedTypes))try{Zf=Q0.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zf}function FA(n){return U4()?.createScriptURL(n)||n}var Eh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rT})`}};function sl(n){return n instanceof Eh?n.changingThisBreaksApplicationSecurity:n}function py(n,e){let t=j4(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${rT})`)}return t===e}function j4(n){return n instanceof Eh&&n.getTypeName()||null}var H4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bD(n){return n=String(n),n.match(H4)?n:"unsafe:"+n}var Uh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Uh||{});function qa(n){let e=ND();return e?e.sanitize(Uh.URL,n)||"":py(n,"URL")?sl(n):bD(Nh(n))}function $4(n){let e=ND();if(e)return FA(e.sanitize(Uh.RESOURCE_URL,n)||"");if(py(n,"ResourceURL"))return FA(sl(n));throw new re(904,!1)}function G4(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?$4:qa}function RD(n,e,t){return G4(e,t)(n)}function ND(){let n=it();return n&&n[Ii].sanitizer}function MD(n){return n instanceof Function?n():n}function z4(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var OD="ng-template";function W4(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&z4(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(gy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function gy(n){return n.type===4&&n.value!==OD}function q4(n,e,t){let r=n.type===4&&!t?OD:n.value;return e===r}function K4(n,e,t){let r=4,i=n.attrs,o=i!==null?Z4(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Cr(r)&&!Cr(c))return!1;if(s&&Cr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!q4(n,c,t)||c===""&&e.length===1){if(Cr(r))return!1;s=!0}}else if(r&8){if(i===null||!W4(n,i,c,t)){if(Cr(r))return!1;s=!0}}else{let u=e[++a],l=X4(c,i,gy(n),t);if(l===-1){if(Cr(r))return!1;s=!0;continue}if(u!==""){let f;if(l>o?f="":f=i[l+1].toLowerCase(),r&2&&u!==f){if(Cr(r))return!1;s=!0}}}}return Cr(r)||s}function Cr(n){return(n&1)===0}function X4(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Q4(e,n)}function Y4(n,e,t=!1){for(let r=0;r<e.length;r++)if(K4(n,e[r],t))return!0;return!1}function Z4(n){for(let e=0;e<n.length;e++){let t=n[e];if(QT(t))return e}return n.length}function Q4(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function LA(n,e){return n?":not("+e.trim()+")":e}function J4(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Cr(s)&&(e+=LA(o,i),i=""),r=s,o=o||!Cr(r);t++}return i!==""&&(e+=LA(o,i)),e}function eL(n){return n.map(J4).join(",")}function tL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Cr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Ka={};function nL(n,e){return n.createText(e)}function rL(n,e,t){n.setValue(e,t)}function PD(n,e,t){return n.createElement(e,t)}function Ih(n,e,t,r,i){n.insertBefore(e,t,r,i)}function kD(n,e,t){n.appendChild(e,t)}function VA(n,e,t,r,i){r!==null?Ih(n,e,t,r,i):kD(n,e,t)}function iL(n,e,t){n.removeChild(null,e,t)}function oL(n,e,t){n.setAttribute(e,"style",t)}function sL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function FD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&e4(n,e,r),i!==null&&sL(n,e,i),o!==null&&oL(n,e,o)}function my(n,e,t,r,i,o,s,a,c,u,l){let f=$r+r,h=f+i,p=aL(f,h),m=typeof u=="function"?u():u;return p[Oe]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:l}}function aL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ka);return t}function cL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=my(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function vy(n,e,t,r,i,o,s,a,c,u,l){let f=e.blueprint.slice();return f[Di]=i,f[we]=r|4|128|8|64|1024,(u!==null||n&&n[we]&2048)&&(f[we]|=2048),PT(f),f[_n]=f[Ba]=n,f[Gn]=t,f[Ii]=s||n&&n[Ii],f[Wt]=a||n&&n[Wt],f[qu]=c||n&&n[qu]||null,f[Ar]=o,f[kh]=D4(),f[lh]=l,f[AT]=u,f[Hr]=e.type==2?n[Hr]:f,f}function uL(n,e,t){let r=Kr(e,n),i=cL(t),o=n[Ii].rendererFactory,s=yy(n,vy(n,i,null,LD(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function LD(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function VD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function yy(n,e){return n[Ku]?n[EA][xr]=e:n[Ku]=e,n[EA]=e,e}function le(n=1){BD(On(),it(),Ha()+n,!1)}function BD(n,e,t,r){if(!r)if((e[we]&3)===3){let o=n.preOrderCheckHooks;o!==null&&eh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&th(e,o,0,t)}vs(t)}var jh=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(jh||{});function Iv(n,e,t,r){let i=Ue(null);try{let[o,s,a]=n.inputs[t],c=null;(s&jh.SignalBased)!==0&&(c=e[o][Zn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):ST(e,c,o,r)}finally{Ue(i)}}function UD(n,e,t,r,i){let o=Ha(),s=r&2;try{vs(-1),s&&e.length>$r&&BD(n,e,$r,!1),rt(s?2:0,i),t(r,i)}finally{vs(o),rt(s?3:1,i)}}function _y(n,e,t){gL(n,e,t),(t.flags&64)===64&&mL(n,e,t)}function jD(n,e,t=Kr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function lL(n,e,t,r){let o=r.get(O4,CD)||t===qr.ShadowDom,s=n.selectRootElement(e,o);return dL(s),s}function dL(n){fL(n)}var fL=()=>null;function hL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function HD(n,e,t,r,i,o,s,a){if(!a&&wy(e,n,t,r,i)){Ua(e)&&pL(t,e.index);return}if(e.type&3){let c=Kr(e,t);r=hL(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function pL(n,e){let t=Wr(e,n);t[we]&16||(t[we]|=64)}function gL(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ua(t)&&uL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||yh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Yu(e,n,s,t);if(il(c,e),o!==null&&wL(e,s-r,c,a,t,o),Gr(a)){let u=Wr(t.index,e);u[Gn]=Yu(e,n,s,t)}}}function mL(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=zF();try{vs(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];cv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&vL(c,u)}}finally{vs(-1),cv(s)}}function vL(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function $D(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Y4(e,o.selectors,!1)&&(r??=[],Gr(o)?r.unshift(o):r.push(o))}return r}function yL(n,e,t,r,i,o){let s=Kr(n,e);_L(e[Wt],s,o,n.value,t,r,i)}function _L(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Nh(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function wL(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Iv(r,t,c,u)}}function GD(n,e){let t=n[qu],r=t?t.get(xi,null):null;r&&r.handleError(e)}function wy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1],f=e.data[u];Iv(f,t[u],l,i),a=!0}if(o)for(let c of o){let u=t[c],l=e.data[c];Iv(l,u,r,i),a=!0}return a}function EL(n,e){let t=Wr(e,n),r=t[Oe];IL(r,t);let i=t[Di];i!==null&&t[lh]===null&&(t[lh]=TD(i,t[qu])),rt(18),Ey(r,t,t[Gn]),rt(19,t[Gn])}function IL(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ey(n,e,t){ey(e);try{let r=n.viewQuery;r!==null&&Ev(1,r,t);let i=n.template;i!==null&&UD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ci]?.finishViewCreation(n),n.staticContentQueries&&DD(n,e),n.staticViewQueries&&Ev(2,n.viewQuery,t);let o=n.components;o!==null&&CL(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[we]&=-5,ty()}}function CL(n,e){for(let t=0;t<e.length;t++)EL(n,e[t])}function xL(n,e,t,r){let i=Ue(null);try{let o=e.tView,a=n[we]&4096?4096:16,c=vy(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[ps]=u;let l=n[Ci];return l!==null&&(c[Ci]=l.createEmbeddedView(o)),Ey(o,c,t),c}finally{Ue(i)}}function BA(n,e){return!e||e.firstChild===null||mD(n)}var AL;function Iy(n,e){return AL(n,e)}var Ai=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ai||{});function zD(n){return(n.flags&32)===32}function Sa(n,e,t,r,i){if(r!=null){let o,s=!1;Si(r)?o=r:wo(r)&&(s=!0,r=r[Di]);let a=zr(r);n===0&&t!==null?i==null?kD(e,t,a):Ih(e,t,a,i||null,!0):n===1&&t!==null?Ih(e,t,a,i||null,!0):n===2?iL(e,a,s):n===3&&e.destroyNode(a),o!=null&&LL(e,n,o,t,i)}}function TL(n,e){WD(n,e),e[Di]=null,e[Ar]=null}function DL(n,e,t,r,i,o){r[Di]=i,r[Ar]=e,Hh(n,r,t,1,i,o)}function WD(n,e){e[Ii].changeDetectionScheduler?.notify(9),Hh(n,e,e[Wt],2,null,null)}function SL(n){let e=n[Ku];if(!e)return z0(n[Oe],n);for(;e;){let t=null;if(wo(e))t=e[Ku];else{let r=e[Jn];r&&(t=r)}if(!t){for(;e&&!e[xr]&&e!==n;)wo(e)&&z0(e[Oe],e),e=e[_n];e===null&&(e=n),wo(e)&&z0(e[Oe],e),t=e&&e[xr]}e=t}}function Cy(n,e){let t=n[Pa],r=t.indexOf(e);t.splice(r,1)}function qD(n,e){if(tl(e))return;let t=e[Wt];t.destroyNode&&Hh(n,e,t,3,null,null),SL(e)}function z0(n,e){if(tl(e))return;let t=Ue(null);try{e[we]&=-129,e[we]|=256,e[ur]&&h0(e[ur]),RL(n,e),bL(n,e),e[Oe].type===1&&e[Wt].destroy();let r=e[ps];if(r!==null&&Si(e[_n])){r!==e[_n]&&Cy(r,e);let i=e[Ci];i!==null&&i.detachView(n)}yv(e)}finally{Ue(t)}}function bL(n,e){let t=n.cleanup,r=e[dh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[dh]=null);let i=e[_o];if(i!==null){e[_o]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[fh];if(o!==null){e[fh]=null;for(let s of o)s.destroy()}}function RL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ys)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];rt(4,a,c);try{c.call(a)}finally{rt(5,a,c)}}else{rt(4,i,o);try{o.call(i)}finally{rt(5,i,o)}}}}}function NL(n,e,t){return ML(n,e.parent,t)}function ML(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Di];if(Ua(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===qr.None||i===qr.Emulated)return null}return Kr(r,t)}function OL(n,e,t){return kL(n,e,t)}function PL(n,e,t){return n.type&40?Kr(n,t):null}var kL=PL,UA;function xy(n,e,t,r){let i=NL(n,r,e),o=e[Wt],s=r.parent||e[Ar],a=OL(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)VA(o,i,t[c],a,!1);else VA(o,i,t,a,!1);UA!==void 0&&UA(o,r,e,t,i)}function Gu(n,e){if(e!==null){let t=e.type;if(t&3)return Kr(e,n);if(t&4)return Cv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Gu(n,r);{let i=n[e.index];return Si(i)?Cv(-1,i):zr(i)}}else{if(t&128)return Gu(n,e.next);if(t&32)return Iy(e,n)()||zr(n[e.index]);{let r=KD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ms(n[Hr]);return Gu(i,r)}else return Gu(n,e.next)}}}return null}function KD(n,e){if(e!==null){let r=n[Hr][Ar],i=e.projection;return r.projection[i]}return null}function Cv(n,e){let t=Jn+n+1;if(t<e.length){let r=e[t],i=r[Oe].firstChild;if(i!==null)return Gu(r,i)}return e[gs]}function Ay(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&il(zr(a),r),t.flags|=2),!zD(t))if(c&8)Ay(n,e,t.child,r,i,o,!1),Sa(e,n,i,a,o);else if(c&32){let u=Iy(t,r),l;for(;l=u();)Sa(e,n,i,l,o);Sa(e,n,i,a,o)}else c&16?FL(n,e,r,t,i,o):Sa(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Hh(n,e,t,r,i,o){Ay(t,r,n.firstChild,e,i,o,!1)}function FL(n,e,t,r,i,o){let s=t[Hr],c=s[Ar].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Sa(e,n,i,l,o)}else{let u=c,l=s[_n];mD(r)&&(u.flags|=128),Ay(n,e,u,l,i,o,!0)}}function LL(n,e,t,r,i){let o=t[gs],s=zr(t);o!==s&&Sa(e,n,r,o,i);for(let a=Jn;a<t.length;a++){let c=t[a];Hh(c[Oe],c,n,e,r,o)}}function VL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ai.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ai.Important),n.setStyle(t,r,i,o))}}function Ch(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(zr(o)),Si(o)&&BL(o,r);let s=t.type;if(s&8)Ch(n,e,t.child,r);else if(s&32){let a=Iy(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=KD(e,t);if(Array.isArray(a))r.push(...a);else{let c=ms(e[Hr]);Ch(c[Oe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function BL(n,e){for(let t=Jn;t<n.length;t++){let r=n[t],i=r[Oe].firstChild;i!==null&&Ch(r[Oe],r,i,e)}n[gs]!==n[Di]&&e.push(n[gs])}function XD(n){if(n[ba]!==null){for(let e of n[ba])e.impl.addSequence(e);n[ba].length=0}}var YD=[];function UL(n){return n[ur]??jL(n)}function jL(n){let e=YD.pop()??Object.create($L);return e.lView=n,e}function HL(n){n.lView[ur]!==n&&(n.lView=null,YD.push(n))}var $L=Ae(X({},Vu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{nl(n.lView)},consumerOnSignalRead(){this.lView[ur]=this}});function GL(n){let e=n[ur]??Object.create(zL);return e.lView=n,e}var zL=Ae(X({},Vu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ms(n.lView);for(;e&&!ZD(e[Oe]);)e=ms(e);e&&kT(e)},consumerOnSignalRead(){this.lView[ur]=this}});function ZD(n){return n.type!==2}function QD(n){if(n[fh]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[fh])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[we]&8192)}}var WL=100;function JD(n,e=!0,t=0){let i=n[Ii].rendererFactory,o=!1;o||i.begin?.();try{qL(n,t)}catch(s){throw e&&GD(n,s),s}finally{o||i.end?.()}}function qL(n,e){let t=HT();try{CA(!0),xv(n,e);let r=0;for(;Fh(n);){if(r===WL)throw new re(103,!1);r++,xv(n,1)}}finally{CA(t)}}function KL(n,e,t,r){if(tl(e))return;let i=e[we],o=!1,s=!1;ey(e);let a=!0,c=null,u=null;o||(ZD(n)?(u=UL(e),c=Ef(u)):Ax()===null?(a=!1,u=GL(e),c=Ef(u)):e[ur]&&(h0(e[ur]),e[ur]=null));try{PT(e),jF(n.bindingStartIndex),t!==null&&UD(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let p=n.preOrderCheckHooks;p!==null&&eh(e,p,null)}else{let p=n.preOrderHooks;p!==null&&th(e,p,0,null),H0(e,0)}if(s||XL(e),QD(e),eS(e,0),n.contentQueries!==null&&DD(n,e),!o)if(l){let p=n.contentCheckHooks;p!==null&&eh(e,p)}else{let p=n.contentHooks;p!==null&&th(e,p,1),H0(e,1)}ZL(n,e);let f=n.components;f!==null&&nS(e,f,0);let h=n.viewQuery;if(h!==null&&Ev(2,h,r),!o)if(l){let p=n.viewCheckHooks;p!==null&&eh(e,p)}else{let p=n.viewHooks;p!==null&&th(e,p,2),H0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[j0]){for(let p of e[j0])p();e[j0]=null}o||(XD(e),e[we]&=-73)}catch(l){throw o||nl(e),l}finally{u!==null&&(d0(u,c),a&&HL(u)),ty()}}function eS(n,e){for(let t=_D(n);t!==null;t=wD(t))for(let r=Jn;r<t.length;r++){let i=t[r];tS(i,e)}}function XL(n){for(let e=_D(n);e!==null;e=wD(e)){if(!(e[we]&2))continue;let t=e[Pa];for(let r=0;r<t.length;r++){let i=t[r];kT(i)}}}function YL(n,e,t){rt(18);let r=Wr(e,n);tS(r,t),rt(19,r[Gn])}function tS(n,e){Qv(n)&&xv(n,e)}function xv(n,e){let r=n[Oe],i=n[we],o=n[ur],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&f0(o)),s||=!1,o&&(o.dirty=!1),n[we]&=-9217,s)KL(r,n,r.template,n[Gn]);else if(i&8192){QD(n),eS(n,1);let a=r.components;a!==null&&nS(n,a,1),XD(n)}}function nS(n,e,t){for(let r=0;r<e.length;r++)YL(n,e[r],t)}function ZL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)vs(~i);else{let o=i,s=t[++r],a=t[++r];GF(s,o);let c=e[o];rt(24,c),a(2,c),rt(25,c)}}}finally{vs(-1)}}function Ty(n,e){let t=HT()?64:1088;for(n[Ii].changeDetectionScheduler?.notify(e);n;){n[we]|=t;let r=ms(n);if(ph(n)&&!r)return n;n=r}return null}function rS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function QL(n,e,t,r=!0){let i=e[Oe];if(JL(i,e,n,t),r){let s=Cv(t,n),a=e[Wt],c=a.parentNode(n[gs]);c!==null&&DL(i,n[Ar],a,e,c,s)}let o=e[lh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Av(n,e){if(n.length<=Jn)return;let t=Jn+e,r=n[t];if(r){let i=r[ps];i!==null&&i!==n&&Cy(i,r),e>0&&(n[t-1][xr]=r[xr]);let o=ch(n,Jn+e);TL(r[Oe],r);let s=o[Ci];s!==null&&s.detachView(o[Oe]),r[_n]=null,r[xr]=null,r[we]&=-129}return r}function JL(n,e,t,r){let i=Jn+r,o=t.length;r>0&&(t[i-1][xr]=e),r<o-Jn?(e[xr]=t[i],mT(t,Jn+r,e)):(t.push(e),e[xr]=null),e[_n]=t;let s=e[ps];s!==null&&t!==s&&iS(s,e);let a=e[Ci];a!==null&&a.insertView(n),sv(e),e[we]|=128}function iS(n,e){let t=n[Pa],r=e[_n];if(wo(r))n[we]|=2;else{let i=r[_n][Hr];e[Hr]!==i&&(n[we]|=2)}t===null?n[Pa]=[e]:t.push(e)}var Zu=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Oe];return Ch(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Gn]}set context(e){this._lView[Gn]=e}get destroyed(){return tl(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[_n];if(Si(e)){let t=e[hh],r=t?t.indexOf(this):-1;r>-1&&(Av(e,r),ch(t,r))}this._attachedToViewContainer=!1}qD(this._lView[Oe],this._lView)}onDestroy(e){FT(this._lView,e)}markForCheck(){Ty(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[we]&=-129}reattach(){sv(this._lView),this._lView[we]|=128}detectChanges(){this._lView[we]|=1024,JD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ph(this._lView),t=this._lView[ps];t!==null&&!e&&Cy(t,this._lView),WD(this._lView[Oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let t=ph(this._lView),r=this._lView[ps];r!==null&&!t&&iS(r,this._lView),sv(this._lView)}};var ws=(()=>{class n{static __NG_ELEMENT_ID__=n8}return n})(),e8=ws,t8=class extends e8{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=xL(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Zu(i)}};function n8(){return $h(qn(),it())}function $h(n,e){return n.type&4?new t8(e,n,Ga(n,e)):null}function Dy(n,e,t,r,i){let o=n.data[e];if(o===null)o=r8(n,e,t,r,i),$F()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=VF();o.injectorIndex=s===null?-1:s.injectorIndex}return rl(o,!0),o}function r8(n,e,t,r,i){let o=UT(),s=jT(),a=s?o:o&&o.parent,c=n.data[e]=o8(n,a,t,e,r,i);return i8(n,c,o,s),c}function i8(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function o8(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return kF()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Bie=new RegExp(`^(\\d+)*(${M4}|${N4})*(.*)`);var s8=()=>null;function jA(n,e){return s8(n,e)}var a8=class{},oS=class{},Tv=class{resolveComponentFactory(e){throw Error(`No component factory found for ${$n(e)}.`)}},Gh=class{static NULL=new Tv},ka=class{},Ri=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>c8()}return n})();function c8(){let n=it(),e=qn(),t=Wr(e.index,n);return(wo(t)?t:n)[Wt]}var u8=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>null})}return n})();function HA(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=pA(i,a);else if(o==2){let c=a,u=e[++s];r=pA(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ge(n,e=be.Default){let t=it();if(t===null)return ie(n,e);let r=qn();return oD(r,t,Mn(n),e)}function sS(){let n="invalid";throw new Error(n)}function aS(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,u=null,l=d8(s);l===null?a=s:[a,c,u]=l,p8(n,e,t,a,o,c,u)}o!==null&&r!==null&&l8(t,r,o)}function l8(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new re(-301,!1);r.push(e[i],o)}}function d8(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Gr(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,f8(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function f8(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function h8(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function p8(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let h=0;h<a;h++){let p=r[h];!c&&Gr(p)&&(c=!0,h8(n,t,h)),dv(yh(t,e),n,p.type)}w8(t,n.data.length,a);for(let h=0;h<a;h++){let p=r[h];p.providersResolver&&p.providersResolver(p)}let u=!1,l=!1,f=VD(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let p=r[h];if(t.mergedAttrs=Xu(t.mergedAttrs,p.hostAttrs),m8(n,t,e,f,p),_8(f,p,i),s!==null&&s.has(p)){let[y,_]=s.get(p);t.directiveToIndex.set(p.type,[f,y+t.directiveStart,_+t.directiveStart])}else(o===null||!o.has(p))&&t.directiveToIndex.set(p.type,f);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let m=p.type.prototype;!u&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!l&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),l=!0),f++}g8(n,t,o)}function g8(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))$A(0,e,i,r),$A(1,e,i,r),zA(e,r,!1);else{let o=t.get(i);GA(0,e,o,r),GA(1,e,o,r),zA(e,r,!0)}}}function $A(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),cS(e,o)}}function GA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),cS(e,s)}}function cS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function zA(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||gy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let l of u)if(l===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let l=0;l<u.length;l+=2)if(u[l]===e){s??=[],s.push(u[l+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function m8(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Na(i.type,!0)),s=new ys(o,Gr(i),ge);n.blueprint[r]=s,t[r]=s,v8(n,e,r,VD(n,t,i.hostVars,Ka),i)}function v8(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;y8(s)!=a&&s.push(a),s.push(t,r,o)}}function y8(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function _8(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Gr(e)&&(t[""]=n)}}function w8(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function uS(n,e,t,r,i,o,s,a){let c=e.consts,u=gh(c,s),l=Dy(e,n,2,r,u);return o&&aS(e,t,l,gh(c,a),i),l.mergedAttrs=Xu(l.mergedAttrs,l.attrs),l.attrs!==null&&HA(l,l.attrs,!1),l.mergedAttrs!==null&&HA(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function lS(n,e){YT(n,e),DT(e)&&n.queries.elementEnd(e)}var xh=class extends Gh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=hs(e);return new Fa(t,this.ngModule)}};function E8(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&jh.SignalBased)!==0};return i&&(o.transform=i),o})}function I8(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function C8(n,e,t){let r=e instanceof an?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new uv(t,r):t}function x8(n){let e=n.get(ka,null);if(e===null)throw new re(407,!1);let t=n.get(u8,null),r=n.get(_s,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function A8(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return PD(e,t,t==="svg"?xF:t==="math"?AF:null)}var Fa=class extends oS{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=E8(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=I8(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=eL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){rt(22);let o=Ue(null);try{let s=this.componentDef,a=r?["ng-version","19.2.2"]:tL(this.componentDef.selectors[0]),c=my(0,null,null,1,0,null,null,null,null,[a],null),u=C8(s,i||this.ngModule,e),l=x8(u),f=l.rendererFactory.createRenderer(null,s),h=r?lL(f,r,s.encapsulation,u):A8(s,f),p=vy(null,c,null,512|LD(s),null,null,l,f,u,null,TD(h,u,!0));p[$r]=h,ey(p);let m=null;try{let y=uS($r,c,p,"#host",()=>[this.componentDef],!0,0);h&&(FD(f,h,y),il(h,p)),_y(c,p,y),SD(c,y,p),lS(c,y),t!==void 0&&T8(y,this.ngContentSelectors,t),m=Wr(y.index,p),p[Gn]=m[Gn],Ey(c,p,null)}catch(y){throw m!==null&&yv(m),yv(p),y}finally{rt(23),ty()}return new Dv(this.componentType,p)}finally{Ue(o)}}},Dv=class extends a8{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=OT(t[Oe],$r),this.location=Ga(this._tNode,t),this.instance=Wr(this._tNode.index,t)[Gn],this.hostView=this.changeDetectorRef=new Zu(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=wy(r,i[Oe],i,e,t);this.previousInputValues.set(e,t);let s=Wr(r.index,i);Ty(s,1)}get injector(){return new ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function T8(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Co=(()=>{class n{static __NG_ELEMENT_ID__=D8}return n})();function D8(){let n=qn();return fS(n,it())}var S8=Co,dS=class extends S8{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ga(this._hostTNode,this._hostLView)}get injector(){return new ds(this._hostTNode,this._hostLView)}get parentInjector(){let e=oy(this._hostTNode,this._hostLView);if(JT(e)){let t=vh(e,this._hostLView),r=mh(e),i=t[Oe].data[r+8];return new ds(i,t)}else return new ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=WA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Jn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=jA(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,BA(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!wF(e),a;if(s)a=t;else{let m=t||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?e:new Fa(hs(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let y=(s?u:this.parentInjector).get(an,null);y&&(o=y)}let l=hs(c.componentType??{}),f=jA(this._lContainer,l?.id??null),h=f?.firstChild??null,p=c.create(u,i,h,o);return this.insertImpl(p.hostView,a,BA(this._hostTNode,f)),p}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(SF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[_n],u=new dS(c,c[Ar],c[_n]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return QL(s,i,o,r),e.attachToViewContainerRef(),mT(W0(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=WA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Av(this._lContainer,t);r&&(ch(W0(this._lContainer),t),qD(r[Oe],r))}detach(e){let t=this._adjustIndex(e,-1),r=Av(this._lContainer,t);return r&&ch(W0(this._lContainer),t)!=null?new Zu(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function WA(n){return n[hh]}function W0(n){return n[hh]||(n[hh]=[])}function fS(n,e){let t,r=e[n.index];return Si(r)?t=r:(t=rS(r,e,null,n),e[n.index]=t,yy(e,t)),R8(t,e,n,r),new dS(t,n,e)}function b8(n,e){let t=n[Wt],r=t.createComment(""),i=Kr(e,n),o=t.parentNode(i);return Ih(t,o,r,t.nextSibling(i),!1),r}var R8=O8,N8=()=>!1;function M8(n,e,t){return N8(n,e,t)}function O8(n,e,t,r){if(n[gs])return;let i;t.type&8?i=zr(r):i=b8(e,t),n[gs]=i}var Sv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},bv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Sy(e,t).matches!==null&&this.queries[t].setDirty()}},Rv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=j8(e):this.predicate=e}},Nv=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Mv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,P8(t,o)),this.matchTNodeWithReadOption(e,t,nh(t,e,o,!1,!1))}else r===ws?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,nh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===tr||i===Co||i===ws&&t.type&4)this.addMatch(t.index,-2);else{let o=nh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function P8(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function k8(n,e){return n.type&11?Ga(n,e):n.type&4?$h(n,e):null}function F8(n,e,t,r){return t===-1?k8(e,n):t===-2?L8(n,e,r):Yu(n,n[Oe],t,e)}function L8(n,e,t){if(t===tr)return Ga(e,n);if(t===ws)return $h(e,n);if(t===Co)return fS(e,n)}function hS(n,e,t,r){let i=e[Ci].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=o[u];a.push(F8(e,l,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Ov(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=hS(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],l=e[-c];for(let f=Jn;f<l.length;f++){let h=l[f];h[ps]===h[_n]&&Ov(h[Oe],h,u,r)}if(l[Pa]!==null){let f=l[Pa];for(let h=0;h<f.length;h++){let p=f[h];Ov(p[Oe],p,u,r)}}}}}return r}function V8(n,e){return n[Ci].queries[e].queryList}function B8(n,e,t){let r=new vv((t&4)===4);return NF(n,e,r,r.destroy),(e[Ci]??=new bv).queries.push(new Sv(r))-1}function U8(n,e,t){let r=On();return r.firstCreatePass&&(H8(r,new Rv(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),B8(r,it(),e)}function j8(n){return n.split(",").map(e=>e.trim())}function H8(n,e,t){n.queries===null&&(n.queries=new Nv),n.queries.track(new Mv(e,t))}function Sy(n,e){return n.queries.getByIndex(e)}function $8(n,e){let t=n[Oe],r=Sy(t,e);return r.crossesNgTemplate?Ov(t,n,e,[]):hS(t,n,r,e)}var La=class{},by=class{};var Pv=class extends La{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new xh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=_T(e);this._bootstrapComponents=MD(o.bootstrap),this._r3Injector=cD(e,t,[{provide:La,useValue:this},{provide:Gh,useValue:this.componentFactoryResolver},...r],$n(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kv=class extends by{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Pv(this.moduleType,e,[])}};var Ah=class extends La{injector;componentFactoryResolver=new xh(this);instance=null;constructor(e){super();let t=new Wu([...e.providers,{provide:La,useValue:this},{provide:Gh,useValue:this.componentFactoryResolver}],e.parent||Yv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function zh(n,e,t=null){return new Ah({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var G8=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=wT(!1,t.type),i=r.length>0?zh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ne({token:n,providedIn:"environment",factory:()=>new n(ie(an))})}return n})();function Ft(n){return Ju(()=>{let e=pS(n),t=Ae(X({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(G8).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qr.Emulated,styles:n.styles||cr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ol("NgStandalone"),gS(t);let r=n.dependencies;return t.directiveDefs=qA(r,!1),t.pipeDefs=qA(r,!0),t.id=X8(t),t})}function z8(n){return hs(n)||cF(n)}function W8(n){return n!==null}function nr(n){return Ju(()=>({type:n.type,bootstrap:n.bootstrap||cr,declarations:n.declarations||cr,imports:n.imports||cr,exports:n.exports||cr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function q8(n,e){if(n==null)return fs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=jh.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function K8(n){if(n==null)return fs;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function cn(n){return Ju(()=>{let e=pS(n);return gS(e),e})}function pS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||fs,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||cr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:q8(n.inputs,e),outputs:K8(n.outputs),debugInfo:null}}function gS(n){n.features?.forEach(e=>e(n))}function qA(n,e){if(!n)return null;let t=e?uF:z8;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(W8)}function X8(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Y8(n){return Object.getPrototypeOf(n.prototype).constructor}function Ni(n){let e=Y8(n.type),t=!0,r=[n];for(;e;){let i;if(Gr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=q0(n.inputs),s.declaredInputs=q0(n.declaredInputs),s.outputs=q0(n.outputs);let a=i.hostBindings;a&&tV(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&J8(n,c),u&&eV(n,u),Z8(n,i),B3(n.outputs,i.outputs),Gr(i)&&i.data.animation){let l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Ni&&(t=!1)}}e=Object.getPrototypeOf(e)}Q8(r)}function Z8(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Q8(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xu(i.hostAttrs,t=Xu(t,i.hostAttrs))}}function q0(n){return n===fs?{}:n===cr?[]:n}function J8(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function eV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function tV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function mS(n){return rV(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function nV(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function rV(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function al(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function iV(n,e,t,r,i,o,s,a,c){let u=e.consts,l=Dy(e,n,4,s||null,a||null);BT()&&aS(e,t,l,gh(u,c),$D),l.mergedAttrs=Xu(l.mergedAttrs,l.attrs),YT(e,l);let f=l.tView=my(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),f.queries=e.queries.embeddedTView(l)),l}function oV(n,e,t,r,i,o,s,a,c,u){let l=t+$r,f=e.firstCreatePass?iV(l,e,n,r,i,o,s,a,c):e.data[l];rl(f,!1);let h=sV(e,n,f,t);ry()&&xy(e,n,h,f),il(h,n);let p=rS(h,n,h,f);return n[l]=p,yy(n,p),M8(p,f,n),Zv(f)&&_y(e,n,f),c!=null&&jD(n,f,u),f}function qt(n,e,t,r,i,o,s,a){let c=it(),u=On(),l=gh(u.consts,o);return oV(c,u,n,e,t,r,i,l,s,a),qt}var sV=aV;function aV(n,e,t,r){return iy(!0),e[Wt].createComment("")}var Ry=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var vS=new J("");var cV=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new Fv})}return n})(),Fv=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Is(n){return!!n&&typeof n.then=="function"}function yS(n){return!!n&&typeof n.subscribe=="function"}var Xa=new J("");var _S=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=H(Xa,{optional:!0})??[];injector=H(_t);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Zt(this.injector,i);if(Is(o))t.push(o);else if(yS(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cl=new J("");function uV(){kx(()=>{throw new re(600,!1)})}function lV(n){return n.isBoundToModule}var dV=10;var lr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=H(_4);afterRenderManager=H(AD);zonelessEnabled=H(Vh);rootEffectScheduler=H(cV);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new pt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=H(Xr).hasPendingTasks.pipe(ue(t=>!t));constructor(){H(Wa,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=H(an);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){rt(10);let i=t instanceof oS;if(!this._injector.get(_S).done){let h="";throw new re(405,h)}let s;i?s=t:s=this._injector.get(Gh).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=lV(s)?void 0:this._injector.get(La),c=r||s.selector,u=s.create(_t.NULL,[],c,a),l=u.location.nativeElement,f=u.injector.get(vS,null);return f?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),rh(this.components,u),f?.unregisterApplication(l)}),this._loadComponent(u),rt(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){rt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(fy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new re(101,!1);let t=Ue(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ue(t),this.afterTick.next(),rt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ka,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<dV;)rt(14),this.synchronizeOnce(),rt(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)fV(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Fh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;rh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(cl,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>rh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new re(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fV(n,e,t,r){if(!t&&!Fh(n))return;JD(n,e,t&&!r?0:1)}function xo(n,e,t,r){let i=it(),o=Lh();if(al(i,o,e)){let s=On(),a=ny();yL(a,i,n,e,t,r)}return xo}function hV(n,e,t,r){return al(n,Lh(),t)?e+Nh(t)+r:Ka}function Qf(n,e){return n<<17|e<<2}function Es(n){return n>>17&32767}function pV(n){return(n&2)==2}function gV(n,e){return n&131071|e<<17}function Lv(n){return n|2}function Va(n){return(n&131068)>>2}function K0(n,e){return n&-131069|e<<2}function mV(n){return(n&1)===1}function Vv(n){return n|1}function vV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Es(s),c=Va(s);n[r]=t;let u=!1,l;if(Array.isArray(t)){let f=t;l=f[1],(l===null||el(f,l)>0)&&(u=!0)}else l=t;if(i)if(c!==0){let h=Es(n[a+1]);n[r+1]=Qf(h,a),h!==0&&(n[h+1]=K0(n[h+1],r)),n[a+1]=gV(n[a+1],r)}else n[r+1]=Qf(a,0),a!==0&&(n[a+1]=K0(n[a+1],r)),a=r;else n[r+1]=Qf(c,0),a===0?a=r:n[c+1]=K0(n[c+1],r),c=r;u&&(n[r+1]=Lv(n[r+1])),KA(n,l,r,!0),KA(n,l,r,!1),yV(e,l,n,r,o),s=Qf(a,c),o?e.classBindings=s:e.styleBindings=s}function yV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&el(o,e)>=0&&(t[r+1]=Vv(t[r+1]))}function KA(n,e,t,r){let i=n[t+1],o=e===null,s=r?Es(i):Va(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];_V(c,e)&&(a=!0,n[s+1]=r?Vv(u):Lv(u)),s=r?Es(u):Va(u)}a&&(n[t+1]=r?Lv(i):Vv(i))}function _V(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?el(n,e)>=0:!1}function Fe(n,e,t){let r=it(),i=Lh();if(al(r,i,e)){let o=On(),s=ny();HD(o,s,r,n,e,r[Wt],t,!1)}return Fe}function XA(n,e,t,r,i){wy(e,n,t,i?"class":"style",r)}function Wh(n,e,t){return wS(n,e,t,!1),Wh}function Ny(n,e){return wS(n,e,null,!0),Ny}function wS(n,e,t,r){let i=it(),o=On(),s=HF(2);if(o.firstUpdatePass&&EV(o,n,s,r),e!==Ka&&al(i,s,e)){let a=o.data[Ha()];TV(o,a,i,i[Wt],n,i[s+1]=DV(e,t),r,s)}}function wV(n,e){return e>=n.expandoStartIndex}function EV(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ha()],s=wV(n,t);SV(o,r)&&e===null&&!s&&(e=!1),e=IV(i,o,e,r),vV(i,o,e,t,s,r)}}function IV(n,e,t,r){let i=WF(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=X0(null,n,e,t,r),t=Qu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=X0(i,n,e,t,r),o===null){let c=CV(n,e,r);c!==void 0&&Array.isArray(c)&&(c=X0(null,n,e,c[1],r),c=Qu(c,e.attrs,r),xV(n,e,r,c))}else o=AV(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function CV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Va(r)!==0)return n[Es(r)]}function xV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Es(i)]=r}function AV(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Qu(r,s,t)}return Qu(r,e.attrs,t)}function X0(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Qu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Qu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),sF(n,s,t?!0:e[++o]))}return n===void 0?null:n}function TV(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],l=mV(u)?YA(c,e,t,i,Va(u),s):void 0;if(!Th(l)){Th(o)||pV(u)&&(o=YA(c,null,t,i,a,s));let f=MT(Ha(),t);VL(r,s,f,i,o)}}function YA(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),l=u?c[1]:c,f=l===null,h=t[i+1];h===Ka&&(h=f?cr:void 0);let p=f?B0(h,r):l===r?h:void 0;if(u&&!Th(p)&&(p=B0(c,r)),Th(p)&&(a=p,s))return a;let m=n[i+1];i=s?Es(m):Va(m)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=B0(c,r))}return a}function Th(n){return n!==void 0}function DV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=$n(sl(n)))),n}function SV(n,e){return(n.flags&(e?8:16))!==0}function B(n,e,t,r){let i=it(),o=On(),s=$r+n,a=i[Wt],c=o.firstCreatePass?uS(s,o,i,e,$D,BT(),t,r):o.data[s],u=bV(o,i,c,a,e,n);i[s]=u;let l=Zv(c);return rl(c,!0),FD(a,u,c),!zD(c)&&ry()&&xy(o,i,u,c),(MF()===0||l)&&il(u,i),OF(),l&&(_y(o,i,c),SD(o,c,i)),r!==null&&jD(i,c),B}function j(){let n=qn();jT()?BF():(n=n.parent,rl(n,!1));let e=n;FF(e)&&LF(),PF();let t=On();return t.firstCreatePass&&lS(t,e),e.classesWithoutHost!=null&&QF(e)&&XA(t,e,it(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&JF(e)&&XA(t,e,it(),e.stylesWithoutHost,!1),j}function De(n,e,t,r){return B(n,e,t,r),j(),De}var bV=(n,e,t,r,i,o)=>(iy(!0),PD(r,i,XF()));function Tr(){return it()}var Dh="en-US";var RV=Dh;function NV(n){typeof n=="string"&&(RV=n.toLowerCase().replace(/_/g,"-"))}var MV=(n,e,t)=>{};function Ye(n,e,t,r){let i=it(),o=On(),s=qn();return ES(o,i,i[Wt],s,n,e,r),Ye}function OV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[dh],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function ES(n,e,t,r,i,o,s){let a=Zv(r),u=n.firstCreatePass?VT(n):null,l=e[Gn],f=LT(e),h=!0;if(r.type&3||s){let p=Kr(r,e),m=s?s(p):p,y=f.length,_=s?x=>s(zr(x[r.index])):r.index,C=null;if(!s&&a&&(C=OV(n,e,i,r.index)),C!==null){let x=C.__ngLastListenerFn__||C;x.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,h=!1}else{o=JA(r,e,l,o),MV(m,i,o);let x=t.listen(m,i,o);f.push(o,x),u&&u.push(i,_,y,y+1)}}else o=JA(r,e,l,o);if(h){let p=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let y=0;y<m.length;y+=2){let _=m[y],C=m[y+1];ZA(r,n,e,_,C,i,o,f,u)}if(p&&p.length)for(let y of p)ZA(r,n,e,y,i,i,o,f,u)}}function ZA(n,e,t,r,i,o,s,a,c){let u=t[r],f=e.data[r].outputs[i],p=u[f].subscribe(s),m=a.length;a.push(s,p),c&&c.push(o,n.index,m,-(m+1))}function QA(n,e,t,r){let i=Ue(null);try{return rt(6,e,t),t(r)!==!1}catch(o){return GD(n,o),!1}finally{rt(7,e,t),Ue(i)}}function JA(n,e,t,r){return function i(o){if(o===Function)return r;let s=Ua(n)?Wr(n.index,e):e;Ty(s,5);let a=QA(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=QA(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Dt(n=1){return KF(n)}function IS(n,e,t){U8(n,e,t)}function My(n){let e=it(),t=On(),r=$T();Jv(r+1);let i=Sy(t,r);if(n.dirty&&DF(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=$8(e,r);n.reset(o,I4),n.notifyOnChanges()}return!0}return!1}function Oy(){return V8(it(),$T())}function ul(n){let e=UF();return TF(e,$r+n)}function z(n,e=""){let t=it(),r=On(),i=n+$r,o=r.firstCreatePass?Dy(r,i,1,e,null):r.data[i],s=PV(r,t,o,e,n);t[i]=s,ry()&&xy(r,t,s,o),rl(o,!1)}var PV=(n,e,t,r,i)=>(iy(!0),nL(e[Wt],r));function qh(n){return In("",n,""),qh}function In(n,e,t){let r=it(),i=hV(r,n,e,t);return i!==Ka&&kV(r,Ha(),i),In}function kV(n,e,t){let r=MT(e,n);rL(n[Wt],r,t)}function dr(n,e,t){gD(e)&&(e=e());let r=it(),i=Lh();if(al(r,i,e)){let o=On(),s=ny();HD(o,s,r,n,e,r[Wt],t,!1)}return dr}function Dr(n,e){let t=gD(n);return t&&n.set(e),t}function fr(n,e){let t=it(),r=On(),i=qn();return ES(r,t,t[Wt],i,n,e),fr}function FV(n,e,t){let r=On();if(r.firstCreatePass){let i=Gr(n);Bv(t,r.data,r.blueprint,i,!0),Bv(e,r.data,r.blueprint,i,!1)}}function Bv(n,e,t,r,i){if(n=Mn(n),Array.isArray(n))for(let o=0;o<n.length;o++)Bv(n[o],e,t,r,i);else{let o=On(),s=it(),a=qn(),c=Oa(n)?n:Mn(n.provide),u=CT(n),l=a.providerIndexes&1048575,f=a.directiveStart,h=a.providerIndexes>>20;if(Oa(n)||!n.multi){let p=new ys(u,i,ge),m=Z0(c,e,i?l:l+h,f);m===-1?(dv(yh(a,s),o,c),Y0(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[m]=p,s[m]=p)}else{let p=Z0(c,e,l+h,f),m=Z0(c,e,l,l+h),y=p>=0&&t[p],_=m>=0&&t[m];if(i&&!_||!i&&!y){dv(yh(a,s),o,c);let C=BV(i?VV:LV,t.length,i,r,u);!i&&_&&(t[m].providerFactory=C),Y0(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(C),s.push(C)}else{let C=CS(t[i?m:p],u,!i&&r);Y0(o,n,p>-1?p:m,C)}!i&&r&&_&&t[m].componentProviders++}}}function Y0(n,e,t,r){let i=Oa(e),o=pF(e);if(i||o){let c=(o?Mn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(t);l===-1?u.push(t,[r,c]):u[l+1].push(r,c)}else u.push(t,c)}}}function CS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Z0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function LV(n,e,t,r){return Uv(this.multi,[])}function VV(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Yu(t,t[Oe],this.providerFactory.index,r);o=a.slice(0,s),Uv(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Uv(i,o);return o}function Uv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function BV(n,e,t,r,i){let o=new ys(n,t,ge);return o.multi=[],o.index=e,o.componentProviders=0,CS(o,i,r&&!t),o}function Ya(n,e=[]){return t=>{t.providersResolver=(r,i)=>FV(r,i?i(n):n,e)}}function ll(n,e){return $h(n,e)}var Ti=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},xS=new Ti("19.2.2"),jv=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Kh=(()=>{class n{compileModuleSync(t){return new kv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=_T(t),o=MD(i.declarations).reduce((s,a)=>{let c=hs(a);return c&&s.push(new Fa(c)),s},[]);return new jv(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var UV=(()=>{class n{zone=H($e);changeDetectionScheduler=H(_s);applicationRef=H(lr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jV=new J("",{factory:()=>!1});function AS({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new $e(Ae(X({},DS()),{scheduleInRootZone:t})),[{provide:$e,useFactory:n},{provide:Ma,multi:!0,useFactory:()=>{let r=H(UV,{optional:!0});return()=>r.initialize()}},{provide:Ma,multi:!0,useFactory:()=>{let r=H(HV);return()=>{r.initialize()}}},e===!0?{provide:lD,useValue:!0}:[],{provide:dD,useValue:t??uD}]}function TS(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=AS({ngZoneFactory:()=>{let i=DS(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&ol("NgZone_CoalesceEvent"),new $e(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Wn([{provide:jV,useValue:!0},{provide:Vh,useValue:!1},r])}function DS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var HV=(()=>{class n{subscription=new Tt;initialized=!1;zone=H($e);pendingTasks=H(Xr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$e.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $V=(()=>{class n{appRef=H(lr);taskService=H(Xr);ngZone=H($e);zonelessEnabled=H(Vh);tracing=H(Wa,{optional:!0});disableScheduling=H(lD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Tt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(wh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(dD,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof mv||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?RA:fD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(wh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,RA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GV(){return typeof $localize<"u"&&$localize.locale||Dh}var Py=new J("",{providedIn:"root",factory:()=>H(Py,be.Optional|be.SkipSelf)||GV()});var Hv=new J(""),zV=new J("");function Hu(n){return!n.moduleRef}function WV(n){let e=Hu(n)?n.r3Injector:n.moduleRef.injector,t=e.get($e);return t.run(()=>{Hu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(xi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Hu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Hv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Hv);s.add(o),n.moduleRef.onDestroy(()=>{rh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return KV(r,t,()=>{let o=e.get(_S);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Py,Dh);if(NV(s||Dh),!e.get(zV,!0))return Hu(n)?e.get(lr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Hu(n)){let c=e.get(lr);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return qV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function qV(n,e){let t=n.injector.get(lr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new re(-403,!1);e.push(n)}function KV(n,e,t){try{let r=t();return Is(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var ih=null;function XV(n=[],e){return _t.create({name:e,providers:[{provide:Oh,useValue:"platform"},{provide:Hv,useValue:new Set([()=>ih=null])},...n]})}function YV(n=[]){if(ih)return ih;let e=XV(n);return ih=e,uV(),ZV(e),e}function ZV(n){let e=n.get(ly,null);Zt(n,()=>{e?.forEach(t=>t())})}function dl(){return!1}var Cs=(()=>{class n{static __NG_ELEMENT_ID__=QV}return n})();function QV(n){return JV(qn(),it(),(n&16)===16)}function JV(n,e,t){if(Ua(n)&&!t){let r=Wr(n.index,e);return new Zu(r,r)}else if(n.type&175){let r=e[Hr];return new Zu(r,e)}return null}var $v=class{constructor(){}supports(e){return mS(e)}create(e){return new Gv(e)}},e6=(n,e)=>e,Gv=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||e6}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<eT(r,i,o)?t:r,a=eT(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let p=h<o.length?o[h]:o[h]=0,m=p+h;l<=m&&m<u&&(o[h]=p+1)}let f=s.previousIndex;o[f]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!mS(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,nV(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new zv(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Sh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Sh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Wv=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Sh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Wv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function eT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function tT(){return new ky([new $v])}var ky=(()=>{class n{factories;static \u0275prov=ne({token:n,providedIn:"root",factory:tT});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||tT()),deps:[[n,new nF,new zn]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new re(901,!1)}}return n})();function SS(n){rt(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=YV(r),o=[AS({}),{provide:_s,useExisting:$V},...t||[]],s=new Ah({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return WV({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{rt(9)}}function xs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Mi(n){let e=Ue(null);try{return n()}finally{Ue(e)}}function Za(n,e){let t=Mx(n);return e?.equal&&(t[Zn].equal=e.equal),t}var nT=class{[Zn];constructor(e){this[Zn]=e}destroy(){this[Zn].destroy()}};function bS(n){let e=hs(n);if(!e)return null;let t=new Fa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var PS=null;function Pi(){return PS}function kS(n){PS??=n}var Xh=class{};var Cn=new J(""),By=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>H(t6),providedIn:"platform"})}return n})(),FS=new J(""),t6=(()=>{class n extends By{_location;_history;_doc=H(Cn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pi().getBaseHref(this._doc)}onPopState(t){let r=Pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Uy(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function RS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Oi(n){return n&&n[0]!=="?"?`?${n}`:n}var Yr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>H(jy),providedIn:"root"})}return n})(),LS=new J(""),jy=(()=>{class n extends Yr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??H(Cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Uy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Oi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Oi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Oi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ie(By),ie(LS,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hy=(()=>{class n extends Yr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Uy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Oi(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Oi(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ie(By),ie(LS,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),Ja=(()=>{class n{_subject=new pt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=i6(RS(NS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Oi(r))}normalize(t){return n.stripTrailingSlash(r6(this._basePath,NS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Oi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Oi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Oi;static joinWithSlash=Uy;static stripTrailingSlash=RS;static \u0275fac=function(r){return new(r||n)(ie(Yr))};static \u0275prov=ne({token:n,factory:()=>n6(),providedIn:"root"})}return n})();function n6(){return new Ja(ie(Yr))}function r6(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function NS(n){return n.replace(/\/index.html$/,"")}function i6(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Yh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Fy=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ec=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Fy(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),MS(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);MS(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ge(Co),ge(ws),ge(ky))};static \u0275dir=cn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function MS(n,e){n.context.$implicit=e.item}var Zr=(()=>{class n{_viewContainer;_context=new Ly;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){OS(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){OS(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ge(Co),ge(ws))};static \u0275dir=cn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Ly=class{$implicit=null;ngIf=null};function OS(n,e){if(n&&!n.createEmbeddedView)throw new re(2020,!1)}var ln=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=nr({type:n});static \u0275inj=er({})}return n})(),VS="browser",o6="server";function $y(n){return n===o6}var BS=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new Vy(H(Cn),window)})}return n})(),Vy=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=s6(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function s6(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Qa=class{};var hl=class{},Qh=class{},Ts=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var zy=class{encodeKey(e){return US(e)}encodeValue(e){return US(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function a6(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var c6=/%(\d[a-f0-9])/gi,u6={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function US(n){return encodeURIComponent(n).replace(c6,(e,t)=>u6[t]??e)}function Zh(n){return`${n}`}var Ao=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new zy,e.fromString){if(e.fromObject)throw new re(2805,!1);this.map=a6(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Zh):[Zh(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Zh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Zh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Wy=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function l6(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function jS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function HS(n){return typeof Blob<"u"&&n instanceof Blob}function $S(n){return typeof FormData<"u"&&n instanceof FormData}function d6(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var GS="Content-Type",zS="Accept",XS="X-Request-URL",YS="text/plain",ZS="application/json",f6=`${ZS}, ${YS}, */*`,fl=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(l6(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ts,this.context??=new Wy,!this.params)this.params=new Ao,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||jS(this.body)||HS(this.body)||$S(this.body)||d6(this.body)?this.body:this.body instanceof Ao?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||$S(this.body)?null:HS(this.body)?this.body.type||null:jS(this.body)?null:typeof this.body=="string"?YS:this.body instanceof Ao?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?ZS:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,l=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),l)),new n(t,r,s,{params:l,headers:u,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},tc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(tc||{}),pl=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Ts,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},qy=class n extends pl{constructor(e={}){super(e)}type=tc.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Jh=class n extends pl{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=tc.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ep=class extends pl{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},h6=200,p6=204;function Gy(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Ky=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof fl)o=t;else{let c;i.headers instanceof Ts?c=i.headers:c=new Ts(i.headers);let u;i.params&&(i.params instanceof Ao?u=i.params:u=new Ao({fromObject:i.params})),o=new fl(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=ae(o).pipe(wi(c=>this.handler.handle(c)));if(t instanceof fl||i.observe==="events")return s;let a=s.pipe($t(c=>c instanceof Jh));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ue(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new re(2806,!1);return c.body}));case"blob":return a.pipe(ue(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new re(2807,!1);return c.body}));case"text":return a.pipe(ue(c=>{if(c.body!==null&&typeof c.body!="string")throw new re(2808,!1);return c.body}));case"json":default:return a.pipe(ue(c=>c.body))}case"response":return a;default:throw new re(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Ao().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Gy(i,r))}post(t,r,i={}){return this.request("POST",t,Gy(i,r))}put(t,r,i={}){return this.request("PUT",t,Gy(i,r))}static \u0275fac=function(r){return new(r||n)(ie(hl))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();var g6=new J("");function QS(n,e){return e(n)}function m6(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function v6(n,e,t){return(r,i)=>Zt(t,()=>e(r,o=>n(o,i)))}var y6=new J(""),Xy=new J(""),_6=new J(""),JS=new J("",{providedIn:"root",factory:()=>!0});function w6(){let n=null;return(e,t)=>{n===null&&(n=(H(y6,{optional:!0})??[]).reduceRight(m6,QS));let r=H(Xr);if(H(JS)){let o=r.add();return n(e,t).pipe(yo(()=>r.remove(o)))}else return n(e,t)}}var WS=(()=>{class n extends hl{backend;injector;chain=null;pendingTasks=H(Xr);contributeToStability=H(JS);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Xy),...this.injector.get(_6,[])]));this.chain=r.reduceRight((i,o)=>v6(i,o,this.injector),QS)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(yo(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(ie(Qh),ie(an))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();var E6=/^\)\]\}',?\n/,I6=RegExp(`^${XS}:`,"m");function C6(n){return"responseURL"in n&&n.responseURL?n.responseURL:I6.test(n.getAllResponseHeaders())?n.getResponseHeader(XS):null}var qS=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new re(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?ke(r.\u0275loadImpl()):ae(null)).pipe(zt(()=>new ve(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((y,_)=>s.setRequestHeader(y,_.join(","))),t.headers.has(zS)||s.setRequestHeader(zS,f6),!t.headers.has(GS)){let y=t.detectContentTypeHeader();y!==null&&s.setRequestHeader(GS,y)}if(t.responseType){let y=t.responseType.toLowerCase();s.responseType=y!=="json"?y:"text"}let a=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let y=s.statusText||"OK",_=new Ts(s.getAllResponseHeaders()),C=C6(s)||t.url;return c=new qy({headers:_,status:s.status,statusText:y,url:C}),c},l=()=>{let{headers:y,status:_,statusText:C,url:x}=u(),R=null;_!==p6&&(R=typeof s.response>"u"?s.responseText:s.response),_===0&&(_=R?h6:0);let O=_>=200&&_<300;if(t.responseType==="json"&&typeof R=="string"){let V=R;R=R.replace(E6,"");try{R=R!==""?JSON.parse(R):null}catch(U){R=V,O&&(O=!1,R={error:U,text:R})}}O?(o.next(new Jh({body:R,headers:y,status:_,statusText:C,url:x||void 0})),o.complete()):o.error(new ep({error:R,headers:y,status:_,statusText:C,url:x||void 0}))},f=y=>{let{url:_}=u(),C=new ep({error:y,status:s.status||0,statusText:s.statusText||"Unknown Error",url:_||void 0});o.error(C)},h=!1,p=y=>{h||(o.next(u()),h=!0);let _={type:tc.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(_.total=y.total),t.responseType==="text"&&s.responseText&&(_.partialText=s.responseText),o.next(_)},m=y=>{let _={type:tc.UploadProgress,loaded:y.loaded};y.lengthComputable&&(_.total=y.total),o.next(_)};return s.addEventListener("load",l),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:tc.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",l),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(ie(Qa))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),eb=new J(""),x6="XSRF-TOKEN",A6=new J("",{providedIn:"root",factory:()=>x6}),T6="X-XSRF-TOKEN",D6=new J("",{providedIn:"root",factory:()=>T6}),tp=class{},S6=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yh(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(ie(Cn),ie(bi),ie(A6))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();function b6(n,e){let t=n.url.toLowerCase();if(!H(eb)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=H(tp).getToken(),i=H(D6);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var tb=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(tb||{});function R6(n,e){return{\u0275kind:n,\u0275providers:e}}function N6(...n){let e=[Ky,qS,WS,{provide:hl,useExisting:WS},{provide:Qh,useFactory:()=>H(g6,{optional:!0})??H(qS)},{provide:Xy,useValue:b6,multi:!0},{provide:eb,useValue:!0},{provide:tp,useClass:S6}];for(let t of n)e.push(...t.\u0275providers);return Wn(e)}var KS=new J("");function M6(){return R6(tb.LegacyInterceptors,[{provide:KS,useFactory:w6},{provide:Xy,useExisting:KS,multi:!0}])}var nb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=nr({type:n});static \u0275inj=er({providers:[N6(M6())]})}return n})();var Zy=class extends Xh{supportsDOMEvents=!0},Qy=class n extends Zy{static makeCurrent(){kS(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=P6();return t==null?null:k6(t)}resetBaseElement(){gl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yh(document.cookie,e)}},gl=null;function P6(){return gl=gl||document.querySelector("base"),gl?gl.getAttribute("href"):null}function k6(n){return new URL(n,document.baseURI).pathname}var F6=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),Jy=new J(""),cb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new re(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ie(Jy),ie($e))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),rp=class{_doc;constructor(e){this._doc=e}manager},np="ng-app-id";function rb(n){for(let e of n)e.remove()}function ib(n,e){let t=e.createElement("style");return t.textContent=n,t}function L6(n,e,t,r){let i=n.head?.querySelectorAll(`style[${np}="${e}"],link[${np}="${e}"]`);if(i)for(let o of i)o.removeAttribute(np),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function e1(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var ub=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=$y(o),L6(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,ib);r?.forEach(i=>this.addUsage(i,this.external,e1))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(rb(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])rb(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,ib(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,e1(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(np,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ie(Cn),ie(uy),ie(dy,8),ie(bi))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),Yy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},n1=/%COMP%/g;var lb="%COMP%",V6=`_nghost-${lb}`,B6=`_ngcontent-${lb}`,U6=!0,j6=new J("",{providedIn:"root",factory:()=>U6});function H6(n){return B6.replace(n1,n)}function $6(n){return V6.replace(n1,n)}function db(n,e){return e.map(t=>t.replace(n1,n))}var ob=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=l,this.platformIsServer=$y(a),this.defaultRenderer=new ml(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===qr.ShadowDom&&(r=Ae(X({},r),{encapsulation:qr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof ip?i.applyToHost(t):i instanceof vl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,f=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case qr.Emulated:o=new ip(c,u,r,this.appId,l,s,a,f,h);break;case qr.ShadowDom:return new t1(c,u,t,r,s,a,this.nonce,f,h);default:o=new vl(c,u,r,l,s,a,f,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ie(cb),ie(ub),ie(uy),ie(j6),ie(Cn),ie(bi),ie($e),ie(dy),ie(Wa,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),ml=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Yy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(sb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(sb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Yy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Yy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ai.DashCase|Ai.Important)?e.style.setProperty(t,r,i&Ai.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ai.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Pi().getGlobalEventTarget(this.doc,e),!e))throw new re(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function sb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var t1=class extends ml{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=i.styles;l=db(i.id,l);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}let f=i.getExternalStyles?.();if(f)for(let h of f){let p=e1(h,o);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},vl=class extends ml{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?db(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ip=class extends vl{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,u,l),this.contentAttr=H6(l),this.hostAttr=$6(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},G6=(()=>{class n extends rp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ie(Cn))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),ab=["alt","control","meta","shift"],z6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},W6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},q6=(()=>{class n extends rp{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pi().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ab.forEach(u=>{let l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=z6[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ab.forEach(s=>{if(s!==i){let a=W6[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ie(Cn))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();function fb(n,e){return SS(X({rootComponent:n},K6(e)))}function K6(n){return{appProviders:[...J6,...n?.providers??[]],platformProviders:Q6}}function X6(){Qy.makeCurrent()}function Y6(){return new xi}function Z6(){return ID(document),document}var Q6=[{provide:bi,useValue:VS},{provide:ly,useValue:X6,multi:!0},{provide:Cn,useFactory:Z6,deps:[]}];var J6=[{provide:Oh,useValue:"root"},{provide:xi,useFactory:Y6,deps:[]},{provide:Jy,useClass:G6,multi:!0,deps:[Cn]},{provide:Jy,useClass:q6,multi:!0,deps:[Cn]},ob,ub,cb,{provide:ka,useExisting:ob},{provide:Qa,useClass:F6,deps:[]},[]];var hb=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ie(Cn))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Te="primary",Nl=Symbol("RouteTitle"),a1=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ac(n){return new a1(n)}function tB(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function nB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qr(n[t],e[t]))return!1;return!0}function Qr(n,e){let t=n?c1(n):void 0,r=e?c1(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Cb(n[i],e[i]))return!1;return!0}function c1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Cb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function xb(n){return n.length>0?n[n.length-1]:null}function So(n){return R0(n)?n:Is(n)?ke(Promise.resolve(n)):ae(n)}var rB={exact:Tb,subset:Db},Ab={exact:iB,subset:oB,ignored:()=>!0};function pb(n,e,t){return rB[t.paths](n.root,e.root,t.matrixParams)&&Ab[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function iB(n,e){return Qr(n,e)}function Tb(n,e,t){if(!Ss(n.segments,e.segments)||!ap(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Tb(n.children[r],e.children[r],t))return!1;return!0}function oB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Cb(n[t],e[t]))}function Db(n,e,t){return Sb(n,e,e.segments,t)}function Sb(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ss(i,t)||e.hasChildren()||!ap(i,t,r))}else if(n.segments.length===t.length){if(!Ss(n.segments,t)||!ap(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Db(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ss(n.segments,i)||!ap(n.segments,i,r)||!n.children[Te]?!1:Sb(n.children[Te],e,o,r)}}function ap(n,e,t){return e.every((r,i)=>Ab[t](n[i].parameters,r.parameters))}var Fi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ac(this.queryParams),this._queryParamMap}toString(){return cB.serialize(this)}},Ze=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cp(this)}},Ds=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ac(this.parameters),this._parameterMap}toString(){return Rb(this)}};function sB(n,e){return Ss(n,e)&&n.every((t,r)=>Qr(t.parameters,e[r].parameters))}function Ss(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function aB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Te&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Te&&(t=t.concat(e(i,r)))}),t}var Ml=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>new cc,providedIn:"root"})}return n})(),cc=class{parse(e){let t=new l1(e);return new Fi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${yl(e.root,!0)}`,r=dB(e.queryParams),i=typeof e.fragment=="string"?`#${uB(e.fragment)}`:"";return`${t}${r}${i}`}},cB=new cc;function cp(n){return n.segments.map(e=>Rb(e)).join("/")}function yl(n,e){if(!n.hasChildren())return cp(n);if(e){let t=n.children[Te]?yl(n.children[Te],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Te&&r.push(`${i}:${yl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=aB(n,(r,i)=>i===Te?[yl(n.children[Te],!1)]:[`${i}:${yl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Te]!=null?`${cp(n)}/${t[0]}`:`${cp(n)}/(${t.join("//")})`}}function bb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function op(n){return bb(n).replace(/%3B/gi,";")}function uB(n){return encodeURI(n)}function u1(n){return bb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function up(n){return decodeURIComponent(n)}function gb(n){return up(n.replace(/\+/g,"%20"))}function Rb(n){return`${u1(n.path)}${lB(n.parameters)}`}function lB(n){return Object.entries(n).map(([e,t])=>`;${u1(e)}=${u1(t)}`).join("")}function dB(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${op(t)}=${op(i)}`).join("&"):`${op(t)}=${op(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var fB=/^[^\/()?;#]+/;function r1(n){let e=n.match(fB);return e?e[0]:""}var hB=/^[^\/()?;=#]+/;function pB(n){let e=n.match(hB);return e?e[0]:""}var gB=/^[^=?&#]+/;function mB(n){let e=n.match(gB);return e?e[0]:""}var vB=/^[^&#]+/;function yB(n){let e=n.match(vB);return e?e[0]:""}var l1=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ze([],{}):new Ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Te]=new Ze(e,t)),r}parseSegment(){let e=r1(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new Ds(up(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=pB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=r1(this.remaining);i&&(r=i,this.capture(r))}e[up(t)]=up(r)}parseQueryParam(e){let t=mB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=yB(this.remaining);s&&(r=s,this.capture(r))}let i=gb(t),o=gb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=r1(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Te);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Te]:new Ze([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function Nb(n){return n.segments.length>0?new Ze([],{[Te]:n}):n}function Mb(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Mb(i);if(r===Te&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ze(n.segments,e);return _B(t)}function _B(n){if(n.numberOfChildren===1&&n.children[Te]){let e=n.children[Te];return new Ze(n.segments.concat(e.segments),e.children)}return n}function bs(n){return n instanceof Fi}function wB(n,e,t=null,r=null){let i=Ob(n);return Pb(i,e,t,r)}function Ob(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Ze(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=Nb(r);return e??i}function Pb(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return i1(i,i,i,t,r);let o=EB(e);if(o.toRoot())return i1(i,i,new Ze([],{}),t,r);let s=IB(o,i,n),a=s.processChildren?wl(s.segmentGroup,s.index,o.commands):Fb(s.segmentGroup,s.index,o.commands);return i1(i,s.segmentGroup,a,t,r)}function lp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Cl(n){return typeof n=="object"&&n!=null&&n.outlets}function i1(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;n===e?s=t:s=kb(n,e,t);let a=Nb(Mb(s));return new Fi(a,o,i)}function kb(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=kb(o,e,t)}),new Ze(n.segments,r)}var dp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&lp(r[0]))throw new re(4003,!1);let i=r.find(Cl);if(i&&i!==xb(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function EB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new dp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new dp(t,e,r)}var ic=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function IB(n,e,t){if(n.isAbsolute)return new ic(e,!0,0);if(!t)return new ic(e,!1,NaN);if(t.parent===null)return new ic(t,!0,0);let r=lp(n.commands[0])?0:1,i=t.segments.length-1+r;return CB(t,i,n.numberOfDoubleDots)}function CB(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new ic(r,!1,i-o)}function xB(n){return Cl(n[0])?n[0].outlets:{[Te]:n}}function Fb(n,e,t){if(n??=new Ze([],{}),n.segments.length===0&&n.hasChildren())return wl(n,e,t);let r=AB(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ze(n.segments.slice(0,r.pathIndex),{});return o.children[Te]=new Ze(n.segments.slice(r.pathIndex),n.children),wl(o,0,i)}else return r.match&&i.length===0?new Ze(n.segments,{}):r.match&&!n.hasChildren()?d1(n,e,t):r.match?wl(n,0,i):d1(n,e,t)}function wl(n,e,t){if(t.length===0)return new Ze(n.segments,{});{let r=xB(t),i={};if(Object.keys(r).some(o=>o!==Te)&&n.children[Te]&&n.numberOfChildren===1&&n.children[Te].segments.length===0){let o=wl(n.children[Te],e,t);return new Ze(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Fb(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ze(n.segments,i)}}function AB(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Cl(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!vb(c,u,s))return o;r+=2}else{if(!vb(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function d1(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Cl(o)){let c=TB(o.outlets);return new Ze(r,c)}if(i===0&&lp(t[0])){let c=n.segments[e];r.push(new Ds(c.path,mb(t[0]))),i++;continue}let s=Cl(o)?o.outlets[Te]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&lp(a)?(r.push(new Ds(s,mb(a))),i+=2):(r.push(new Ds(s,{})),i++)}return new Ze(r,{})}function TB(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=d1(new Ze([],{}),0,r))}),e}function mb(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function vb(n,e,t){return n==t.path&&Qr(e,t.parameters)}var El="imperative",Qt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Qt||{}),hr=class{id;url;constructor(e,t){this.id=e,this.url=t}},uc=class extends hr{type=Qt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jr=class extends hr{urlAfterRedirects;type=Qt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ir=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ir||{}),fp=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(fp||{}),ki=class extends hr{reason;code;type=Qt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},To=class extends hr{reason;code;type=Qt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},xl=class extends hr{error;target;type=Qt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hp=class extends hr{urlAfterRedirects;state;type=Qt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},f1=class extends hr{urlAfterRedirects;state;type=Qt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},h1=class extends hr{urlAfterRedirects;state;shouldActivate;type=Qt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},p1=class extends hr{urlAfterRedirects;state;type=Qt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},g1=class extends hr{urlAfterRedirects;state;type=Qt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},m1=class{route;type=Qt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},v1=class{route;type=Qt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},y1=class{snapshot;type=Qt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_1=class{snapshot;type=Qt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},w1=class{snapshot;type=Qt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E1=class{snapshot;type=Qt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pp=class{routerEvent;position;anchor;type=Qt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Al=class{},lc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function DB(n,e){return n.providers&&!n._injector&&(n._injector=zh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Sr(n){return n.outlet||Te}function SB(n,e){let t=n.filter(r=>Sr(r)===e);return t.push(...n.filter(r=>Sr(r)!==e)),t}function Ol(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var I1=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ol(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Pl(this.rootInjector)}},Pl=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new I1(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ie(an))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=C1(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=C1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=x1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return x1(e,this._root).map(t=>t.value)}};function C1(n,e){if(n===e.value)return e;for(let t of e.children){let r=C1(n,t);if(r)return r}return null}function x1(n,e){if(n===e.value)return[e];for(let t of e.children){let r=x1(n,t);if(r.length)return r.unshift(e),r}return[]}var rr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function rc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var mp=class extends gp{snapshot;constructor(e,t){super(e),this.snapshot=t,O1(this,e)}toString(){return this.snapshot.toString()}};function Lb(n){let e=bB(n),t=new Mt([new Ds("",{})]),r=new Mt({}),i=new Mt({}),o=new Mt({}),s=new Mt(""),a=new Do(t,r,o,s,i,Te,n,e.root);return a.snapshot=e.root,new mp(new rr(a,[]),e)}function bB(n){let e={},t={},r={},i="",o=new oc([],e,r,i,t,Te,n,null,{});return new yp("",new rr(o,[]))}var Do=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ue(u=>u[Nl]))??ae(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(e=>ac(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(e=>ac(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:X(X({},e.params),n.params),data:X(X({},e.data),n.data),resolve:X(X(X(X({},n.data),e.data),i?.data),n._resolvedData)}:r={params:X({},n.params),data:X({},n.data),resolve:X(X({},n.data),n._resolvedData??{})},i&&Bb(i)&&(r.resolve[Nl]=i.title),r}var oc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Nl]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ac(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ac(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},yp=class extends gp{url;constructor(e,t){super(t),this.url=e,O1(this,t)}toString(){return Vb(this._root)}};function O1(n,e){e.value._routerState=n,e.children.forEach(t=>O1(n,t))}function Vb(n){let e=n.children.length>0?` { ${n.children.map(Vb).join(", ")} } `:"";return`${n.value}${e}`}function o1(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Qr(e.params,t.params)||n.paramsSubject.next(t.params),nB(e.url,t.url)||n.urlSubject.next(t.url),Qr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function A1(n,e){let t=Qr(n.params,e.params)&&sB(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||A1(n.parent,e.parent))}function Bb(n){return typeof n.title=="string"||n.title===null}var RB=new J(""),P1=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Te;activateEvents=new Xe;deactivateEvents=new Xe;attachEvents=new Xe;detachEvents=new Xe;routerOutletData=pD(void 0);parentContexts=H(Pl);location=H(Co);changeDetector=H(Cs);inputBinder=H(Ip,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new T1(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=cn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ja]})}return n})(),T1=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Do?this.route:e===Pl?this.childContexts:e===RB?this.outletData:this.parent.get(e,t)}},Ip=new J(""),yb=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ju([r.queryParams,r.params,r.data]).pipe(zt(([o,s,a],c)=>(a=X(X(X({},o),s),a),c===0?ae(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=bS(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();function NB(n,e,t){let r=Tl(n,e._root,t?t._root:void 0);return new mp(r,e)}function Tl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=MB(n,e,t);return new rr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Tl(n,a)),s}}let r=OB(e.value),i=e.children.map(o=>Tl(n,o));return new rr(r,i)}}function MB(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Tl(n,r,i);return Tl(n,r)})}function OB(n){return new Do(new Mt(n.url),new Mt(n.params),new Mt(n.queryParams),new Mt(n.fragment),new Mt(n.data),n.outlet,n.component,n)}var Dl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Ub="ngNavigationCancelingError";function _p(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=bs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=jb(!1,ir.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function jb(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Ub]=!0,t.cancellationCode=e,t}function PB(n){return Hb(n)&&bs(n.url)}function Hb(n){return!!n&&n[Ub]}var kB=(n,e,t,r)=>ue(i=>(new D1(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),D1=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),o1(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=rc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=rc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=rc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=rc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new E1(o.value.snapshot))}),e.children.length&&this.forwardEvent(new _1(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(o1(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),o1(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},wp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},sc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function FB(n,e,t){let r=n._root,i=e?e._root:null;return _l(r,i,t,[r.value])}function LB(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function fc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!cT(n)?n:e.get(n):r}function _l(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=rc(e);return n.children.forEach(s=>{VB(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Il(a,t.getContext(s),i)),i}function VB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=BB(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new wp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?_l(n,e,a?a.children:null,r,i):_l(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new sc(a.outlet.component,s))}else s&&Il(e,a,i),i.canActivateChecks.push(new wp(r)),o.component?_l(n,null,a?a.children:null,r,i):_l(n,null,t,r,i);return i}function BB(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ss(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ss(n.url,e.url)||!Qr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!A1(n,e)||!Qr(n.queryParams,e.queryParams);case"paramsChange":default:return!A1(n,e)}}function Il(n,e,t){let r=rc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Il(s,e.children.getContext(o),t):Il(s,null,t):Il(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new sc(e.outlet.component,i)):t.canDeactivateChecks.push(new sc(null,i)):t.canDeactivateChecks.push(new sc(null,i))}function kl(n){return typeof n=="function"}function UB(n){return typeof n=="boolean"}function jB(n){return n&&kl(n.canLoad)}function HB(n){return n&&kl(n.canActivate)}function $B(n){return n&&kl(n.canActivateChild)}function GB(n){return n&&kl(n.canDeactivate)}function zB(n){return n&&kl(n.canMatch)}function $b(n){return n instanceof _i||n?.name==="EmptyError"}var sp=Symbol("INITIAL_VALUE");function dc(){return zt(n=>ju(n.map(e=>e.pipe(Gt(1),L0(sp)))).pipe(ue(e=>{for(let t of e)if(t!==!0){if(t===sp)return sp;if(t===!1||WB(t))return t}return!0}),$t(e=>e!==sp),Gt(1)))}function WB(n){return bs(n)||n instanceof Dl}function qB(n,e){return yt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ae(Ae(X({},t),{guardsResult:!0})):KB(s,r,i,n).pipe(yt(a=>a&&UB(a)?XB(r,o,n,e):ae(a)),ue(a=>Ae(X({},t),{guardsResult:a})))})}function KB(n,e,t,r){return ke(n).pipe(yt(i=>e5(i.component,i.route,t,e,r)),Ei(i=>i!==!0,!0))}function XB(n,e,t,r){return ke(e).pipe(wi(i=>Ur(ZB(i.route.parent,r),YB(i.route,r),JB(n,i.path,t),QB(n,i.route,t))),Ei(i=>i!==!0,!0))}function YB(n,e){return n!==null&&e&&e(new w1(n)),ae(!0)}function ZB(n,e){return n!==null&&e&&e(new y1(n)),ae(!0)}function QB(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ae(!0);let i=r.map(o=>cs(()=>{let s=Ol(e)??t,a=fc(o,s),c=HB(a)?a.canActivate(e,n):Zt(s,()=>a(e,n));return So(c).pipe(Ei())}));return ae(i).pipe(dc())}function JB(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>LB(s)).filter(s=>s!==null).map(s=>cs(()=>{let a=s.guards.map(c=>{let u=Ol(s.node)??t,l=fc(c,u),f=$B(l)?l.canActivateChild(r,n):Zt(u,()=>l(r,n));return So(f).pipe(Ei())});return ae(a).pipe(dc())}));return ae(o).pipe(dc())}function e5(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ae(!0);let s=o.map(a=>{let c=Ol(e)??i,u=fc(a,c),l=GB(u)?u.canDeactivate(n,e,t,r):Zt(c,()=>u(n,e,t,r));return So(l).pipe(Ei())});return ae(s).pipe(dc())}function t5(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ae(!0);let o=i.map(s=>{let a=fc(s,n),c=jB(a)?a.canLoad(e,t):Zt(n,()=>a(e,t));return So(c)});return ae(o).pipe(dc(),Gb(r))}function Gb(n){return I0(kt(e=>{if(typeof e!="boolean")throw _p(n,e)}),ue(e=>e===!0))}function n5(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ae(!0);let o=i.map(s=>{let a=fc(s,n),c=zB(a)?a.canMatch(e,t):Zt(n,()=>a(e,t));return So(c)});return ae(o).pipe(dc(),Gb(r))}var Sl=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},bl=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function nc(n){return po(new Sl(n))}function r5(n){return po(new re(4e3,!1))}function i5(n){return po(jb(!1,ir.GuardRejected))}var S1=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ae(r);if(i.numberOfChildren>1||!i.children[Te])return r5(`${e.redirectTo}`);i=i.children[Te]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:l,url:f,outlet:h,params:p,data:m,title:y}=i,_=Zt(o,()=>a({params:p,data:m,queryParams:c,fragment:u,routeConfig:l,url:f,outlet:h,title:y}));if(_ instanceof Fi)throw new bl(_);t=_}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new bl(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Fi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ze(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},b1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function o5(n,e,t,r,i){let o=zb(n,e,t);return o.matched?(r=DB(e,r),n5(r,e,t,i).pipe(ue(s=>s===!0?o:X({},b1)))):ae(o)}function zb(n,e,t){if(e.path==="**")return s5(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?X({},b1):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||tB)(t,n,e);if(!i)return X({},b1);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?X(X({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function s5(n){return{matched:!0,parameters:n.length>0?xb(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function _b(n,e,t,r){return t.length>0&&u5(n,t,r)?{segmentGroup:new Ze(e,c5(r,new Ze(t,n.children))),slicedSegments:[]}:t.length===0&&l5(n,t,r)?{segmentGroup:new Ze(n.segments,a5(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ze(n.segments,n.children),slicedSegments:t}}function a5(n,e,t,r){let i={};for(let o of t)if(Cp(n,e,o)&&!r[Sr(o)]){let s=new Ze([],{});i[Sr(o)]=s}return X(X({},r),i)}function c5(n,e){let t={};t[Te]=e;for(let r of n)if(r.path===""&&Sr(r)!==Te){let i=new Ze([],{});t[Sr(r)]=i}return t}function u5(n,e,t){return t.some(r=>Cp(n,e,r)&&Sr(r)!==Te)}function l5(n,e,t){return t.some(r=>Cp(n,e,r))}function Cp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function d5(n,e,t){return e.length===0&&!n.children[t]}var R1=class{};function f5(n,e,t,r,i,o,s="emptyOnly"){return new N1(n,e,t,r,i,s,o).recognize()}var h5=31,N1=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new S1(this.urlSerializer,this.urlTree)}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=_b(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ue(({children:t,rootSnapshot:r})=>{let i=new rr(r,t),o=new yp("",i),s=wB(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new oc([],Object.freeze({}),Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Te,t).pipe(ue(r=>({children:r,rootSnapshot:t})),mo(r=>{if(r instanceof bl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Sl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ue(s=>s instanceof rr?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ke(o).pipe(wi(s=>{let a=r.children[s],c=SB(t,s);return this.processSegmentGroup(e,c,a,s,i)}),F0((s,a)=>(s.push(...a),s)),vo(null),P0(),yt(s=>{if(s===null)return nc(r);let a=Wb(s);return p5(a),ae(a)}))}processSegment(e,t,r,i,o,s,a){return ke(t).pipe(wi(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(mo(u=>{if(u instanceof Sl)return ae(null);throw u}))),Ei(c=>!!c),mo(c=>{if($b(c))return d5(r,i,o)?ae(new R1):nc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Sr(r)!==s&&(s===Te||!Cp(i,o,r))?nc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):nc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:f,remainingSegments:h}=zb(t,i,o);if(!c)return nc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>h5&&(this.allowRedirects=!1));let p=new oc(o,u,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,wb(i),Sr(i),i.component??i._loadedComponent??null,i,Eb(i)),m=vp(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let y=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,f,p,e);return this.applyRedirects.lineralizeSegments(i,y).pipe(yt(_=>this.processSegment(e,r,t,_.concat(h),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=o5(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(zt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(zt(({routes:u})=>{let l=r._loadedInjector??e,{parameters:f,consumedSegments:h,remainingSegments:p}=c,m=new oc(h,f,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,wb(r),Sr(r),r.component??r._loadedComponent??null,r,Eb(r)),y=vp(m,s,this.paramsInheritanceStrategy);m.params=Object.freeze(y.params),m.data=Object.freeze(y.data);let{segmentGroup:_,slicedSegments:C}=_b(t,h,p,u);if(C.length===0&&_.hasChildren())return this.processChildren(l,u,_,m).pipe(ue(R=>new rr(m,R)));if(u.length===0&&C.length===0)return ae(new rr(m,[]));let x=Sr(r)===o;return this.processSegment(l,u,_,C,x?Te:o,!0,m).pipe(ue(R=>new rr(m,R instanceof rr?[R]:[])))}))):nc(t)))}getChildConfig(e,t,r){return t.children?ae({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ae({routes:t._loadedRoutes,injector:t._loadedInjector}):t5(e,t,r,this.urlSerializer).pipe(yt(i=>i?this.configLoader.loadChildren(e,t).pipe(kt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):i5(t))):ae({routes:[],injector:e})}};function p5(n){n.sort((e,t)=>e.value.outlet===Te?-1:t.value.outlet===Te?1:e.value.outlet.localeCompare(t.value.outlet))}function g5(n){let e=n.value.routeConfig;return e&&e.path===""}function Wb(n){let e=[],t=new Set;for(let r of n){if(!g5(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Wb(r.children);e.push(new rr(r.value,i))}return e.filter(r=>!t.has(r))}function wb(n){return n.data||{}}function Eb(n){return n.resolve||{}}function m5(n,e,t,r,i,o){return yt(s=>f5(n,e,t,r,s.extractedUrl,i,o).pipe(ue(({state:a,tree:c})=>Ae(X({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function v5(n,e){return yt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ae(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of qb(c))s.add(u);let a=0;return ke(s).pipe(wi(c=>o.has(c)?y5(c,r,n,e):(c.data=vp(c,c.parent,n).resolve,ae(void 0))),kt(()=>a++),xa(1),yt(c=>a===s.size?ae(t):yn))})}function qb(n){let e=n.children.map(t=>qb(t)).flat();return[n,...e]}function y5(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Bb(i)&&(o[Nl]=i.title),_5(o,n,e,r).pipe(ue(s=>(n._resolvedData=s,n.data=vp(n,n.parent,t).resolve,null)))}function _5(n,e,t,r){let i=c1(n);if(i.length===0)return ae({});let o={};return ke(i).pipe(yt(s=>w5(n[s],e,t,r).pipe(Ei(),kt(a=>{if(a instanceof Dl)throw _p(new cc,a);o[s]=a}))),xa(1),ue(()=>o),mo(s=>$b(s)?yn:po(s)))}function w5(n,e,t,r){let i=Ol(e)??r,o=fc(n,i),s=o.resolve?o.resolve(e,t):Zt(i,()=>o(e,t));return So(s)}function s1(n){return zt(e=>{let t=n(e);return t?ke(t).pipe(ue(()=>e)):ae(e)})}var Kb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Te);return r}getResolvedTitleForRoute(t){return t.data[Nl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>H(E5),providedIn:"root"})}return n})(),E5=(()=>{class n extends Kb{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ie(hb))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fl=new J("",{providedIn:"root",factory:()=>({})}),I5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ft({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&De(0,"router-outlet")},dependencies:[P1],encapsulation:2})}return n})();function k1(n){let e=n.children&&n.children.map(k1),t=e?Ae(X({},n),{children:e}):X({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Te&&(t.component=I5),t}var Rl=new J(""),F1=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=H(Kh);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ae(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=So(t.loadComponent()).pipe(ue(Xb),kt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),yo(()=>{this.componentLoaders.delete(t)})),i=new lo(r,()=>new pt).pipe(ma());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ae({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=C5(r,this.compiler,t,this.onLoadEndListener).pipe(yo(()=>{this.childrenLoaders.delete(r)})),s=new lo(o,()=>new pt).pipe(ma());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function C5(n,e,t,r){return So(n.loadChildren()).pipe(ue(Xb),yt(i=>i instanceof by||Array.isArray(i)?ae(i):ke(e.compileModuleAsync(i))),ue(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Rl,[],{optional:!0,self:!0}).flat()),{routes:s.map(k1),injector:o}}))}function x5(n){return n&&typeof n=="object"&&"default"in n}function Xb(n){return x5(n)?n.default:n}var L1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>H(A5),providedIn:"root"})}return n})(),A5=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yb=new J(""),Zb=new J("");function T5(n,e,t){let r=n.get(Zb),i=n.get(Cn);return n.get($e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),D5(n))),{onViewTransitionCreated:c}=r;return c&&Zt(n,()=>c({transition:a,from:e,to:t})),s})}function D5(n){return new Promise(e=>{hy({read:()=>setTimeout(e)},{injector:n})})}var Qb=new J(""),V1=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new pt;transitionAbortSubject=new pt;configLoader=H(F1);environmentInjector=H(an);destroyRef=H($a);urlSerializer=H(Ml);rootContexts=H(Pl);location=H(Ja);inputBindingEnabled=H(Ip,{optional:!0})!==null;titleStrategy=H(Kb);options=H(Fl,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=H(L1);createViewTransition=H(Yb,{optional:!0});navigationErrorHandler=H(Qb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ae(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new m1(i)),r=i=>this.events.next(new v1(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ae(X(X({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Mt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:El,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($t(o=>o.id!==0),ue(o=>Ae(X({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),zt(o=>{let s=!1,a=!1;return ae(o).pipe(zt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ir.SupersededByNewNavigation),yn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ae(X({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&l!=="reload"){let f="";return this.events.next(new To(c.id,this.urlSerializer.serialize(c.rawUrl),f,fp.IgnoredSameUrlNavigation)),c.resolve(!1),yn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ae(c).pipe(zt(f=>{let h=this.transitions?.getValue();return this.events.next(new uc(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?yn:Promise.resolve(f)}),m5(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),kt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Ae(X({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new hp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:m,extras:y}=c,_=new uc(f,this.urlSerializer.serialize(h),p,m);this.events.next(_);let C=Lb(this.rootComponentType).snapshot;return this.currentTransition=o=Ae(X({},c),{targetSnapshot:C,urlAfterRedirects:h,extras:Ae(X({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,ae(o)}else{let f="";return this.events.next(new To(c.id,this.urlSerializer.serialize(c.extractedUrl),f,fp.IgnoredByUrlHandlingStrategy)),c.resolve(!1),yn}}),kt(c=>{let u=new f1(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ue(c=>(this.currentTransition=o=Ae(X({},c),{guards:FB(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),qB(this.environmentInjector,c=>this.events.next(c)),kt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw _p(this.urlSerializer,c.guardsResult);let u=new h1(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),$t(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ir.GuardRejected),!1)),s1(c=>{if(c.guards.canActivateChecks.length)return ae(c).pipe(kt(u=>{let l=new p1(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),zt(u=>{let l=!1;return ae(u).pipe(v5(this.paramsInheritanceStrategy,this.environmentInjector),kt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(u,"",ir.NoDataFromResolver)}}))}),kt(u=>{let l=new g1(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}))}),s1(c=>{let u=l=>{let f=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(l.routeConfig).pipe(kt(h=>{l.component=h}),ue(()=>{})));for(let h of l.children)f.push(...u(h));return f};return ju(u(c.targetSnapshot.root)).pipe(vo(null),Gt(1))}),s1(()=>this.afterPreactivation()),zt(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,l=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return l?ke(l).pipe(ue(()=>o)):ae(o)}),ue(c=>{let u=NB(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Ae(X({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),kt(()=>{this.events.next(new Al)}),kB(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Gt(1),kt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),V0(this.transitionAbortSubject.pipe(kt(c=>{throw c}))),yo(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",ir.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),mo(c=>{if(this.destroyed)return o.resolve(!1),yn;if(a=!0,Hb(c))this.events.next(new ki(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),PB(c)?this.events.next(new lc(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let u=new xl(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let l=Zt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(l instanceof Dl){let{message:f,cancellationCode:h}=_p(this.urlSerializer,l);this.events.next(new ki(o.id,this.urlSerializer.serialize(o.extractedUrl),f,h)),this.events.next(new lc(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(u),c}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return yn}))}))}cancelNavigationTransition(t,r,i){let o=new ki(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function S5(n){return n!==El}var b5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>H(R5),providedIn:"root"})}return n})(),M1=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},R5=(()=>{class n extends M1{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>H(N5),providedIn:"root"})}return n})(),N5=(()=>{class n extends Jb{location=H(Ja);urlSerializer=H(Ml);options=H(Fl,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=H(L1);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Fi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=Lb(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof uc)this.stateMemento=this.createStateMemento();else if(t instanceof To)this.rawUrlTree=r.initialUrl;else if(t instanceof hp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Al?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof ki&&(t.code===ir.GuardRejected||t.code===ir.NoDataFromResolver)?this.restoreHistory(r):t instanceof xl?this.restoreHistory(r,!0):t instanceof Jr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Fi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=X(X({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=X(X({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function e2(n,e){n.events.pipe($t(t=>t instanceof Jr||t instanceof ki||t instanceof xl||t instanceof To),ue(t=>t instanceof Jr||t instanceof To?0:(t instanceof ki?t.code===ir.Redirect||t.code===ir.SupersededByNewNavigation:!1)?2:1),$t(t=>t!==2),Gt(1)).subscribe(()=>{e()})}var M5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},O5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Lt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=H(Ry);stateManager=H(Jb);options=H(Fl,{optional:!0})||{};pendingTasks=H(Xr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=H(V1);urlSerializer=H(Ml);location=H(Ja);urlHandlingStrategy=H(L1);_events=new pt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=H(b5);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=H(Rl,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!H(Ip,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Tt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ki&&r.code!==ir.Redirect&&r.code!==ir.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Jr)this.navigated=!0;else if(r instanceof lc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=X({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||S5(i.source)},s);this.scheduleNavigation(a,El,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}k5(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),El,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=X({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(k1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=X(X({},this.currentUrlTree.queryParams),o);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}l!==null&&(l=this.removeEmptyProps(l));let f;try{let h=i?i.snapshot:this.routerState.snapshot.root;f=Ob(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return Pb(f,t,l,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=bs(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,El,null,r)}navigate(t,r={skipLocationChange:!1}){return P5(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=X({},M5):r===!1?i=X({},O5):i=r,bs(t))return pb(this.currentUrlTree,t,i);let o=this.parseUrl(t);return pb(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,h)=>{a=f,c=h});let l=this.pendingTasks.add();return e2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function P5(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new re(4008,!1)}function k5(n){return!(n instanceof Al)&&!(n instanceof lc)}var bo=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new pt;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Jr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(bs(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:RD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:bs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ge(Lt),ge(Do),sy("tabindex"),ge(Ri),ge(tr),ge(Yr))};static \u0275dir=cn({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Ye("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&xo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",xs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",xs],replaceUrl:[2,"replaceUrl","replaceUrl",xs],routerLink:"routerLink"},features:[ja]})}return n})();var Ep=class{};var F5=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe($t(t=>t instanceof Jr),wi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=zh(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ke(i).pipe(go())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ae(null);let o=i.pipe(yt(s=>s===null?ae(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ke([o,s]).pipe(go())}else return o})}static \u0275fac=function(r){return new(r||n)(ie(Lt),ie(Kh),ie(an),ie(Ep),ie(F1))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),t2=new J(""),L5=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof uc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof To&&t.code===fp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pp&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pp(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){sS()};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();function n2(n,...e){return Wn([{provide:Rl,multi:!0,useValue:n},[],{provide:Do,useFactory:r2,deps:[Lt]},{provide:cl,multi:!0,useFactory:i2},e.map(t=>t.\u0275providers)])}function r2(n){return n.routerState.root}function hc(n,e){return{\u0275kind:n,\u0275providers:e}}function i2(){let n=H(_t);return e=>{let t=n.get(lr);if(e!==t.components[0])return;let r=n.get(Lt),i=n.get(o2);n.get(B1)===1&&r.initialNavigation(),n.get(s2,null,be.Optional)?.setUpPreloading(),n.get(t2,null,be.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var o2=new J("",{factory:()=>new pt}),B1=new J("",{providedIn:"root",factory:()=>1});function V5(){return hc(2,[{provide:B1,useValue:0},{provide:Xa,multi:!0,deps:[_t],useFactory:e=>{let t=e.get(FS,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Lt),o=e.get(o2);e2(i,()=>{r(!0)}),e.get(V1).afterPreactivation=()=>(r(!0),o.closed?ae(void 0):o),i.initialNavigation()}))}}])}function B5(){return hc(3,[{provide:Xa,multi:!0,useFactory:()=>{let e=H(Lt);return()=>{e.setUpLocationChangeListener()}}},{provide:B1,useValue:2}])}var s2=new J("");function U5(n){return hc(0,[{provide:s2,useExisting:F5},{provide:Ep,useExisting:n}])}function a2(){return hc(6,[{provide:Yr,useClass:Hy}])}function j5(){return hc(8,[yb,{provide:Ip,useExisting:yb}])}function H5(n){let e=[{provide:Yb,useValue:T5},{provide:Zb,useValue:X({skipNextTransition:!!n?.skipInitialTransition},n)}];return hc(9,e)}var $5=[Ja,{provide:Ml,useClass:cc},Lt,Pl,{provide:Do,useFactory:r2,deps:[Lt]},F1,[]],Ro=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[$5,[],{provide:Rl,multi:!0,useValue:t},[],r?.errorHandler?{provide:Qb,useValue:r.errorHandler}:[],{provide:Fl,useValue:r||{}},r?.useHash?z5():W5(),G5(),r?.preloadingStrategy?U5(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?q5(r):[],r?.bindToComponentInputs?j5().\u0275providers:[],r?.enableViewTransitions?H5().\u0275providers:[],K5()]}}static forChild(t){return{ngModule:n,providers:[{provide:Rl,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=nr({type:n});static \u0275inj=er({})}return n})();function G5(){return{provide:t2,useFactory:()=>{let n=H(BS),e=H($e),t=H(Fl),r=H(V1),i=H(Ml);return t.scrollOffset&&n.setOffset(t.scrollOffset),new L5(i,r,n,e,t)}}}function z5(){return{provide:Yr,useClass:Hy}}function W5(){return{provide:Yr,useClass:jy}}function q5(n){return[n.initialNavigation==="disabled"?B5().\u0275providers:[],n.initialNavigation==="enabledBlocking"?V5().\u0275providers:[]]}var Ib=new J("");function K5(){return[{provide:Ib,useFactory:i2},{provide:cl,multi:!0,useExisting:Ib}]}var xp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ft({type:n,selectors:[["app-home"]],decls:77,vars:0,consts:[[1,"hero-section"],[1,"vertical-rects"],[1,"rect"],[1,"hero-content","container"],[1,"hero-text"],[1,"hero-buttons"],["href","#how-it-works",1,"btn","learn-more-btn"],["routerLink","/barcode",1,"btn","scan-now-btn"],[1,"hero-image"],["src","assets/hero-woman.png","alt","Food Scanning Illustration",1,"main-illustration"],[1,"shape-right"],["src","assets/shape-right.png","alt","Divider shape"],["id","how-it-works",1,"how-it-works"],["src","assets/shape-btm-lft.png","alt","",1,"shape-btm-lft"],[1,"container"],[1,"how-it-works-header"],[1,"steps"],[1,"step-row"],["src","assets/scan-icon.png","alt","Scan icon"],[1,"step-underline"],["src","assets/results-icon.png","alt","Results icon"],["src","assets/shop-icon.png","alt","Shop icon"],[1,"key-features"],[1,"features-header"],[1,"feature-list"],[1,"material-icons","check-icon"]],template:function(t,r){t&1&&(B(0,"main",0)(1,"div",1),De(2,"div",2)(3,"div",2)(4,"div",2)(5,"div",2)(6,"div",2),j(),B(7,"div",3)(8,"div",4)(9,"h1"),z(10,"Welcome to Diraya"),j(),B(11,"h2"),z(12,"Your Personal Food Safety Companion"),j(),B(13,"p"),z(14," Discover a smarter way to shop with confidence! Simply scan product barcodes to instantly check for allergens and make informed food choices. "),j(),B(15,"div",5)(16,"a",6),z(17,"Learn More"),j(),B(18,"button",7),z(19,"Scan Now"),j()()(),B(20,"div",8),De(21,"img",9),j()(),B(22,"div",10),De(23,"img",11),j()(),B(24,"section",12),De(25,"img",13),B(26,"div",14)(27,"div",15)(28,"span"),z(29,"How It Works"),j()(),B(30,"div",16)(31,"div",17),De(32,"img",18),B(33,"div")(34,"h4"),z(35,"1. Scan the Barcode"),j(),B(36,"p"),z(37,"Open your camera and scan the barcode on any food product."),j()()(),De(38,"div",19),B(39,"div",17),De(40,"img",20),B(41,"div")(42,"h4"),z(43,"2. Get Instant Results"),j(),B(44,"p"),z(45," The app will analyze the product and check for allergens based on your preferences. "),j()()(),De(46,"div",19),B(47,"div",17),De(48,"img",21),B(49,"div")(50,"h4"),z(51,"3. Stay Safe & Shop Smart"),j(),B(52,"p"),z(53," If it's safe, you're good to go! If not, you'll get a warning with allergen details. "),j()()(),De(54,"div",19),j()()(),B(55,"section",22)(56,"div",14)(57,"div",23)(58,"span"),z(59,"Key Features"),j()(),B(60,"ul",24)(61,"li")(62,"span",25),z(63,"check"),j(),z(64," Instant Barcode Scanning \u2013 Get real-time allergen detection. "),j(),B(65,"li")(66,"span",25),z(67,"check"),j(),z(68," Personalized Alerts \u2013 Set your allergens and get customized warnings. "),j(),B(69,"li")(70,"span",25),z(71,"check"),j(),z(72," Community Contribution \u2013 Help improve the database by adding missing products. "),j(),B(73,"li")(74,"span",25),z(75,"check"),j(),z(76," Safe & Reliable \u2013 Powered by verified food data sources. "),j()()()())},dependencies:[ln,Ro,bo],encapsulation:2})};var Ap=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ft({type:n,selectors:[["app-about"]],decls:53,vars:0,consts:[[1,"how-it-works"],["src","assets/shape-btm-lft.png","alt","",1,"shape-btm-lft"],[1,"container"],[1,"how-it-works-header"],[1,"steps"],[1,"step-row"],["src","assets/scan-icon.png","alt","Scan icon"],[1,"step-underline"],["src","assets/results-icon.png","alt","Results icon"],["src","assets/shop-icon.png","alt","Shop icon"],[1,"key-features"],[1,"features-header"],[1,"feature-list"],[1,"material-icons","check-icon"]],template:function(t,r){t&1&&(B(0,"section",0),De(1,"img",1),B(2,"div",2)(3,"div",3)(4,"span"),z(5,"How It Works"),j()(),B(6,"div",4)(7,"div",5),De(8,"img",6),B(9,"div")(10,"h4"),z(11,"1. Scan the Barcode"),j(),B(12,"p"),z(13,"Open your camera and scan the barcode on any food product."),j()()(),De(14,"div",7),B(15,"div",5),De(16,"img",8),B(17,"div")(18,"h4"),z(19,"2. Get Instant Results"),j(),B(20,"p"),z(21," The app will analyze the product and check for allergens based on your preferences. "),j()()(),De(22,"div",7),B(23,"div",5),De(24,"img",9),B(25,"div")(26,"h4"),z(27,"3. Stay Safe & Shop Smart"),j(),B(28,"p"),z(29," If it's safe, you're good to go! If not, you'll get a warning with allergen details. "),j()()(),De(30,"div",7),j()()(),B(31,"section",10)(32,"div",2)(33,"div",11)(34,"span"),z(35,"Key Features"),j()(),B(36,"ul",12)(37,"li")(38,"span",13),z(39,"check"),j(),z(40," Instant Barcode Scanning \u2013 Get real-time allergen detection. "),j(),B(41,"li")(42,"span",13),z(43,"check"),j(),z(44," Personalized Alerts \u2013 Set your allergens and get customized warnings. "),j(),B(45,"li")(46,"span",13),z(47,"check"),j(),z(48," Community Contribution \u2013 Help improve the database by adding missing products. "),j(),B(49,"li")(50,"span",13),z(51,"check"),j(),z(52," Safe & Reliable \u2013 Powered by verified food data sources. "),j()()()())},dependencies:[ln],encapsulation:2})};var m2=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ge(Ri),ge(tr))};static \u0275dir=cn({type:n})}return n})(),Rp=(()=>{class n extends m2{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=cn({type:n,features:[Ni]})}return n})(),$l=new J(""),X5={provide:$l,useExisting:Eo(()=>G1),multi:!0},G1=(()=>{class n extends Rp{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=cn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Ye("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ya([X5]),Ni]})}return n})(),Y5={provide:$l,useExisting:Eo(()=>vc),multi:!0};function Z5(){let n=Pi()?Pi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Q5=new J(""),vc=(()=>{class n extends m2{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Z5())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ge(Ri),ge(tr),ge(Q5,8))};static \u0275dir=cn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ye("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ya([Y5]),Ni]})}return n})();var J5=new J(""),e9=new J("");function v2(n){return n!=null}function y2(n){return Is(n)?ke(n):n}function _2(n){let e={};return n.forEach(t=>{e=t!=null?X(X({},e),t):e}),Object.keys(e).length===0?null:e}function w2(n,e){return e.map(t=>t(n))}function t9(n){return!n.validate}function E2(n){return n.map(e=>t9(e)?e:t=>e.validate(t))}function n9(n){if(!n)return null;let e=n.filter(v2);return e.length==0?null:function(t){return _2(w2(t,e))}}function I2(n){return n!=null?n9(E2(n)):null}function r9(n){if(!n)return null;let e=n.filter(v2);return e.length==0?null:function(t){let r=w2(t,e).map(y2);return N0(r).pipe(ue(_2))}}function C2(n){return n!=null?r9(E2(n)):null}function c2(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function i9(n){return n._rawValidators}function o9(n){return n._rawAsyncValidators}function U1(n){return n?Array.isArray(n)?n:[n]:[]}function Dp(n,e){return Array.isArray(n)?n.includes(e):n===e}function u2(n,e){let t=U1(e);return U1(n).forEach(i=>{Dp(t,i)||t.push(i)}),t}function l2(n,e){return U1(e).filter(t=>!Dp(n,t))}var Sp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=I2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=C2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},j1=class extends Sp{name;get formDirective(){return null}get path(){return null}},Hl=class extends Sp{_parent=null;name=null;valueAccessor=null},H1=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},s9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Kse=Ae(X({},s9),{"[class.ng-submitted]":"isSubmitted"}),yc=(()=>{class n extends H1{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ge(Hl,2))};static \u0275dir=cn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ny("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ni]})}return n})();var Vl="VALID",Tp="INVALID",pc="PENDING",Bl="DISABLED",mc=class{},bp=class extends mc{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ul=class extends mc{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},jl=class extends mc{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},gc=class extends mc{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function a9(n){return(Np(n)?n.validators:n)||null}function c9(n){return Array.isArray(n)?I2(n):n||null}function u9(n,e){return(Np(e)?e.asyncValidators:n)||null}function l9(n){return Array.isArray(n)?C2(n):n||null}function Np(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var $1=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Mi(this.statusReactive)}set status(e){Mi(()=>this.statusReactive.set(e))}_status=Za(()=>this.statusReactive());statusReactive=za(void 0);get valid(){return this.status===Vl}get invalid(){return this.status===Tp}get pending(){return this.status==pc}get disabled(){return this.status===Bl}get enabled(){return this.status!==Bl}errors;get pristine(){return Mi(this.pristineReactive)}set pristine(e){Mi(()=>this.pristineReactive.set(e))}_pristine=Za(()=>this.pristineReactive());pristineReactive=za(!0);get dirty(){return!this.pristine}get touched(){return Mi(this.touchedReactive)}set touched(e){Mi(()=>this.touchedReactive.set(e))}_touched=Za(()=>this.touchedReactive());touchedReactive=za(!1);get untouched(){return!this.touched}_events=new pt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(u2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(u2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(l2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(l2(e,this._rawAsyncValidators))}hasValidator(e){return Dp(this._rawValidators,e)}hasAsyncValidator(e){return Dp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ae(X({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new jl(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new jl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ae(X({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ul(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ul(!0,r))}markAsPending(e={}){this.status=pc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ae(X({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bl,this.errors=null,this._forEachChild(i=>{i.disable(Ae(X({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bp(this.value,r)),this._events.next(new gc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ae(X({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Vl,this._forEachChild(r=>{r.enable(Ae(X({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ae(X({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vl||this.status===pc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bp(this.value,t)),this._events.next(new gc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ae(X({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bl:Vl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=y2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new gc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?Bl:this.errors?Tp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pc)?pc:this._anyControlsHaveStatus(Tp)?Tp:Vl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ul(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new jl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Np(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=c9(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=l9(this._rawAsyncValidators)}};var x2=new J("",{providedIn:"root",factory:()=>z1}),z1="always";function d9(n,e){return[...e.path,n]}function f9(n,e,t=z1){p9(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),g9(n,e),v9(n,e),m9(n,e),h9(n,e)}function d2(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function h9(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function p9(n,e){let t=i9(n);e.validator!==null?n.setValidators(c2(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=o9(n);e.asyncValidator!==null?n.setAsyncValidators(c2(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();d2(e._rawValidators,i),d2(e._rawAsyncValidators,i)}function g9(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&A2(n,e)})}function m9(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&A2(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function A2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function v9(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function y9(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function _9(n){return Object.getPrototypeOf(n.constructor)===Rp}function w9(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===vc?t=o:_9(o)?r=o:i=o}),i||r||t||null}function f2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function h2(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var E9=class extends $1{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(a9(t),u9(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Np(t)&&(t.nonNullable||t.initialValueIsDefault)&&(h2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){f2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){f2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){h2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var I9={provide:Hl,useExisting:Eo(()=>Ns)},p2=Promise.resolve(),Ns=(()=>{class n extends Hl{_changeDetectorRef;callSetDisabledState;control=new E9;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Xe;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=w9(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),y9(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){f9(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){p2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&xs(r);p2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?d9(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ge(j1,9),ge(J5,10),ge(e9,10),ge($l,10),ge(Cs,8),ge(x2,8))};static \u0275dir=cn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ya([I9]),Ni,ja]})}return n})();var C9={provide:$l,useExisting:Eo(()=>D2),multi:!0};function T2(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function x9(n){return n.split(":")[0]}var D2=(()=>{class n extends Rp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=T2(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=x9(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=cn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ye("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ya([C9]),Ni]})}return n})(),Mp=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(T2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ge(tr),ge(Ri),ge(D2,9))};static \u0275dir=cn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),A9={provide:$l,useExisting:Eo(()=>_c),multi:!0};function g2(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function T9(n){return n.split(":")[0]}var _c=(()=>{class n extends Rp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=T9(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Io(n)))(i||n)}})();static \u0275dir=cn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ye("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ya([A9]),Ni]})}return n})(),Op=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(g2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(g2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ge(tr),ge(Ri),ge(_c,9))};static \u0275dir=cn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var D9=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=nr({type:n});static \u0275inj=er({})}return n})();var No=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:x2,useValue:t.callSetDisabledState??z1}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=nr({type:n});static \u0275inj=er({imports:[D9]})}return n})();function S9(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function b9(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var R9=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),S2=function(n){R9(e,n);function e(t,r){var i=this.constructor,o=n.call(this,t,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),S9(o,i.prototype),b9(o),o}return e}(Error);var N9=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),M9=function(n){N9(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(S2),tt=M9;var O9=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),P9=function(n){O9(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(tt),vt=P9;var k9=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),F9=function(n){k9(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(tt),W=F9;var L9=function(){function n(e){if(this.binarizer=e,e===null)throw new W("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var o=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(o))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),Gl=L9;var V9=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),B9=function(n){V9(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(tt),je=B9;var U9=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),q1=U9;var j9=function(){function n(){}return n.arraycopy=function(e,t,r,i,o){for(;o--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),Ie=j9;var H9=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$9=function(n){H9(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(tt),wc=$9;var G9=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),z9=function(n){G9(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(wc),K1=z9;var W9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q9=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var o=t;o<r;o++)e[o]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new W("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new K1(t);if(r>e)throw new K1(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var o=W9(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,o=new Int32Array(i);return Ie.arraycopy(e,t,o,0,i),o},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=r(t,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),We=q9;var K9=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),oe=K9;var X9=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Ie.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=r[i]}var a=i*32+oe.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=~r[i]}var a=i*32+oe.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new W;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=r;s<=i;s++){var a=s>r?0:e&31,c=s<i?31:t&31,u=(2<<c)-(1<<a);o[s]|=u}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new W;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),s=this.bits,a=i;a<=o;a++){var c=a>i?0:e&31,u=a<o?31:t&31,l=(2<<u)-(1<<c)&4294967295;if((s[a]&l)!==(r?l:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new W("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new W("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;t[r+o]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==r*32){for(var a=r*32-this.size,c=e[0]>>>a,o=1;o<r;o++){var u=e[o];c|=u<<32-a,e[o-1]=c,c=u>>>a}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&We.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+We.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),lt=X9;var b2=function(n){return n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS",n}(b2||{}),de=b2;var Y9=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Z9=function(n){Y9(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(tt),$=Z9;var Q9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ot=function(n){return n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR",n}(ot||{}),J9=function(){function n(e,t,r){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,u=0,l=c.length;u!==l;u++){var f=c[u];n.VALUES_TO_ECI.set(f,this)}try{for(var h=Q9(s),p=h.next();!p.done;p=h.next()){var m=p.value;n.NAME_TO_ECI.set(m,this)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new $("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new $("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new $("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(ot.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(ot.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(ot.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(ot.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(ot.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(ot.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(ot.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(ot.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(ot.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(ot.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(ot.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(ot.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(ot.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(ot.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(ot.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(ot.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(ot.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(ot.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(ot.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(ot.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(ot.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(ot.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(ot.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(ot.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(ot.Big5,28,"Big5"),n.GB18030=new n(ot.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(ot.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),dt=J9;var e7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),t7=function(n){e7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(tt),Ms=t7;var n7=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof dt?e:dt.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(dt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ms("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(dt.UTF8)||e.equals(dt.ISO8859_1)||e.equals(dt.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},n}(),Kt=n7;var r7=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Kt.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(de.CHARACTER_SET)!==void 0)return t.get(de.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,a=0,c=0,u=0,l=0,f=0,h=0,p=0,m=0,y=0,_=0,C=0,x=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,R=0;R<r&&(i||o||s);R++){var O=e[R]&255;s&&(a>0?(O&128)===0?s=!1:a--:(O&128)!==0&&((O&64)===0?s=!1:(a++,(O&32)===0?c++:(a++,(O&16)===0?u++:(a++,(O&8)===0?l++:s=!1))))),i&&(O>127&&O<160?i=!1:O>159&&(O<192||O===215||O===247)&&C++),o&&(f>0?O<64||O===127||O>252?o=!1:f--:O===128||O===160||O>239?o=!1:O>160&&O<224?(h++,m=0,p++,p>y&&(y=p)):O>127?(f++,p=0,m++,m>_&&(_=m)):(p=0,m=0))}return s&&a>0&&(s=!1),o&&f>0&&(o=!1),s&&(x||c+u+l>0)?n.UTF8:o&&(n.ASSUME_SHIFT_JIS||y>=3||_>=3)?n.SHIFT_JIS:i&&o?y===2&&h===2||C*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:o?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function o(a,c,u,l,f,h){if(a==="%%")return"%";if(t[++i]!==void 0){a=l?parseInt(l.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,m;switch(h){case"s":m=t[i];break;case"c":m=t[i][0];break;case"f":m=parseFloat(t[i]).toFixed(a);break;case"p":m=parseFloat(t[i]).toPrecision(a);break;case"e":m=parseFloat(t[i]).toExponential(a);break;case"x":m=parseInt(t[i]).toString(p||16);break;case"d":m=parseFloat(parseInt(t[i],p||10).toPrecision(a)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(p);for(var y=parseInt(u),_=u&&u[0]+""=="0"?"0":" ";m.length<y;)m=c!==void 0?m+_:_+m;return m}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},n.getBytes=function(e,t){return Kt.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=dt.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=dt.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=dt.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),fe=r7;var i7=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=fe.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),te=i7;var o7=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new W("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),o=0;o<t;o++)for(var s=e[o],a=0;a<r;a++)s[a]&&i.set(a,o);return i},n.parseFromString=function(e,t,r){if(e===null)throw new W("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new W("row lengths do not match");s=o,c++}u++}else if(e.substring(u,u+t.length)===t)u+=t.length,i[o]=!0,o++;else if(e.substring(u,u+r.length)===r)u+=r.length,i[o]=!1,o++;else throw new W("illegal character encountered: "+e.substring(u));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new W("row lengths do not match");c++}for(var l=new n(a,c),f=0;f<o;f++)i[f]&&l.set(Math.floor(f%a),Math.floor(f/a));return l},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new W("input matrix dimensions do not match");for(var t=new lt(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*r,c=e.getRow(o,t).getBitArray(),u=0;u<r;u++)i[a+u]^=c[u]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new W("Left and top must be nonnegative");if(i<1||r<1)throw new W("Height and width must be at least 1");var o=e+r,s=t+i;if(s>this.height||o>this.width)throw new W("The region must fit inside the matrix");for(var a=this.rowSize,c=this.bits,u=t;u<s;u++)for(var l=u*a,f=e;f<o;f++)c[l+Math.floor(f/32)]|=1<<(f&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new lt(this.width):t.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)t.setBulk(s*32,i[o+s]);return t},n.prototype.setRow=function(e,t){Ie.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new lt(e),i=new lt(e),o=0,s=Math.floor((t+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(t-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,o=e,s=t,a=-1,c=-1,u=0;u<t;u++)for(var l=0;l<r;l++){var f=i[u*r+l];if(f!==0){if(u<s&&(s=u),u>c&&(c=u),l*32<o){for(var h=0;(f<<31-h&4294967295)===0;)h++;l*32+h<o&&(o=l*32+h)}if(l*32+31>a){for(var h=31;!(f>>>h);)h--;l*32+h>a&&(a=l*32+h)}}}return a<o||c<s?null:Int32Array.from([o,s,a-o+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,o=r%e*32,s=t[r],a=0;(s<<31-a&4294967295)===0;)a++;return o+=a,Int32Array.from([o,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=t[r],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&We.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+We.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new te,o=0,s=this.height;o<s;o++){for(var a=0,c=this.width;a<c;a++)i.append(this.get(a,o)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),ft=o7;var s7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),a7=function(n){s7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(tt),P=a7;var c7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),u7=function(n){c7(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new lt(o):r.clear(),this.initArrays(o);for(var s=i.getRow(t,this.luminances),a=this.buckets,c=0;c<o;c++)a[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(a);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<u&&r.set(c);else for(var l=s[0]&255,f=s[1]&255,c=1;c<o-1;c++){var h=s[c+1]&255;(f*4-l-h)/2<u&&r.set(c),l=f,f=h}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new ft(r,i);this.initArrays(r);for(var s=this.buckets,a=1;a<5;a++)for(var c=Math.floor(i*a/5),u=t.getRow(c,this.luminances),l=Math.floor(r*4/5),f=Math.floor(r/5);f<l;f++){var h=u[f]&255;s[h>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(s),m=t.getMatrix(),a=0;a<i;a++)for(var y=a*r,f=0;f<r;f++){var h=m[y+f]&255;h<p&&o.set(f,a)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,o=0,s=0,a=0;a<r;a++)t[a]>s&&(o=a,s=t[a]),t[a]>i&&(i=t[a]);for(var c=0,u=0,a=0;a<r;a++){var l=a-o,f=t[a]*l*l;f>u&&(c=a,u=f)}if(o>c){var h=o;o=c,c=h}if(c-o<=r/16)throw new P;for(var p=c-1,m=-1,a=c-1;a>o;a--){var y=a-o,f=y*y*(c-a)*(i-t[a]);f>m&&(p=a,m=f)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(q1),X1=u7;var l7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),d7=function(n){l7(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var a=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&a++;var c=e.calculateBlackPoints(o,s,a,r,i),u=new ft(r,i);e.calculateThresholdForBlock(o,s,a,r,i,c,u),this.matrix=u}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,o,s,a,c){for(var u=s-e.BLOCK_SIZE,l=o-e.BLOCK_SIZE,f=0;f<i;f++){var h=f<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var p=e.cap(f,2,i-3),m=0;m<r;m++){var y=m<<e.BLOCK_SIZE_POWER;y>l&&(y=l);for(var _=e.cap(m,2,r-3),C=0,x=-2;x<=2;x++){var R=a[p+x];C+=R[_-2]+R[_-1]+R[_]+R[_+1]+R[_+2]}var O=C/25;e.thresholdBlock(t,y,h,O,o,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,o,s,a){for(var c=0,u=i*s+r;c<e.BLOCK_SIZE;c++,u+=s)for(var l=0;l<e.BLOCK_SIZE;l++)(t[u+l]&255)<=o&&a.set(r+l,i+c)},e.calculateBlackPoints=function(t,r,i,o,s){for(var a=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,u=new Array(i),l=0;l<i;l++){u[l]=new Int32Array(r);var f=l<<e.BLOCK_SIZE_POWER;f>a&&(f=a);for(var h=0;h<r;h++){var p=h<<e.BLOCK_SIZE_POWER;p>c&&(p=c);for(var m=0,y=255,_=0,C=0,x=f*o+p;C<e.BLOCK_SIZE;C++,x+=o){for(var R=0;R<e.BLOCK_SIZE;R++){var O=t[x+R]&255;m+=O,O<y&&(y=O),O>_&&(_=O)}if(_-y>e.MIN_DYNAMIC_RANGE)for(C++,x+=o;C<e.BLOCK_SIZE;C++,x+=o)for(var R=0;R<e.BLOCK_SIZE;R++)m+=t[x+R]&255}var V=m>>e.BLOCK_SIZE_POWER*2;if(_-y<=e.MIN_DYNAMIC_RANGE&&(V=y/2,l>0&&h>0)){var U=(u[l-1][h]+2*u[l][h-1]+u[l-1][h-1])/4;y<U&&(V=U)}u[l][h]=V}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(X1),zl=d7;var f7=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Ms("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Ms("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Ms("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new te,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",t.append(a)}t.append(`
`)}return t.toString()},n}(),br=f7;var h7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),p7=function(n){h7(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,o){return new e(this.delegate.crop(t,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(br),Li=p7;var g7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),R2=function(n){g7(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var a=0,c=0,u=t.length;a<u;a+=4,c++){var l=void 0,f=t[a+3];if(f===0)l=255;else{var h=t[a],p=t[a+1],m=t[a+2];l=306*h+601*p+117*m+512>>10}s[c]=l}else for(var a=0,c=0,y=t.length;a<y;a+=4,c++){var l=void 0,f=t[a+3];if(f===0)l=255;else{var h=t[a],p=t[a+1],m=t[a+2];l=306*h+601*p+117*m+512>>10}s[c]=255-l}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new W("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),u=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return r.width=c,r.height=u,i.translate(c/2,u/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Li(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(br);var N2=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}();var Pn=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})},kn=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(l){u=[6,l],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},m7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pr=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Pn(this,void 0,void 0,function(){var e,t,r,i,o,s,a,c,u,l,f,h;return kn(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),t=[];try{for(r=m7(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device "+(t.length+1),u=o.groupId,l={deviceId:a,label:c,kind:s,groupId:u},t.push(l))}catch(m){f={error:m}}finally{try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(f)throw f.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Pn(this,void 0,void 0,function(){var e;return kn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new N2(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Pn(this,void 0,void 0,function(){var t;return kn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Pn(this,void 0,void 0,function(){return kn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Pn(this,void 0,void 0,function(){var r,i;return kn(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Pn(this,void 0,void 0,function(){var r;return kn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Pn(this,void 0,void 0,function(){var r,i;return kn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Pn(this,void 0,void 0,function(){return kn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Pn(this,void 0,void 0,function(){var i,o;return kn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Pn(this,void 0,void 0,function(){var i;return kn(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Pn(this,void 0,void 0,function(){var i;return kn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Pn(this,void 0,void 0,function(){var r;return kn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Pn(this,void 0,void 0,function(){var t;return kn(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new vt("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new vt("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new vt("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new vt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new vt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new vt("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new vt("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new vt("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new vt("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new vt("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Pn(this,void 0,void 0,function(){return kn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Pn(this,void 0,void 0,function(){return kn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new P("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(h){var u=t&&h instanceof P,l=h instanceof je||h instanceof $,f=l&&r;if(u||f)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(h)}};return new Promise(function(s,a){return o(s,a)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);t(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof je||c instanceof $,a=c instanceof P;(s||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){var t=this.getCaptureCanvasContext(e),r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var i=this.getCaptureCanvas(e),o=new R2(i,r),s=new zl(o);return new Gl(s)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}();var v7=function(){function n(e,t,r,i,o,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=Ie.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=Ie.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Ie.arraycopy(t,0,r,0,t.length),Ie.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),Ge=v7;var M2=function(n){return n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",n}(M2||{}),K=M2;var O2=function(n){return n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",n}(O2||{}),gt=O2;var y7=function(){function n(e,t,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Vi=y7;var _7=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new W;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),Os=_7;var w7=function(){function n(e,t){if(t.length===0)throw new W;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Ie.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,o=t.length;i!==o;i++){var s=t[i];r=Os.addOrSubtract(r,s)}return r}r=t[0];for(var a=t.length,c=this.field,i=1;i<a;i++)r=Os.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new W("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;Ie.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=Os.addOrSubtract(t[a-s],r[a]);return new n(this.field,o)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new W("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=this.field,c=0;c<r;c++)for(var u=t[c],l=0;l<o;l++)s[c+l]=Os.addOrSubtract(s[c+l],a.multiply(u,i[l]));return new n(a,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),o=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(o[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new W;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(r[a],t);return new n(s,o)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new W("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new W("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),u=e.multiplyByMonomial(a,c),l=t.buildMonomial(a,c);r=r.addOrSubtract(l),i=i.addOrSubtract(u)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),gr=w7;var E7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),I7=function(n){E7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(tt),Wl=I7;var C7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),x7=function(n){C7(e,n);function e(t,r,i){var o=n.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),a=1,c=0;c<r;c++)s[c]=a,a*=2,a>=r&&(a^=t,a&=r-1);o.expTable=s;for(var u=new Int32Array(r),c=0;c<r-1;c++)u[s[c]]=c;return o.logTable=u,o.zero=new gr(o,Int32Array.from([0])),o.one=new gr(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new W;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new gr(this,i)},e.prototype.inverse=function(t){if(t===0)throw new Wl;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+oe.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Os),St=x7;var A7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),T7=function(n){A7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(tt),Ec=T7;var D7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),S7=function(n){D7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(tt),Ot=S7;var b7=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new gr(r,e),o=new Int32Array(t),s=!0,a=0;a<t;a++){var c=i.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=c,c!==0&&(s=!1)}if(!s)for(var u=new gr(r,o),l=this.runEuclideanAlgorithm(r.buildMonomial(t,1),u,t),f=l[0],h=l[1],p=this.findErrorLocations(f),m=this.findErrorMagnitudes(h,p),a=0;a<p.length;a++){var y=e.length-1-r.log(p[a]);if(y<0)throw new Ec("Bad error location");e[y]=St.addOrSubtract(e[y],m[a])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,s=e,a=t,c=o.getZero(),u=o.getOne();a.getDegree()>=(r/2|0);){var l=s,f=c;if(s=a,c=u,s.isZero())throw new Ec("r_{i-1} was zero");a=l;for(var h=o.getZero(),p=s.getCoefficient(s.getDegree()),m=o.inverse(p);a.getDegree()>=s.getDegree()&&!a.isZero();){var y=a.getDegree()-s.getDegree(),_=o.multiply(a.getCoefficient(a.getDegree()),m);h=h.addOrSubtract(o.buildMonomial(y,_)),a=a.addOrSubtract(s.multiplyByMonomial(y,_))}if(u=h.multiply(c).addOrSubtract(f),a.getDegree()>=s.getDegree())throw new Ot("Division algorithm failed to reduce polynomial?")}var C=u.getCoefficient(0);if(C===0)throw new Ec("sigmaTilde(0) was zero");var x=o.inverse(C),R=u.multiplyScalar(x),O=a.multiplyScalar(x);return[R,O]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,o=this.field,s=1;s<o.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==t)throw new Ec("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var a=o.inverse(t[s]),c=1,u=0;u<r;u++)if(s!==u){var l=o.multiply(t[u],a),f=(l&1)===0?l|1:l&-2;c=o.multiply(c,f)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},n}(),Bi=b7;var xn=function(n){return n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY",n}(xn||{}),R7=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),o=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),a=new Vi(o,s,null,null);return a.setNumBits(i.length),a},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=xn.UPPER,i=xn.UPPER,o="",s=0;s<t;)if(i===xn.BINARY){if(t-s<5)break;var a=n.readCode(e,s,5);if(s+=5,a===0){if(t-s<11)break;a=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<a;c++){if(t-s<8){s=t;break}var u=n.readCode(e,s,8);o+=fe.castAsNonUtf8Char(u),s+=8}i=r}else{var l=i===xn.DIGIT?4:5;if(t-s<l)break;var u=n.readCode(e,s,l);s+=l;var f=n.getCharacter(i,u);f.startsWith("CTRL_")?(r=i,i=n.getTable(f.charAt(5)),f.charAt(6)==="L"&&(r=i)):(o+=f,i=r)}return o},n.getTable=function(e){switch(e){case"L":return xn.LOWER;case"P":return xn.PUNCT;case"M":return xn.MIXED;case"D":return xn.DIGIT;case"B":return xn.BINARY;case"U":default:return xn.UPPER}},n.getCharacter=function(e,t){switch(e){case xn.UPPER:return n.UPPER_TABLE[t];case xn.LOWER:return n.LOWER_TABLE[t];case xn.MIXED:return n.MIXED_TABLE[t];case xn.PUNCT:return n.PUNCT_TABLE[t];case xn.DIGIT:return n.DIGIT_TABLE[t];default:throw new Ot("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=St.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=St.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=St.AZTEC_DATA_10):(r=12,t=St.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new $;for(var s=e.length%r,a=new Int32Array(o),c=0;c<o;c++,s+=r)a[c]=n.readCode(e,s,r);try{var u=new Bi(t);u.decode(a,o-i)}catch(_){throw new $(_)}for(var l=(1<<r)-1,f=0,c=0;c<i;c++){var h=a[c];if(h===0||h===l)throw new $;(h===1||h===l-1)&&f++}for(var p=new Array(i*r-f),m=0,c=0;c<i;c++){var h=a[c];if(h===1||h===l-1)p.fill(h>1,m,m+r-1),m+=r-1;else for(var y=r-1;y>=0;--y)p[m++]=(h&1<<y)!==0}return p},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var a=0;a<o.length;a++)o[a]=a;else for(var c=i+1+2*oe.truncDivision(oe.truncDivision(i,2)-1,15),u=i/2,l=oe.truncDivision(c,2),a=0;a<u;a++){var f=a+oe.truncDivision(a,15);o[u-a-1]=l-f-1,o[u+a]=l+f+1}for(var a=0,h=0;a<r;a++){for(var p=(r-a)*4+(t?9:12),m=a*2,y=i-1-m,_=0;_<p;_++)for(var C=_*2,x=0;x<2;x++)s[h+C+x]=e.get(o[m+x],o[m+_]),s[h+2*p+C+x]=e.get(o[m+_],o[y-x]),s[h+4*p+C+x]=e.get(o[y-x],o[y-_]),s[h+6*p+C+x]=e.get(o[y-_],o[m+x]);h+=p*8}return s},n.readCode=function(e,t,r){for(var i=0,o=t;o<t+r;o++)i<<=1,e[o]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),Pp=R7;var N7=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var o=e-r,s=t-i;return Math.sqrt(o*o+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var o=e[r];t+=o}return t},n}(),Ce=N7;var M7=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),ql=M7;var O7=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*ql.floatToIntBits(this.x)+ql.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(r>=t&&r>=i?(s=e[0],o=e[1],a=e[2]):i>=r&&i>=t?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var c=o;o=a,a=c}e[0]=o,e[1]=s,e[2]=a},n.distance=function(e,t){return Ce.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,o=t.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},n}(),Y=O7;var P7=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Ps=P7;var k7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),F7=function(n){k7(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Ps),Y1=F7;var L7=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new P}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,c=!1,u=!1,l=!1,f=!1,h=this.width,p=this.height;s;){s=!1;for(var m=!0;(m||!c)&&t<h;)m=this.containsBlackPoint(r,i,t,!1),m?(t++,s=!0,c=!0):c||t++;if(t>=h){o=!0;break}for(var y=!0;(y||!u)&&i<p;)y=this.containsBlackPoint(e,t,i,!0),y?(i++,s=!0,u=!0):u||i++;if(i>=p){o=!0;break}for(var _=!0;(_||!l)&&e>=0;)_=this.containsBlackPoint(r,i,e,!1),_?(e--,s=!0,l=!0):l||e--;if(e<0){o=!0;break}for(var C=!0;(C||!f)&&r>=0;)C=this.containsBlackPoint(e,t,r,!0),C?(r--,s=!0,f=!0):f||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var x=t-e,R=null,O=1;R===null&&O<x;O++)R=this.getBlackPointOnSegment(e,i-O,e+O,i);if(R==null)throw new P;for(var V=null,O=1;V===null&&O<x;O++)V=this.getBlackPointOnSegment(e,r+O,e+O,r);if(V==null)throw new P;for(var U=null,O=1;U===null&&O<x;O++)U=this.getBlackPointOnSegment(t,r+O,t-O,r);if(U==null)throw new P;for(var A=null,O=1;A===null&&O<x;O++)A=this.getBlackPointOnSegment(t,i-O,t-O,i);if(A==null)throw new P;return this.centerEdges(A,R,U,V)}else throw new P},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var o=Ce.round(Ce.distance(e,t,r,i)),s=(r-e)/o,a=(i-t)/o,c=this.image,u=0;u<o;u++){var l=Ce.round(e+u*s),f=Ce.round(t+u*a);if(c.get(l,f))return new Y(l,f)}return null},n.prototype.centerEdges=function(e,t,r,i){var o=e.getX(),s=e.getY(),a=t.getX(),c=t.getY(),u=r.getX(),l=r.getY(),f=i.getX(),h=i.getY(),p=n.CORR;return o<this.width/2?[new Y(f-p,h+p),new Y(a+p,c+p),new Y(u-p,l-p),new Y(o+p,s-p)]:[new Y(f+p,h+p),new Y(a+p,c-p),new Y(u-p,l+p),new Y(o-p,s-p)]},n.prototype.containsBlackPoint=function(e,t,r,i){var o=this.image;if(i){for(var s=e;s<=t;s++)if(o.get(s,r))return!0}else for(var a=e;a<=t;a++)if(o.get(r,a))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),Ic=L7;var V7=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<t.length&&o;s+=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>r||c<-1||c>i)throw new P;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}o=!0;for(var s=t.length-2;s>=0&&o;s-=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>r||c<-1||c>i)throw new P;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}},n}(),kp=V7;var B7=function(){function n(e,t,r,i,o,s,a,c,u){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=c,this.a33=u}return n.quadrilateralToQuadrilateral=function(e,t,r,i,o,s,a,c,u,l,f,h,p,m,y,_){var C=n.quadrilateralToSquare(e,t,r,i,o,s,a,c),x=n.squareToQuadrilateral(u,l,f,h,p,m,y,_);return x.times(C)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,u=this.a31,l=this.a32,f=this.a33,h=0;h<t;h+=2){var p=e[h],m=e[h+1],y=o*p+c*m+f;e[h]=(r*p+s*m+u)/y,e[h+1]=(i*p+a*m+l)/y}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,u=this.a31,l=this.a32,f=this.a33,h=e.length,p=0;p<h;p++){var m=e[p],y=t[p],_=o*m+c*y+f;e[p]=(r*m+s*y+u)/_,t[p]=(i*m+a*y+l)/_}},n.squareToQuadrilateral=function(e,t,r,i,o,s,a,c){var u=e-r+o-a,l=t-i+s-c;if(u===0&&l===0)return new n(r-e,o-r,e,i-t,s-i,t,0,0,1);var f=r-o,h=a-o,p=i-s,m=c-s,y=f*m-h*p,_=(u*m-h*l)/y,C=(f*l-u*p)/y;return new n(r-e+_*r,a-e+C*a,e,i-t+_*i,c-t+C*c,t,_,C,1)},n.quadrilateralToSquare=function(e,t,r,i,o,s,a,c){return n.squareToQuadrilateral(e,t,r,i,o,s,a,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),Kl=B7;var U7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),j7=function(n){U7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,o,s,a,c,u,l,f,h,p,m,y,_,C,x,R,O){var V=Kl.quadrilateralToQuadrilateral(o,s,a,c,u,l,f,h,p,m,y,_,C,x,R,O);return this.sampleGridWithTransform(t,r,i,V)},e.prototype.sampleGridWithTransform=function(t,r,i,o){if(r<=0||i<=0)throw new P;for(var s=new ft(r,i),a=new Float32Array(2*r),c=0;c<i;c++){for(var u=a.length,l=c+.5,f=0;f<u;f+=2)a[f]=f/2+.5,a[f+1]=l;o.transformPoints(a),kp.checkAndNudgePoints(t,a);try{for(var f=0;f<u;f+=2)t.get(Math.floor(a[f]),Math.floor(a[f+1]))&&s.set(f/2,c)}catch{throw new P}}return s},e}(kp),Z1=j7;var H7=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new Z1,n}(),ks=H7;var Fn=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Y(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}();var $7=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new Y1(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new P;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(o,s,a){var c=(o>>t-2<<1)+(o&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(oe.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new P},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),a=r-1;a>=0;--a)s[a]=e&15,e>>=4;try{var c=new Bi(St.AZTEC_PARAM);c.decode(s,o)}catch{throw new P}for(var u=0,a=0;a<i;a++)u=(u<<4)+s[a];return u},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),u=this.getFirstDifferent(i,s,-1,1),l=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(l,a)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(a,c,u,l))break}t=a,r=c,i=u,o=l,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new P;this.compact=this.nbCenterLayers===5;var h=new Y(t.getX()+.5,t.getY()-.5),p=new Y(r.getX()+.5,r.getY()+.5),m=new Y(i.getX()-.5,i.getY()+.5),y=new Y(o.getX()-.5,o.getY()-.5);return this.expandSquare([h,p,m,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var o=new Ic(this.image).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new Fn(s+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Fn(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Fn(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Fn(s-7,a-7),!1,-1,-1).toResultPoint()}var c=Ce.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=Ce.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var o=new Ic(this.image,15,c,u).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new Fn(c+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Fn(c+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Fn(c-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Fn(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Ce.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=Ce.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Fn(c,u)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,o){var s=ks.getInstance(),a=this.getDimension(),c=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,c,c,u,c,u,u,c,u,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,o=this.distanceResultPoint(e,t),s=o/r,a=e.getX(),c=e.getY(),u=s*(t.getX()-e.getX())/o,l=s*(t.getY()-e.getY())/o,f=0;f<r;f++)this.image.get(Ce.round(a+f*u),Ce.round(c+f*l))&&(i|=1<<r-f-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var o=3;e=new Fn(e.getX()-o,e.getY()+o),t=new Fn(t.getX()-o,t.getY()-o),r=new Fn(r.getX()+o,r.getY()-o),i=new Fn(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,t);return a!==s||(a=this.getColor(t,r),a!==s)?!1:(a=this.getColor(r,i),a===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,s=0,a=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),l=Math.ceil(r),f=0;f<l;f++)a+=i,c+=o,this.image.get(Ce.round(a),Ce.round(c))!==u&&s++;var h=s/r;return h>.1&&h<.9?0:h<=.1===u?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=i;return s-=i,new Fn(o,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new Y(a+i*o,c+i*s),l=new Y(a-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new Y(a+i*o,c+i*s),h=new Y(a-i*o,c-i*s),p=[u,f,l,h];return p},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=Ce.round(e.getX()),r=Ce.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return Ce.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return Ce.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(oe.truncDivision(this.nbLayers-4,8)+1)+15},n}(),Q1=$7;var G7=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new Q1(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new Pp().decode(a)}catch(f){r=f}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new Pp().decode(a)}catch(f){throw r??f}var c=new Ge(s.getText(),s.getRawBytes(),s.getNumBits(),o,K.AZTEC,Ie.currentTimeMillis()),u=s.getByteSegments();u!=null&&c.putMetadata(gt.BYTE_SEGMENTS,u);var l=s.getECLevel();return l!=null&&c.putMetadata(gt.ERROR_CORRECTION_LEVEL,l),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(de.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),Mo=G7;var z7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zue=function(n){z7(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Mo,t)||this}return e}(pr);var W7=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(de.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),a=270;s!==null&&s.get(gt.ORIENTATION)===!0&&(a=a+s.get(gt.ORIENTATION)%360),o.putMetadata(gt.ORIENTATION,a);var c=o.getResultPoints();if(c!==null)for(var u=i.getHeight(),l=0;l<c.length;l++)c[l]=new Y(u-c[l].getY()-1,c[l].getX());return o}else throw new P}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),o=new lt(r),s=t&&t.get(de.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var u=Math.trunc(i/2),l=0;l<c;l++){var f=Math.trunc((l+1)/2),h=(l&1)===0,p=u+a*(h?f:-f);if(p<0||p>=i)break;try{o=e.getBlackRow(p,o)}catch{continue}for(var m=function(x){if(x===1&&(o.reverse(),t&&t.get(de.NEED_RESULT_POINT_CALLBACK)===!0)){var R=new Map;t.forEach(function(U,A){return R.set(A,U)}),R.delete(de.NEED_RESULT_POINT_CALLBACK),t=R}try{var O=y.decodeRow(p,o,t);if(x===1){O.putMetadata(gt.ORIENTATION,180);var V=O.getResultPoints();V!==null&&(V[0]=new Y(r-V[0].getX()-1,V[0].getY()),V[1]=new Y(r-V[1].getX()-1,V[1].getY()))}return{value:O}}catch{}},y=this,_=0;_<2;_++){var C=m(_);if(typeof C=="object")return C.value}}throw new P},n.recordPattern=function(e,t,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(t>=s)throw new P;for(var a=!e.get(t),c=0,u=t;u<s;){if(e.get(u)!==a)r[c]++;else{if(++c===i)break;r[c]=1,a=!a}u++}if(!(c===i||c===i-1&&u===s))throw new P},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new P;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;r*=c;for(var u=0,l=0;l<i;l++){var f=e[l],h=t[l]*c,p=f>h?f-h:h-f;if(p>r)return Number.POSITIVE_INFINITY;u+=p}return u/o},n}(),Qe=W7;var q7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),K7=function(n){q7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,c=!1,u=6,l=i;l<r;l++)if(t.get(l)!==c)s[o]++;else{if(o===u-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var m=Qe.patternMatchVariance(s,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,h=p)}if(h>=0&&t.isRange(Math.max(0,a-(l-a)/2),a,!1))return Int32Array.from([a,l,h]);a+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new P},e.decodeCode=function(t,r,i){Qe.recordPattern(t,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var c=e.CODE_PATTERNS[a],u=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);u<o&&(o=u,s=a)}if(s>=0)return s;throw new P},e.prototype.decodeRow=function(t,r,i){var o=i&&i.get(de.ASSUME_GS1)===!0,s=e.findStartPattern(r),a=s[2],c=0,u=new Uint8Array(20);u[c++]=a;var l;switch(a){case e.CODE_START_A:l=e.CODE_CODE_A;break;case e.CODE_START_B:l=e.CODE_CODE_B;break;case e.CODE_START_C:l=e.CODE_CODE_C;break;default:throw new $}for(var f=!1,h=!1,p="",m=s[0],y=s[1],_=Int32Array.from([0,0,0,0,0,0]),C=0,x=0,R=a,O=0,V=!0,U=!1,A=!1;!f;){var E=h;switch(h=!1,C=x,x=e.decodeCode(r,_,y),u[c++]=x,x!==e.CODE_STOP&&(V=!0),x!==e.CODE_STOP&&(O++,R+=O*x),m=y,y+=_.reduce(function(hi,pi){return hi+pi},0),x){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new $}switch(l){case e.CODE_CODE_A:if(x<64)A===U?p+=String.fromCharCode(32+x):p+=String.fromCharCode(32+x+128),A=!1;else if(x<96)A===U?p+=String.fromCharCode(x-64):p+=String.fromCharCode(x+64),A=!1;else switch(x!==e.CODE_STOP&&(V=!1),x){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!U&&A?(U=!0,A=!1):U&&A?(U=!1,A=!1):A=!0;break;case e.CODE_SHIFT:h=!0,l=e.CODE_CODE_B;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(x<96)A===U?p+=String.fromCharCode(32+x):p+=String.fromCharCode(32+x+128),A=!1;else switch(x!==e.CODE_STOP&&(V=!1),x){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!U&&A?(U=!0,A=!1):U&&A?(U=!1,A=!1):A=!0;break;case e.CODE_SHIFT:h=!0,l=e.CODE_CODE_A;break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(x<100)x<10&&(p+="0"),p+=x;else switch(x!==e.CODE_STOP&&(V=!1),x){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}E&&(l=l===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var T=y-m;if(y=r.getNextUnset(y),!r.isRange(y,Math.min(r.getSize(),y+(y-m)/2),!1))throw new P;if(R-=O*C,R%103!==C)throw new je;var S=p.length;if(S===0)throw new P;S>0&&V&&(l===e.CODE_CODE_C?p=p.substring(0,S-2):p=p.substring(0,S-1));for(var N=(s[1]+s[0])/2,M=m+T/2,D=u.length,xt=new Uint8Array(D),jn=0;jn<D;jn++)xt[jn]=u[jn];var wu=[new Y(N,t),new Y(M,t)];return new Ge(p,xt,0,wu,K.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Qe),Fp=K7;var X7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),J1=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y7=function(n){X7(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.counters;u.fill(0),this.decodeRowResult="";var l=e.findAsteriskPattern(r,u),f=r.getNextSet(l[1]),h=r.getSize(),p,m;do{e.recordPattern(r,f,u);var y=e.toNarrowWidePattern(u);if(y<0)throw new P;p=e.patternToChar(y),this.decodeRowResult+=p,m=f;try{for(var _=(o=void 0,J1(u)),C=_.next();!C.done;C=_.next()){var x=C.value;f+=x}}catch(D){o={error:D}}finally{try{C&&!C.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}f=r.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var O=J1(u),V=O.next();!V.done;V=O.next()){var x=V.value;R+=x}}catch(D){a={error:D}}finally{try{V&&!V.done&&(c=O.return)&&c.call(O)}finally{if(a)throw a.error}}var U=f-m-R;if(f!==h&&U*2<R)throw new P;if(this.usingCheckDigit){for(var A=this.decodeRowResult.length-1,E=0,T=0;T<A;T++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(T));if(this.decodeRowResult.charAt(A)!==e.ALPHABET_STRING.charAt(E%43))throw new je;this.decodeRowResult=this.decodeRowResult.substring(0,A)}if(this.decodeRowResult.length===0)throw new P;var S;this.extendedMode?S=e.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;var N=(l[1]+l[0])/2,M=m+R/2;return new Ge(S,null,0,[new Y(N,t),new Y(M,t)],K.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),o=t.getNextSet(0),s=0,a=o,c=!1,u=r.length,l=o;l<i;l++)if(t.get(l)!==c)r[s]++;else{if(s===u-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,a-Math.floor((l-a)/2)),a,!1))return[a,l];a+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new P},e.toNarrowWidePattern=function(t){var r,i,o=t.length,s=0,a;do{var c=2147483647;try{for(var u=(r=void 0,J1(t)),l=u.next();!l.done;l=u.next()){var f=l.value;f<c&&f>s&&(c=f)}}catch(y){r={error:y}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s=c,a=0;for(var h=0,p=0,m=0;m<o;m++){var f=t[m];f>s&&(p|=1<<o-1-m,a++,h+=f)}if(a===3){for(var m=0;m<o&&a>0;m++){var f=t[m];if(f>s&&(a--,f*2>=h))return-1}return p}}while(a>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new P},e.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=t.charAt(o+1),c="\0";switch(s){case"+":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new $;break;case"$":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new $;break;case"%":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a==="X"||a==="Y"||a==="Z")c="\x7F";else throw new $;break;case"/":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new $;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Qe),Lp=Y7;var Z7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),e_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q7=function(n){Z7(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.findAsteriskPattern(r),l=r.getNextSet(u[1]),f=r.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var p,m;do{e.recordPattern(r,l,h);var y=this.toPattern(h);if(y<0)throw new P;p=this.patternToChar(y),this.decodeRowResult+=p,m=l;try{for(var _=(o=void 0,e_(h)),C=_.next();!C.done;C=_.next()){var x=C.value;l+=x}}catch(T){o={error:T}}finally{try{C&&!C.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}l=r.getNextSet(l)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var O=e_(h),V=O.next();!V.done;V=O.next()){var x=V.value;R+=x}}catch(T){a={error:T}}finally{try{V&&!V.done&&(c=O.return)&&c.call(O)}finally{if(a)throw a.error}}if(l===f||!r.get(l))throw new P;if(this.decodeRowResult.length<2)throw new P;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var U=this.decodeExtended(this.decodeRowResult),A=(u[1]+u[0])/2,E=m+R/2;return new Ge(U,null,0,[new Y(A,t),new Y(E,t)],K.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,c=o.length,u=0,l=i;l<r;l++)if(t.get(l)!==a)o[u]++;else{if(u===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,l]);s+=o[0]+o[1],o.copyWithin(0,2,2+u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,a=!a}throw new P},e.prototype.toPattern=function(t){var r,i,o=0;try{for(var s=e_(t),a=s.next();!a.done;a=s.next()){var c=a.value;o+=c}}catch(m){r={error:m}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var u=0,l=t.length,f=0;f<l;f++){var h=Math.round(t[f]*9/o);if(h<1||h>4)return-1;if((f&1)===0)for(var p=0;p<h;p++)u=u<<1|1;else u<<=h}return u},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new P},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new $;var a=t.charAt(o+1),c="\0";switch(s){case"d":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new $;break;case"a":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new $;break;case"b":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a>="X"&&a<="Z")c="\x7F";else throw new $;break;case"c":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new $;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var o=1,s=0,a=r-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(t.charAt(a)),++o>i&&(o=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new je},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Qe),Vp=Q7;var J7=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tU=function(n){J7(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var o,s,a=this.decodeStart(r),c=this.decodeEnd(r),u=new te;e.decodeMiddle(r,a[1],c[0],u);var l=u.toString(),f=null;i!=null&&(f=i.get(de.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=l.length,p=!1,m=0;try{for(var y=eU(f),_=y.next();!_.done;_=y.next()){var C=_.value;if(h===C){p=!0;break}C>m&&(m=C)}}catch(O){o={error:O}}finally{try{_&&!_.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}if(!p&&h>m&&(p=!0),!p)throw new $;var x=[new Y(a[1],t),new Y(c[0],t)],R=new Ge(l,null,0,x,K.ITF,new Date().getTime());return R},e.decodeMiddle=function(t,r,i,o){var s=new Int32Array(10),a=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),a.fill(0),c.fill(0);r<i;){Qe.recordPattern(t,r,s);for(var u=0;u<5;u++){var l=2*u;a[u]=s[l],c[u]=s[l+1]}var f=e.decodeDigit(a);o.append(f.toString()),f=this.decodeDigit(c),o.append(f.toString()),s.forEach(function(h){r+=h})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new P},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new P;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof P&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var o=i.length,s=new Int32Array(o),a=t.getSize(),c=!1,u=0,l=r;s.fill(0);for(var f=r;f<a;f++)if(t.get(f)!==c)s[u]++;else{if(u===o-1){if(Qe.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[l,f];l+=s[0]+s[1],Ie.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,c=!c}throw new P},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],c=Qe.patternMatchVariance(t,a,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new P},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Qe),Bp=tU;var nU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rU=function(n){nU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var c=a-(o-a);c>=0&&(r=t.isRange(c,a,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new $;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new $;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,r,i,o,s){var a=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,u=r,l=o.length,f=i,h=r;h<a;h++)if(t.get(h)!==f)s[c]++;else{if(c===l-1){if(Qe.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=s[0]+s[1];for(var p=s.slice(2,s.length),m=0;m<c-1;m++)s[m]=p[m];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,f=!f}throw new P},e.decodeDigit=function(t,r,i,o){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,a=-1,c=o.length,u=0;u<c;u++){var l=o[u],f=Qe.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);f<s&&(s=f,a=u)}if(a>=0)return a;throw new P},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Qe),ei=rU;var iU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oU=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),c=[new Y((r[0]+r[1])/2,e),new Y(o,e)],u=new Ge(s,null,0,c,K.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],u=0,l=0;l<5&&c<a;l++){var f=ei.decodeDigit(e,s,c,ei.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,iU(s)),p=h.next();!p.done;p=h.next()){var m=p.value;c+=m}}catch(_){i={error:_}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(u|=1<<4-l),l!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new P;var y=this.determineCheckDigit(u);if(n.extensionChecksum(r.toString())!==y)throw new P;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new P},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[gt.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="\xA3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return t+i+"."+s},n}(),P2=oU;var sU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aU=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),c=[new Y((r[0]+r[1])/2,e),new Y(o,e)],u=new Ge(s,null,0,c,K.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],u=0,l=0;l<2&&c<a;l++){var f=ei.decodeDigit(e,s,c,ei.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,sU(s)),p=h.next();!p.done;p=h.next()){var m=p.value;c+=m}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(u|=1<<1-l),l!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new P;if(parseInt(r.toString())%4!==u)throw new P;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[gt.ISSUE_NUMBER,parseInt(e)]])},n}(),k2=aU;var cU=function(){function n(){}return n.decodeRow=function(e,t,r){var i=ei.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new P2;return o.decodeRow(e,t,i)}catch{var s=new k2;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),F2=cU;var uU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lU=function(n){uU(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return t}return e.prototype.decodeRow=function(t,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(de.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new Y((o[0]+o[1])/2,t);s.foundPossibleResultPoint(a)}var c=this.decodeMiddle(r,o,this.decodeRowStringBuffer),u=c.rowOffset,l=c.resultString;if(s!=null){var f=new Y(u,t);s.foundPossibleResultPoint(f)}var h=e.decodeEnd(r,u);if(s!=null){var p=new Y((h[0]+h[1])/2,t);s.foundPossibleResultPoint(p)}var m=h[1],y=m+(m-h[0]);if(y>=r.getSize()||!r.isRange(m,y,!1))throw new P;var _=l.toString();if(_.length<8)throw new $;if(!e.checkChecksum(_))throw new je;var C=(o[1]+o[0])/2,x=(h[1]+h[0])/2,R=this.getBarcodeFormat(),O=[new Y(C,t),new Y(x,t)],V=new Ge(_,null,0,O,R,new Date().getTime()),U=0;try{var A=F2.decodeRow(t,r,h[1]);V.putMetadata(gt.UPC_EAN_EXTENSION,A.getText()),V.putAllMetadata(A.getResultMetadata()),V.addResultPoints(A.getResultPoints()),U=A.getText().length}catch{}var E=i==null?null:i.get(de.ALLOWED_EAN_EXTENSIONS);if(E!=null){var T=!1;for(var S in E)if(U.toString()===S){T=!0;break}if(!T)throw new P}return R===K.EAN_13||K.UPC_A,V},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new $;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new $;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(ei),Et=lU;var dU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),L2=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fU=function(n){dU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),f=r[1],h=0,p=0;p<6&&f<l;p++){var m=Et.decodeDigit(t,u,f,Et.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var y=(o=void 0,L2(u)),_=y.next();!_.done;_=y.next()){var C=_.value;f+=C}}catch(V){o={error:V}}finally{try{_&&!_.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}m>=10&&(h|=1<<5-p)}i=e.determineFirstDigit(i,h);var x=Et.findGuardPattern(t,f,!0,Et.MIDDLE_PATTERN,new Int32Array(Et.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var p=0;p<6&&f<l;p++){var m=Et.decodeDigit(t,u,f,Et.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var R=(a=void 0,L2(u)),O=R.next();!O.done;O=R.next()){var C=O.value;f+=C}}catch(A){a={error:A}}finally{try{O&&!O.done&&(c=R.return)&&c.call(R)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return K.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new P},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Et),Cc=fU;var hU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),V2=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pU=function(n){hU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),f=r[1],h=0;h<4&&f<l;h++){var p=Et.decodeDigit(t,u,f,Et.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var m=(o=void 0,V2(u)),y=m.next();!y.done;y=m.next()){var _=y.value;f+=_}}catch(O){o={error:O}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}}var C=Et.findGuardPattern(t,f,!0,Et.MIDDLE_PATTERN,new Int32Array(Et.MIDDLE_PATTERN.length).fill(0));f=C[1];for(var h=0;h<4&&f<l;h++){var p=Et.decodeDigit(t,u,f,Et.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var x=(a=void 0,V2(u)),R=x.next();!R.done;R=x.next()){var _=R.value;f+=_}}catch(U){a={error:U}}finally{try{R&&!R.done&&(c=x.return)&&c.call(x)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return K.EAN_8},e}(Et),t_=pU;var gU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mU=function(n){gU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new Cc,t}return e.prototype.getBarcodeFormat=function(){return K.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Ge(r.substring(1),null,null,t.getResultPoints(),K.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new P},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Et),n_=mU;var vU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_U=function(n){vU(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a=this.decodeMiddleCounters.map(function(_){return _});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var c=t.getSize(),u=r[1],l=0,f=0;f<6&&u<c;f++){var h=e.decodeDigit(t,a,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+h%10);try{for(var p=(o=void 0,yU(a)),m=p.next();!m.done;m=p.next()){var y=m.value;u+=y}}catch(_){o={error:_}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}h>=10&&(l|=1<<5-f)}return e.determineNumSysAndCheckDigit(new te(i),l),u},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Et.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw P.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return K.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new te;i.append(t.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Et),r_=_U;var wU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),B2=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EU=function(n){wU(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(de.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(K.EAN_13)>-1&&o.push(new Cc),i.indexOf(K.UPC_A)>-1&&o.push(new n_),i.indexOf(K.EAN_8)>-1&&o.push(new t_),i.indexOf(K.UPC_E)>-1&&o.push(new r_)),o.length===0&&(o.push(new Cc),o.push(new n_),o.push(new t_),o.push(new r_)),r.readers=o,r}return e.prototype.decodeRow=function(t,r,i){var o,s;try{for(var a=B2(this.readers),c=a.next();!c.done;c=a.next()){var u=c.value;try{var l=u.decodeRow(t,r,i),f=l.getBarcodeFormat()===K.EAN_13&&l.getText().charAt(0)==="0",h=i==null?null:i.get(de.POSSIBLE_FORMATS),p=h==null||h.includes(K.UPC_A);if(f&&p){var m=l.getRawBytes(),y=new Ge(l.getText().substring(1),m,m?m.length:null,l.getResultPoints(),K.UPC_A);return y.putAllMetadata(l.getResultMetadata()),y}return l}catch{}}}catch(_){o={error:_}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new P},e.prototype.reset=function(){var t,r;try{for(var i=B2(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(Qe),Up=EU;var IU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),CU=function(n){IU(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var o=this.getValidRowData(r);if(!o)throw new P;var s=this.codaBarDecodeRow(o.row);if(!s)throw new P;return new Ge(s,null,0,[new Y(o.left,t),new Y(o.right,t)],K.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],a=r[0],c=1,u=1;u<r.length;u++)r[u]===a?c++:(a=r[u],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,u){return(c+u)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(Qe),i_=CU;var xU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TU=function(n){xU(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Qe.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new P},e.count=function(t){return Ce.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]>o&&(o=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]<o&&(o=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,o=t[0]+t[1],s=o+t[2]+t[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var l=AU(t),f=l.next();!f.done;f=l.next()){var h=f.value;h>u&&(u=h),h<c&&(c=h)}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Qe),Ui=TU;var DU=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),Fs=DU;var SU=function(){function n(e,t,r,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Y(r,o)),this.resultPoints.push(new Y(i,o))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),jp=SU;var bU=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RU=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,o,s=0;try{for(var a=bU(e),c=a.next();!c.done;c=a.next()){var u=c.value;s+=u}}catch(x){i={error:x}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var l=0,f=0,h=e.length,p=0;p<h-1;p++){var m=void 0;for(m=1,f|=1<<p;m<e[p];m++,f&=~(1<<p)){var y=n.combins(s-m-1,h-p-2);if(r&&f===0&&s-m-(h-p-1)>=h-p-1&&(y-=n.combins(s-m-(h-p),h-p-2)),h-p-1>1){for(var _=0,C=s-m-(h-p-2);C>t;C--)_+=n.combins(s-m-C-1,h-p-3);y-=_*(h-1-p)}else s-m>t&&y--;l+=y}s-=m}return l},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var o=1,s=1,a=e;a>r;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},n}(),Oo=RU;var NU=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new lt(r),o=0,s=e[0],a=s.getRightChar().getValue(),c=11;c>=0;--c)(a&1<<c)!==0&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var u=e[c],l=u.getLeftChar().getValue(),f=11;f>=0;--f)(l&1<<f)!==0&&i.set(o),o++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),f=11;f>=0;--f)(h&1<<f)!==0&&i.set(o),o++}return i},n}(),U2=NU;var MU=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),Po=MU;var OU=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),xc=OU;var PU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kU=function(n){PU(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(xc),mr=kU;var FU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LU=function(n){FU(e,n);function e(t,r,i){var o=n.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(xc),ko=LU;var VU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BU=function(n){VU(e,n);function e(t,r,i){var o=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new $;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(xc),Ls=BU;var Hp=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UU=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,o,s,a,c,u;if(!e)return null;if(e.length<2)throw new P;var l=e.substring(0,2);try{for(var f=Hp(n.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var p=h.value;if(p[0]===l)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,p[2],e):n.processFixedAI(2,p[1],e)}}catch(U){t={error:U}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(e.length<3)throw new P;var m=e.substring(0,3);try{for(var y=Hp(n.THREE_DIGIT_DATA_LENGTH),_=y.next();!_.done;_=y.next()){var p=_.value;if(p[0]===m)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,p[2],e):n.processFixedAI(3,p[1],e)}}catch(U){i={error:U}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}try{for(var C=Hp(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),x=C.next();!x.done;x=C.next()){var p=x.value;if(p[0]===m)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,p[2],e):n.processFixedAI(4,p[1],e)}}catch(U){s={error:U}}finally{try{x&&!x.done&&(a=C.return)&&a.call(C)}finally{if(s)throw s.error}}if(e.length<4)throw new P;var R=e.substring(0,4);try{for(var O=Hp(n.FOUR_DIGIT_DATA_LENGTH),V=O.next();!V.done;V=O.next()){var p=V.value;if(p[0]===R)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,p[2],e):n.processFixedAI(4,p[1],e)}}catch(U){c={error:U}}finally{try{V&&!V.done&&(u=O.return)&&u.call(O)}finally{if(c)throw c.error}}throw new P},n.processFixedAI=function(e,t,r){if(r.length<e)throw new P;var i=r.substring(0,e);if(r.length<e+t)throw new P;var o=r.substring(e,e+t),s=r.substring(e+t),a="("+i+")"+o,c=n.parseFieldsInGeneralPurpose(s);return c==null?a:a+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),o;r.length<e+t?o=r.length:o=e+t;var s=r.substring(e,o),a=r.substring(o),c="("+i+")"+s,u=n.parseFieldsInGeneralPurpose(a);return u==null?c:c+u},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),j2=UU;var jU=function(){function n(e){this.buffer=new te,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=j2.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Ls(this.information.getSize(),Ls.FNC1,Ls.FNC1):new Ls(this.information.getSize(),t-1,Ls.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new Ls(e+7,i,o)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,o=0;o<r;++o)e.get(t+o)&&(i|=1<<r-o-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new ko(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new ko(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new ko(this.current.getPosition(),this.buffer.toString()):t=new ko(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Po(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new ko(this.current.getPosition(),this.buffer.toString());return new Po(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Po(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ko(this.current.getPosition(),this.buffer.toString());return new Po(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Po(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ko(this.current.getPosition(),this.buffer.toString());return new Po(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Po(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new mr(e+5,mr.FNC1);if(t>=5&&t<15)return new mr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new mr(e+7,""+(r+1));if(r>=90&&r<116)return new mr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new $}return new mr(e+8,o)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new mr(e+5,mr.FNC1);if(t>=5&&t<15)return new mr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new mr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Ot("Decoding invalid alphanumeric value: "+r)}return new mr(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),Ac=jU;var HU=function(){function n(e){this.information=e,this.generalDecoder=new Ac(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),Xl=HU;var $U=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),GU=function(n){$U(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,o=0;o<13;o++){var s=t.charAt(o+r).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(Xl),Ln=GU;var zU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WU=function(n){zU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new te;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Ln),H2=WU;var qU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KU=function(n){qU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new te;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Xl),$2=KU;var XU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YU=function(n){XU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);for(var s=this.checkWeight(o),a=1e5,c=0;c<5;++c)s/a===0&&t.append("0"),a/=10;t.append(s)},e}(Ln),Tc=YU;var ZU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QU=function(n){ZU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Tc.GTIN_SIZE+e.WEIGHT_SIZE)throw new P;var t=new te;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Tc.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Tc),$p=QU;var JU=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ej=function(n){JU(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}($p),G2=ej;var tj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nj=function(n){tj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}($p),z2=nj;var rj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ij=function(n){rj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ln.GTIN_SIZE)throw new P;var t=new te;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ln.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ln.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Ln),W2=ij;var oj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sj=function(n){oj(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ln.GTIN_SIZE)throw new P;var t=new te;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ln.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ln.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ln.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Ln),q2=sj;var aj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cj=function(n){aj(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new P;var t=new te;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&t.append("0"),t.append(a),s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Tc),ji=cj;function o_(n){try{if(n.get(1))return new H2(n);if(!n.get(2))return new $2(n);var e=Ac.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new G2(n);case 5:return new z2(n)}var t=Ac.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new W2(n);case 13:return new q2(n)}var r=Ac.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new ji(n,"310","11");case 57:return new ji(n,"320","11");case 58:return new ji(n,"310","13");case 59:return new ji(n,"320","13");case 60:return new ji(n,"310","15");case 61:return new ji(n,"320","15");case 62:return new ji(n,"310","17");case 63:return new ji(n,"320","17")}}catch(i){throw console.log(i),new Ot("unknown decoder: "+n)}}var uj=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),s_=uj;var lj=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,o){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),K2=lj;var dj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fo=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fj=function(n){dj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(a){if(a instanceof P){if(!this.pairs.length)throw new P;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new P},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,o,s=r;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,Fo(t)),u=c.next();!u.done;u=c.next()){var l=u.value;this.pairs.push(l.getPairs())}}catch(h){i={error:h}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(t);f.push(a);try{return this.checkRows(f,s+1)}catch(h){console.log(h)}}}throw new P},e.isValidSequence=function(t){var r,i;try{for(var o=Fo(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(t.length>a.length)){for(var c=!0,u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!==a[u]){c=!1;break}if(c)return!0}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>t){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new K2(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,o,s,a,c,u;try{for(var l=Fo(r),f=l.next();!f.done;f=l.next()){var h=f.value;if(h.getPairs().length!==t.length){var p=!0;try{for(var m=(s=void 0,Fo(h.getPairs())),y=m.next();!y.done;y=m.next()){var _=y.value,C=!1;try{for(var x=(c=void 0,Fo(t)),R=x.next();!R.done;R=x.next()){var O=R.value;if(s_.equals(_,O)){C=!0;break}}}catch(V){c={error:V}}finally{try{R&&!R.done&&(u=x.return)&&u.call(x)}finally{if(c)throw c.error}}C||(p=!1)}}catch(V){s={error:V}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}}}}catch(V){i={error:V}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,o,s,a,c,u;try{for(var l=Fo(r),f=l.next();!f.done;f=l.next()){var h=f.value,p=!0;try{for(var m=(s=void 0,Fo(t)),y=m.next();!y.done;y=m.next()){var _=y.value,C=!1;try{for(var x=(c=void 0,Fo(h.getPairs())),R=x.next();!R.done;R=x.next()){var O=R.value;if(_.equals(O)){C=!0;break}}}catch(V){c={error:V}}finally{try{R&&!R.done&&(u=x.return)&&u.call(x)}finally{if(c)throw c.error}}if(!C){p=!1;break}}}catch(V){s={error:V}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}if(p)return!0}}catch(V){i={error:V}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=U2.buildBitArray(t),i=o_(r),o=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),a=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],a[0],a[1]];return new Ge(o,null,null,c,K.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var c=this.pairs.get(a);o+=c.getLeftChar().getChecksumPortion(),s++;var u=c.getRightChar();u!=null&&(o+=u.getChecksumPortion(),s++)}o%=211;var l=211*(s-4)+o;return l===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,o),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):a=!1;while(a);var u=this.decodeDataCharacter(t,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new P;var l;try{l=this.decodeDataCharacter(t,s,o,!1)}catch(f){l=null,console.log(f)}return new s_(u,l,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=t.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var c=r[r.length-1];a=c.getFinderPattern().getStartEnd()[1]}var u=r.length%2!==0;this.startFromEven&&(u=!u);for(var l=!1;a<s&&(l=!t.get(a),!!l);)a++;for(var f=0,h=a,p=a;p<s;p++)if(t.get(p)!==l)o[f]++;else{if(f===3){if(u&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=h,this.startEnd[1]=p;return}u&&e.reverseCounters(o),h+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,l=!l}throw new P},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,r,i){var o,s,a;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,a=this.startEnd[1]}else s=this.startEnd[0],a=t.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var u=this.getDecodeFinderCounters();Ie.arraycopy(u,0,u,1,u.length-1),u[0]=o;var l;try{l=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new jp(l,[s,a],s,a,r)},e.prototype.decodeDataCharacter=function(t,r,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,u=s.length-1;c<u;c++,u--){var l=s[c];s[c]=s[u],s[u]=l}}var f=17,h=Ce.sum(new Int32Array(s))/f,p=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new P;for(var m=this.getOddCounts(),y=this.getEvenCounts(),_=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var x=1*s[c]/h,R=x+.5;if(R<1){if(x<.3)throw new P;R=1}else if(R>8){if(x>8.7)throw new P;R=8}var O=c/2;(c&1)===0?(m[O]=R,_[O]=x-R):(y[O]=R,C[O]=x-R)}this.adjustOddEvenCounts(f);for(var V=4*r.getValue()+(i?0:2)+(o?0:1)-1,U=0,A=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(r,i,o)){var E=e.WEIGHTS[V][2*c];A+=m[c]*E}U+=m[c]}for(var T=0,c=y.length-1;c>=0;c--)if(e.isNotA1left(r,i,o)){var E=e.WEIGHTS[V][2*c+1];T+=y[c]*E}var S=A+T;if((U&1)!==0||U>13||U<4)throw new P;var N=(13-U)/2,M=e.SYMBOL_WIDEST[N],D=9-M,xt=Oo.getRSSvalue(m,M,!0),jn=Oo.getRSSvalue(y,D,!1),wu=e.EVEN_TOTAL_SUBSET[N],hi=e.GSUM[N],pi=xt*wu+jn+hi;return new Fs(pi,S)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=Ce.sum(new Int32Array(this.getOddCounts())),i=Ce.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var a=!1,c=!1;i>13?c=!0:i<4&&(a=!0);var u=r+i-t,l=(r&1)===1,f=(i&1)===0;if(u===1)if(l){if(f)throw new P;s=!0}else{if(!f)throw new P;c=!0}else if(u===-1)if(l){if(f)throw new P;o=!0}else{if(!f)throw new P;a=!0}else if(u===0){if(l){if(!f)throw new P;r<i?(o=!0,c=!0):(s=!0,a=!0)}else if(f)throw new P}else throw new P;if(o){if(s)throw new P;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(c)throw new P;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Ui),a_=fj;var hj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pj=function(n){hj(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Fs),X2=pj;var gj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),c_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mj=function(n){gj(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,u),r.reverse();var l=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,l),r.reverse();try{for(var f=c_(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var p=h.value;if(p.getCount()>1)try{for(var m=(a=void 0,c_(this.possibleRightPairs)),y=m.next();!y.done;y=m.next()){var _=y.value;if(_.getCount()>1&&e.checkChecksum(p,_))return e.constructResult(p,_)}}catch(C){a={error:C}}finally{try{y&&!y.done&&(c=m.return)&&c.call(m)}finally{if(a)throw a.error}}}}catch(C){o={error:C}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}throw new P},e.addOrTally=function(t,r){var i,o;if(r!=null){var s=!1;try{for(var a=c_(t),c=a.next();!c.done;c=a.next()){var u=c.value;if(u.getValue()===r.getValue()){u.incrementCount(),s=!0;break}}}catch(l){i={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),s=new te,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var c=0,a=0;a<13;a++){var u=s.charAt(a).charCodeAt(0)-48;c+=(a&1)===0?3*u:u}c=10-c%10,c===10&&(c=0),s.append(c.toString());var l=t.getFinderPattern().getResultPoints(),f=r.getFinderPattern().getResultPoints();return new Ge(s.toString(),null,0,[l[0],l[1],f[0],f[1]],K.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,r,i,o){try{var s=this.findFinderPattern(t,r),a=this.parseFoundFinderPattern(t,i,r,s),c=o==null?null:o.get(de.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(s[0]+s[1])/2;r&&(u=t.getSize()-1-u),c.foundPossibleResultPoint(new Y(u,i))}var l=this.decodeDataCharacter(t,a,!0),f=this.decodeDataCharacter(t,a,!1);return new X2(1597*l.getValue()+f.getValue(),l.getChecksumPortion()+4*f.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)Qe.recordPatternInReverse(t,r.getStartEnd()[0],o);else{Qe.recordPattern(t,r.getStartEnd()[1]+1,o);for(var a=0,c=o.length-1;a<c;a++,c--){var u=o[a];o[a]=o[c],o[c]=u}}for(var l=i?16:15,f=Ce.sum(new Int32Array(o))/l,h=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var _=o[a]/f,C=Math.floor(_+.5);C<1?C=1:C>8&&(C=8);var x=Math.floor(a/2);(a&1)===0?(h[x]=C,m[x]=_-C):(p[x]=C,y[x]=_-C)}this.adjustOddEvenCounts(i,l);for(var R=0,O=0,a=h.length-1;a>=0;a--)O*=9,O+=h[a],R+=h[a];for(var V=0,U=0,a=p.length-1;a>=0;a--)V*=9,V+=p[a],U+=p[a];var A=O+3*V;if(i){if((R&1)!==0||R>12||R<4)throw new P;var E=(12-R)/2,T=e.OUTSIDE_ODD_WIDEST[E],S=9-T,N=Oo.getRSSvalue(h,T,!1),M=Oo.getRSSvalue(p,S,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],xt=e.OUTSIDE_GSUM[E];return new Fs(N*D+M+xt,A)}else{if((U&1)!==0||U>10||U<4)throw new P;var E=(10-U)/2,T=e.INSIDE_ODD_WIDEST[E],S=9-T,N=Oo.getRSSvalue(h,T,!0),M=Oo.getRSSvalue(p,S,!1),jn=e.INSIDE_ODD_TOTAL_SUBSET[E],xt=e.INSIDE_GSUM[E];return new Fs(M*jn+N+xt,A)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),s=!1,a=0;a<o&&(s=!t.get(a),r!==s);)a++;for(var c=0,u=a,l=a;l<o;l++)if(t.get(l)!==s)i[c]++;else{if(c===3){if(Ui.isFinderPattern(i))return[u,l];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new P},e.prototype.parseFoundFinderPattern=function(t,r,i,o){for(var s=t.get(o[0]),a=o[0]-1;a>=0&&s!==t.get(a);)a--;a++;var c=o[0]-a,u=this.getDecodeFinderCounters(),l=new Int32Array(u.length);Ie.arraycopy(u,0,l,1,u.length-1),l[0]=c;var f=this.parseFinderValue(l,e.FINDER_PATTERNS),h=a,p=o[1];return i&&(h=t.getSize()-1-h,p=t.getSize()-1-p),new jp(f,[a,o[1]],h,p,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=Ce.sum(new Int32Array(this.getOddCounts())),o=Ce.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,c=!1,u=!1;t?(i>12?a=!0:i<4&&(s=!0),o>12?u=!0:o<4&&(c=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?u=!0:o<4&&(c=!0));var l=i+o-r,f=(i&1)===(t?1:0),h=(o&1)===1;if(l===1)if(f){if(h)throw new P;a=!0}else{if(!h)throw new P;u=!0}else if(l===-1)if(f){if(h)throw new P;s=!0}else{if(!h)throw new P;c=!0}else if(l===0){if(f){if(!h)throw new P;i<o?(s=!0,u=!0):(a=!0,c=!0)}else if(h)throw new P}else throw new P;if(s){if(a)throw new P;Ui.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Ui.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new P;Ui.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Ui.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Ui),Gp=mj;var vj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yj=function(n){vj(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(de.POSSIBLE_FORMATS):null,o=t&&t.get(de.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(de.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(K.EAN_13)||i.includes(K.UPC_A)||i.includes(K.EAN_8)||i.includes(K.UPC_E))&&r.readers.push(new Up(t)),i.includes(K.CODE_39)&&r.readers.push(new Lp(o,s)),i.includes(K.CODE_93)&&r.readers.push(new Vp),i.includes(K.CODE_128)&&r.readers.push(new Fp),i.includes(K.ITF)&&r.readers.push(new Bp),i.includes(K.CODABAR)&&r.readers.push(new i_),i.includes(K.RSS_14)&&r.readers.push(new Gp),i.includes(K.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new a_))),r.readers.length===0&&(r.readers.push(new Up(t)),r.readers.push(new Lp),r.readers.push(new Vp),r.readers.push(new Up(t)),r.readers.push(new Fp),r.readers.push(new Bp),r.readers.push(new Gp)),r}return e.prototype.decodeRow=function(t,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new P},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Qe),ti=yj;var _j=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ope=function(n){_j(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new ti(r),t,r)||this}return e}(pr);var Y2=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Je=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}();var qe=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}();var wj=function(){function n(e,t,r,i,o,s){var a,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var u=0,l=s.getECCodewords(),f=s.getECBlocks();try{for(var h=Y2(f),p=h.next();!p.done;p=h.next()){var m=p.value;u+=m.getCount()*(m.getDataCodewords()+l)}}catch(y){a={error:y}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(a)throw a.error}}this.totalCodewords=u}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new $;try{for(var o=Y2(n.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===t)return a}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new $},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Je(5,new qe(1,3))),new n(2,12,12,10,10,new Je(7,new qe(1,5))),new n(3,14,14,12,12,new Je(10,new qe(1,8))),new n(4,16,16,14,14,new Je(12,new qe(1,12))),new n(5,18,18,16,16,new Je(14,new qe(1,18))),new n(6,20,20,18,18,new Je(18,new qe(1,22))),new n(7,22,22,20,20,new Je(20,new qe(1,30))),new n(8,24,24,22,22,new Je(24,new qe(1,36))),new n(9,26,26,24,24,new Je(28,new qe(1,44))),new n(10,32,32,14,14,new Je(36,new qe(1,62))),new n(11,36,36,16,16,new Je(42,new qe(1,86))),new n(12,40,40,18,18,new Je(48,new qe(1,114))),new n(13,44,44,20,20,new Je(56,new qe(1,144))),new n(14,48,48,22,22,new Je(68,new qe(1,174))),new n(15,52,52,24,24,new Je(42,new qe(2,102))),new n(16,64,64,14,14,new Je(56,new qe(2,140))),new n(17,72,72,16,16,new Je(36,new qe(4,92))),new n(18,80,80,18,18,new Je(48,new qe(4,114))),new n(19,88,88,20,20,new Je(56,new qe(4,144))),new n(20,96,96,22,22,new Je(68,new qe(4,174))),new n(21,104,104,24,24,new Je(56,new qe(6,136))),new n(22,120,120,18,18,new Je(68,new qe(6,175))),new n(23,132,132,20,20,new Je(62,new qe(8,163))),new n(24,144,144,22,22,new Je(62,new qe(8,156),new qe(2,155))),new n(25,8,18,6,16,new Je(7,new qe(1,5))),new n(26,8,32,6,14,new Je(11,new qe(1,10))),new n(27,12,26,10,24,new Je(14,new qe(1,16))),new n(28,12,36,10,16,new Je(18,new qe(1,22))),new n(29,16,36,14,16,new Je(24,new qe(1,32))),new n(30,16,48,14,22,new Je(28,new qe(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),Z2=wj;var Ej=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new $;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ft(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return Z2.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,c=!1,u=!1,l=!1;do if(r===o&&i===0&&!a)e[t++]=this.readCorner1(o,s)&255,r-=2,i+=2,a=!0;else if(r===o-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(o,s)&255,r-=2,i+=2,c=!0;else if(r===o+4&&i===2&&(s&7)===0&&!u)e[t++]=this.readCorner3(o,s)&255,r-=2,i+=2,u=!0;else if(r===o-2&&i===0&&(s&7)===4&&!l)e[t++]=this.readCorner4(o,s)&255,r-=2,i+=2,l=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(t!==this.version.getTotalCodewords())throw new $;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var o=0;return this.readModule(e-2,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t,r,i)&&(o|=1),o<<=1,this.readModule(e,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e,t,r,i)&&(o|=1),o},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new W("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/i|0,a=r/o|0,c=s*i,u=a*o,l=new ft(u,c),f=0;f<s;++f)for(var h=f*i,p=0;p<a;++p)for(var m=p*o,y=0;y<i;++y)for(var _=f*(i+2)+1+y,C=h+y,x=0;x<o;++x){var R=p*(o+2)+1+x;if(e.get(R,_)){var O=m+x;l.set(O,C)}}return l},n}(),Q2=Ej;var J2=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ij=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,o,s,a=t.getECBlocks(),c=0,u=a.getECBlocks();try{for(var l=J2(u),f=l.next();!f.done;f=l.next()){var h=f.value;c+=h.getCount()}}catch(xt){r={error:xt}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}var p=new Array(c),m=0;try{for(var y=J2(u),_=y.next();!_.done;_=y.next())for(var h=_.value,C=0;C<h.getCount();C++){var x=h.getDataCodewords(),R=a.getECCodewords()+x;p[m++]=new n(x,new Uint8Array(R))}}catch(xt){o={error:xt}}finally{try{_&&!_.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}for(var O=p[0].codewords.length,V=O-a.getECCodewords(),U=V-1,A=0,C=0;C<U;C++)for(var E=0;E<m;E++)p[E].codewords[C]=e[A++];for(var T=t.getVersionNumber()===24,S=T?8:m,E=0;E<S;E++)p[E].codewords[V-1]=e[A++];for(var N=p[0].codewords.length,C=V;C<N;C++)for(var E=0;E<m;E++){var M=T?(E+8)%m:E,D=T&&M>7?C-1:C;p[M].codewords[D]=e[A++]}if(A!==e.length)throw new W;return p},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),eR=Ij;var Cj=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new W(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,a=e<s?e:s,c=s-a,u=255>>8-a<<c;t=(o[i]&u)>>c,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;t=t<<e|(o[i]&u)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Yl=Cj;var Jt=function(n){return n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE",n}(Jt||{}),xj=function(){function n(){}return n.decode=function(e){var t=new Yl(e),r=new te,i=new te,o=new Array,s=Jt.ASCII_ENCODE;do if(s===Jt.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case Jt.C40_ENCODE:this.decodeC40Segment(t,r);break;case Jt.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Jt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Jt.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Jt.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new $}s=Jt.ASCII_ENCODE}while(s!==Jt.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Vi(e,r.toString(),o.length===0?null:o,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new $;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),Jt.ASCII_ENCODE;if(o===129)return Jt.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return Jt.C40_ENCODE;case 231:return Jt.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Jt.ANSIX12_ENCODE;case 239:return Jt.TEXT_ENCODE;case 240:return Jt.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new $;break}}while(e.available()>0);return Jt.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else throw new $;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new $}o=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),o=0;break;default:throw new $}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else throw new $;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new $}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u),o=0}else throw new $;break;default:throw new $}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new $;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new $;for(var a=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new $;a[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{t.append(Kt.decode(a,fe.ISO88591))}catch(u){throw new Ot("Platform does not support required encoding: "+u.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"],n}(),u_=xj;var Aj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tj=function(){function n(){this.rsDecoder=new Bi(St.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new Q2(e),o=i.getVersion(),s=i.readCodewords(),a=eR.getDataBlocks(s,o),c=0;try{for(var u=Aj(a),l=u.next();!l.done;l=u.next()){var f=l.value;c+=f.getNumDataCodewords()}}catch(R){t={error:R}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}for(var h=new Uint8Array(c),p=a.length,m=0;m<p;m++){var y=a[m],_=y.getCodewords(),C=y.getNumDataCodewords();this.correctErrors(_,C);for(var x=0;x<C;x++)h[x*p+m]=_[x]}return u_.decode(h)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new je}for(var i=0;i<t;i++)e[i]=r[i]},n}(),tR=Tj;var Dj=function(){function n(e){this.image=e,this.rectangleDetector=new Ic(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new P;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],o=t[2],s=t[3],a=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(c&1)===1&&(c+=1),4*a<7*c&&4*c<7*a&&(a=c=Math.max(a,c));var u=n.sampleGrid(this.image,r,i,o,s,a,c);return new Ps(u,[r,i,o,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new Y(e.getX()+i,e.getY()+o)},n.moveAway=function(e,t,r){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<r?o-=1:o+=1,new Y(i,o)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(t,r),a=this.transitionsBetween(r,i),c=this.transitionsBetween(i,o),u=this.transitionsBetween(o,t),l=s,f=[o,t,r,i];return l>a&&(l=a,f[0]=t,f[1]=r,f[2]=i,f[3]=o),l>c&&(l=c,f[0]=r,f[1]=i,f[2]=o,f[3]=t),l>u&&(f[0]=i,f[1]=o,f[2]=t,f[3]=r),f},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),u=this.transitionsBetween(a,t),l=this.transitionsBetween(c,o);return u<l?(e[0]=t,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=this.transitionsBetween(r,o),c=n.shiftPoint(t,r,(a+1)*4),u=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,o),a=this.transitionsBetween(u,o);var l=new Y(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),f=new Y(o.getX()+(t.getX()-r.getX())/(a+1),o.getY()+(t.getY()-r.getY())/(a+1));if(!this.isValid(l))return this.isValid(f)?f:null;if(!this.isValid(f))return l;var h=this.transitionsBetween(c,l)+this.transitionsBetween(u,l),p=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return h>p?l:f},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,a=this.transitionsBetween(i,o)+1,c=n.shiftPoint(t,r,a*4),u=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,o)+1,a=this.transitionsBetween(u,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var l=(t.getX()+r.getX()+i.getX()+o.getX())/4,f=(t.getY()+r.getY()+i.getY()+o.getY())/4;t=n.moveAway(t,l,f),r=n.moveAway(r,l,f),i=n.moveAway(i,l,f),o=n.moveAway(o,l,f);var h,p;return c=n.shiftPoint(t,r,a*4),c=n.shiftPoint(c,o,s*4),h=n.shiftPoint(r,t,a*4),h=n.shiftPoint(h,i,s*4),u=n.shiftPoint(i,o,a*4),u=n.shiftPoint(u,r,s*4),p=n.shiftPoint(o,i,a*4),p=n.shiftPoint(p,t,s*4),[c,h,u,p]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,o,s,a){var c=ks.getInstance();return c.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-i)>Math.abs(o-r);if(a){var c=r;r=i,i=c,c=o,o=s,s=c}for(var u=Math.abs(o-r),l=Math.abs(s-i),f=-u/2,h=i<s?1:-1,p=r<o?1:-1,m=0,y=this.image.get(a?i:r,a?r:i),_=r,C=i;_!==o;_+=p){var x=this.image.get(a?C:_,a?_:C);if(x!==y&&(m++,y=x),f+=l,f>0){if(C===s)break;C+=h,f-=u}}return m},n}(),nR=Dj;var Sj=function(){function n(){this.decoder=new tR}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(de.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=n.NO_POINTS}else{var s=new nR(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=r.getRawBytes(),c=new Ge(r.getText(),a,8*a.length,i,K.DATA_MATRIX,Ie.currentTimeMillis()),u=r.getByteSegments();u!=null&&c.putMetadata(gt.BYTE_SEGMENTS,u);var l=r.getECLevel();return l!=null&&c.putMetadata(gt.ERROR_CORRECTION_LEVEL,l),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new P;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],c=r[0],u=(c-a+1)/i,l=(s-o+1)/i;if(u<=0||l<=0)throw new P;var f=i/2;o+=f,a+=f;for(var h=new ft(u,l),p=0;p<l;p++)for(var m=o+p*i,y=0;y<u;y++)e.get(a+y*i,m)&&h.set(y,p);return h},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],o=e[1];i<r&&t.get(i,o);)i++;if(i===r)throw new P;var s=i-e[0];if(s===0)throw new P;return s},n.NO_POINTS=[],n}(),Lo=Sj;var bj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zpe=function(n){bj(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Lo,t)||this}return e}(pr);var Zl=function(n){return n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H",n}(Zl||{}),Rj=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new vt(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new W;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Zl.L,"L",1),n.M=new n(Zl.M,"M",0),n.Q=new n(Zl.Q,"Q",3),n.H=new n(Zl.H,"H",2),n}(),Vn=Rj;var Nj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mj=function(){function n(e){this.errorCorrectionLevel=Vn.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return oe.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=Nj(n.FORMAT_INFO_DECODE_LOOKUP),c=a.next();!c.done;c=a.next()){var u=c.value,l=u[0];if(l===e||l===t)return new n(u[1]);var f=n.numBitsDiffering(e,l);f<o&&(s=u[1],o=f),e!==t&&(f=n.numBitsDiffering(t,l),f<o&&(s=u[1],o=f))}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),Ql=Mj;var Oj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pj=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var o=Oj(i),s=o.next();!s.done;s=o.next()){var a=s.value;r+=a.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),F=Pj;var kj=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),I=kj;var Fj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lj=function(){function n(e,t){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var a=0,c=o[0].getECCodewordsPerBlock(),u=o[0].getECBlocks();try{for(var l=Fj(u),f=l.next();!f.done;f=l.next()){var h=f.value;a+=h.getCount()*(h.getDataCodewords()+c)}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}this.totalCodewords=a}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new $;try{return this.getVersionForNumber((e-17)/4)}catch{throw new $}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new W;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var o=n.VERSION_DECODE_INFO[i];if(o===e)return n.getVersionForNumber(i+7);var s=Ql.numBitsDiffering(e,o);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new ft(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new F(7,new I(1,19)),new F(10,new I(1,16)),new F(13,new I(1,13)),new F(17,new I(1,9))),new n(2,Int32Array.from([6,18]),new F(10,new I(1,34)),new F(16,new I(1,28)),new F(22,new I(1,22)),new F(28,new I(1,16))),new n(3,Int32Array.from([6,22]),new F(15,new I(1,55)),new F(26,new I(1,44)),new F(18,new I(2,17)),new F(22,new I(2,13))),new n(4,Int32Array.from([6,26]),new F(20,new I(1,80)),new F(18,new I(2,32)),new F(26,new I(2,24)),new F(16,new I(4,9))),new n(5,Int32Array.from([6,30]),new F(26,new I(1,108)),new F(24,new I(2,43)),new F(18,new I(2,15),new I(2,16)),new F(22,new I(2,11),new I(2,12))),new n(6,Int32Array.from([6,34]),new F(18,new I(2,68)),new F(16,new I(4,27)),new F(24,new I(4,19)),new F(28,new I(4,15))),new n(7,Int32Array.from([6,22,38]),new F(20,new I(2,78)),new F(18,new I(4,31)),new F(18,new I(2,14),new I(4,15)),new F(26,new I(4,13),new I(1,14))),new n(8,Int32Array.from([6,24,42]),new F(24,new I(2,97)),new F(22,new I(2,38),new I(2,39)),new F(22,new I(4,18),new I(2,19)),new F(26,new I(4,14),new I(2,15))),new n(9,Int32Array.from([6,26,46]),new F(30,new I(2,116)),new F(22,new I(3,36),new I(2,37)),new F(20,new I(4,16),new I(4,17)),new F(24,new I(4,12),new I(4,13))),new n(10,Int32Array.from([6,28,50]),new F(18,new I(2,68),new I(2,69)),new F(26,new I(4,43),new I(1,44)),new F(24,new I(6,19),new I(2,20)),new F(28,new I(6,15),new I(2,16))),new n(11,Int32Array.from([6,30,54]),new F(20,new I(4,81)),new F(30,new I(1,50),new I(4,51)),new F(28,new I(4,22),new I(4,23)),new F(24,new I(3,12),new I(8,13))),new n(12,Int32Array.from([6,32,58]),new F(24,new I(2,92),new I(2,93)),new F(22,new I(6,36),new I(2,37)),new F(26,new I(4,20),new I(6,21)),new F(28,new I(7,14),new I(4,15))),new n(13,Int32Array.from([6,34,62]),new F(26,new I(4,107)),new F(22,new I(8,37),new I(1,38)),new F(24,new I(8,20),new I(4,21)),new F(22,new I(12,11),new I(4,12))),new n(14,Int32Array.from([6,26,46,66]),new F(30,new I(3,115),new I(1,116)),new F(24,new I(4,40),new I(5,41)),new F(20,new I(11,16),new I(5,17)),new F(24,new I(11,12),new I(5,13))),new n(15,Int32Array.from([6,26,48,70]),new F(22,new I(5,87),new I(1,88)),new F(24,new I(5,41),new I(5,42)),new F(30,new I(5,24),new I(7,25)),new F(24,new I(11,12),new I(7,13))),new n(16,Int32Array.from([6,26,50,74]),new F(24,new I(5,98),new I(1,99)),new F(28,new I(7,45),new I(3,46)),new F(24,new I(15,19),new I(2,20)),new F(30,new I(3,15),new I(13,16))),new n(17,Int32Array.from([6,30,54,78]),new F(28,new I(1,107),new I(5,108)),new F(28,new I(10,46),new I(1,47)),new F(28,new I(1,22),new I(15,23)),new F(28,new I(2,14),new I(17,15))),new n(18,Int32Array.from([6,30,56,82]),new F(30,new I(5,120),new I(1,121)),new F(26,new I(9,43),new I(4,44)),new F(28,new I(17,22),new I(1,23)),new F(28,new I(2,14),new I(19,15))),new n(19,Int32Array.from([6,30,58,86]),new F(28,new I(3,113),new I(4,114)),new F(26,new I(3,44),new I(11,45)),new F(26,new I(17,21),new I(4,22)),new F(26,new I(9,13),new I(16,14))),new n(20,Int32Array.from([6,34,62,90]),new F(28,new I(3,107),new I(5,108)),new F(26,new I(3,41),new I(13,42)),new F(30,new I(15,24),new I(5,25)),new F(28,new I(15,15),new I(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new F(28,new I(4,116),new I(4,117)),new F(26,new I(17,42)),new F(28,new I(17,22),new I(6,23)),new F(30,new I(19,16),new I(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new F(28,new I(2,111),new I(7,112)),new F(28,new I(17,46)),new F(30,new I(7,24),new I(16,25)),new F(24,new I(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new F(30,new I(4,121),new I(5,122)),new F(28,new I(4,47),new I(14,48)),new F(30,new I(11,24),new I(14,25)),new F(30,new I(16,15),new I(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new F(30,new I(6,117),new I(4,118)),new F(28,new I(6,45),new I(14,46)),new F(30,new I(11,24),new I(16,25)),new F(30,new I(30,16),new I(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new F(26,new I(8,106),new I(4,107)),new F(28,new I(8,47),new I(13,48)),new F(30,new I(7,24),new I(22,25)),new F(30,new I(22,15),new I(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new F(28,new I(10,114),new I(2,115)),new F(28,new I(19,46),new I(4,47)),new F(28,new I(28,22),new I(6,23)),new F(30,new I(33,16),new I(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new F(30,new I(8,122),new I(4,123)),new F(28,new I(22,45),new I(3,46)),new F(30,new I(8,23),new I(26,24)),new F(30,new I(12,15),new I(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new I(3,117),new I(10,118)),new F(28,new I(3,45),new I(23,46)),new F(30,new I(4,24),new I(31,25)),new F(30,new I(11,15),new I(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new I(7,116),new I(7,117)),new F(28,new I(21,45),new I(7,46)),new F(30,new I(1,23),new I(37,24)),new F(30,new I(19,15),new I(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new I(5,115),new I(10,116)),new F(28,new I(19,47),new I(10,48)),new F(30,new I(15,24),new I(25,25)),new F(30,new I(23,15),new I(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new I(13,115),new I(3,116)),new F(28,new I(2,46),new I(29,47)),new F(30,new I(42,24),new I(1,25)),new F(30,new I(23,15),new I(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new I(17,115)),new F(28,new I(10,46),new I(23,47)),new F(30,new I(10,24),new I(35,25)),new F(30,new I(19,15),new I(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new I(17,115),new I(1,116)),new F(28,new I(14,46),new I(21,47)),new F(30,new I(29,24),new I(19,25)),new F(30,new I(11,15),new I(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new I(13,115),new I(6,116)),new F(28,new I(14,46),new I(23,47)),new F(30,new I(44,24),new I(7,25)),new F(30,new I(59,16),new I(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new I(12,121),new I(7,122)),new F(28,new I(12,47),new I(26,48)),new F(30,new I(39,24),new I(14,25)),new F(30,new I(22,15),new I(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new I(6,121),new I(14,122)),new F(28,new I(6,47),new I(34,48)),new F(30,new I(46,24),new I(10,25)),new F(30,new I(2,15),new I(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new I(17,122),new I(4,123)),new F(28,new I(29,46),new I(14,47)),new F(30,new I(49,24),new I(10,25)),new F(30,new I(24,15),new I(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new I(4,122),new I(18,123)),new F(28,new I(13,46),new I(32,47)),new F(30,new I(48,24),new I(14,25)),new F(30,new I(42,15),new I(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new I(20,117),new I(4,118)),new F(28,new I(40,47),new I(7,48)),new F(30,new I(43,24),new I(22,25)),new F(30,new I(10,15),new I(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new I(19,118),new I(6,119)),new F(28,new I(18,47),new I(31,48)),new F(30,new I(34,24),new I(34,25)),new F(30,new I(20,15),new I(61,16)))],n}(),Rr=Lj;var dn=function(n){return n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111",n}(dn||{}),Vj=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[dn.DATA_MASK_000,new n(dn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[dn.DATA_MASK_001,new n(dn.DATA_MASK_001,function(e,t){return(e&1)===0})],[dn.DATA_MASK_010,new n(dn.DATA_MASK_010,function(e,t){return t%3===0})],[dn.DATA_MASK_011,new n(dn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[dn.DATA_MASK_100,new n(dn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[dn.DATA_MASK_101,new n(dn.DATA_MASK_101,function(e,t){return e*t%6===0})],[dn.DATA_MASK_110,new n(dn.DATA_MASK_110,function(e,t){return e*t%6<3})],[dn.DATA_MASK_111,new n(dn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),zp=Vj;var Bj=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new $;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=Ql.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new $},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Rr.getVersionForNumber(t);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var a=Rr.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(a=Rr.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new $},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=zp.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),s=!0,a=new Uint8Array(t.getTotalCodewords()),c=0,u=0,l=0,f=i-1;f>0;f-=2){f===6&&f--;for(var h=0;h<i;h++)for(var p=s?i-1-h:h,m=0;m<2;m++)o.get(f-m,p)||(l++,u<<=1,this.bitMatrix.get(f-m,p)&&(u|=1),l===8&&(a[c++]=u,l=0,u=0));s=!s}if(c!==t.getTotalCodewords())throw new $;return a},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=zp.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),rR=Bj;var iR=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uj=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,o,s,a;if(e.length!==t.getTotalCodewords())throw new W;var c=t.getECBlocksForLevel(r),u=0,l=c.getECBlocks();try{for(var f=iR(l),h=f.next();!h.done;h=f.next()){var p=h.value;u+=p.getCount()}}catch(D){i={error:D}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}var m=new Array(u),y=0;try{for(var _=iR(l),C=_.next();!C.done;C=_.next())for(var p=C.value,x=0;x<p.getCount();x++){var R=p.getDataCodewords(),O=c.getECCodewordsPerBlock()+R;m[y++]=new n(R,new Uint8Array(O))}}catch(D){s={error:D}}finally{try{C&&!C.done&&(a=_.return)&&a.call(_)}finally{if(s)throw s.error}}for(var V=m[0].codewords.length,U=m.length-1;U>=0;){var A=m[U].codewords.length;if(A===V)break;U--}U++;for(var E=V-c.getECCodewordsPerBlock(),T=0,x=0;x<E;x++)for(var S=0;S<y;S++)m[S].codewords[x]=e[T++];for(var S=U;S<y;S++)m[S].codewords[E]=e[T++];for(var N=m[0].codewords.length,x=E;x<N;x++)for(var S=0;S<y;S++){var M=S<U?x:x+1;m[S].codewords[M]=e[T++]}return m},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),oR=Uj;var Nr=function(n){return n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI",n}(Nr||{}),jj=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new W;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Nr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Nr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Nr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Nr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Nr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Nr.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Nr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Nr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Nr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Nr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),st=jj;var Hj=function(){function n(){}return n.decode=function(e,t,r,i){var o=new Yl(e),s=new te,a=new Array,c=-1,u=-1;try{var l=null,f=!1,h=void 0;do{if(o.available()<4)h=st.TERMINATOR;else{var p=o.readBits(4);h=st.forBits(p)}switch(h){case st.TERMINATOR:break;case st.FNC1_FIRST_POSITION:case st.FNC1_SECOND_POSITION:f=!0;break;case st.STRUCTURED_APPEND:if(o.available()<16)throw new $;c=o.readBits(8),u=o.readBits(8);break;case st.ECI:var m=n.parseECIValue(o);if(l=dt.getCharacterSetECIByValue(m),l===null)throw new $;break;case st.HANZI:var y=o.readBits(4),_=o.readBits(h.getCharacterCountBits(t));y===n.GB2312_SUBSET&&n.decodeHanziSegment(o,s,_);break;default:var C=o.readBits(h.getCharacterCountBits(t));switch(h){case st.NUMERIC:n.decodeNumericSegment(o,s,C);break;case st.ALPHANUMERIC:n.decodeAlphanumericSegment(o,s,C,f);break;case st.BYTE:n.decodeByteSegment(o,s,C,l,a,i);break;case st.KANJI:n.decodeKanjiSegment(o,s,C);break;default:throw new $}break}}while(h!==st.TERMINATOR)}catch{throw new $}return new Vi(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),c,u)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new $;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,r--}try{t.append(Kt.decode(i,fe.GB2312))}catch(c){throw new $(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new $;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{t.append(Kt.decode(i,fe.SHIFT_JIS))}catch(c){throw new $(c)}},n.decodeByteSegment=function(e,t,r,i,o,s){if(8*r>e.available())throw new $;for(var a=new Uint8Array(r),c=0;c<r;c++)a[c]=e.readBits(8);var u;i===null?u=fe.guessEncoding(a,s):u=i.getName();try{t.append(Kt.decode(a,u))}catch(l){throw new $(l)}o.push(a)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new $;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var o=t.length();r>1;){if(e.available()<11)throw new $;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new $;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<t.length();a++)t.charAt(a)==="%"&&(a<t.length()-1&&t.charAt(a+1)==="%"?t.deleteCharAt(a+1):t.setCharAt(a,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new $;var i=e.readBits(10);if(i>=1e3)throw new $;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new $;var o=e.readBits(7);if(o>=100)throw new $;t.append(n.toAlphaNumericChar(Math.floor(o/10))),t.append(n.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new $;var s=e.readBits(4);if(s>=10)throw new $;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new $},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),l_=Hj;var $j=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),Wp=$j;var sR=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gj=function(){function n(){this.rsDecoder=new Bi(St.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(ft.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new rR(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new Wp(!0)),o}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,o,s,a=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),l=oR.getDataBlocks(u,a,c),f=0;try{for(var h=sR(l),p=h.next();!p.done;p=h.next()){var m=p.value;f+=m.getNumDataCodewords()}}catch(U){r={error:U}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var y=new Uint8Array(f),_=0;try{for(var C=sR(l),x=C.next();!x.done;x=C.next()){var m=x.value,R=m.getCodewords(),O=m.getNumDataCodewords();this.correctErrors(R,O);for(var V=0;V<O;V++)y[_++]=R[V]}}catch(U){o={error:U}}finally{try{x&&!x.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}return l_.decode(y,a,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new je}for(var i=0;i<t;i++)e[i]=r[i]},n}(),aR=Gj;var zj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wj=function(n){zj(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=(this.getX()+r)/2,s=(this.getY()+t)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e}(Y),cR=Wj;var qj=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kj=function(){function n(e,t,r,i,o,s,a){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,o=this.startY+t/2,s=new Int32Array(3),a=this.image,c=0;c<t;c++){var u=o+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var l=e;l<i&&!a.get(l,u);)l++;for(var f=0;l<i;){if(a.get(l,u))if(f===1)s[1]++;else if(f===2){if(this.foundPatternCross(s)){var h=this.handlePossibleCenter(s,u,l);if(h!==null)return h}s[0]=s[2],s[1]=1,s[2]=0,f=1}else s[++f]++;else f===1&&f++,s[f]++;l++}if(this.foundPatternCross(s)){var h=this.handlePossibleCenter(s,u,i);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new P},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var c=e;c>=0&&o.get(t,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&!o.get(t,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c)&&a[1]<=r;)a[1]++,c++;if(c===s||a[1]>r)return NaN;for(;c<s&&!o.get(t,c)&&a[2]<=r;)a[2]++,c++;if(a[2]>r)return NaN;var u=a[0]+a[1]+a[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,o,s=e[0]+e[1]+e[2],a=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,a,2*e[1],s);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var l=qj(this.possibleCenters),f=l.next();!f.done;f=l.next()){var h=f.value;if(h.aboutEquals(u,c,a))return h.combineEstimate(c,a,u)}}catch(m){i={error:m}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}var p=new cR(a,c,u);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},n}(),uR=Kj;var Xj=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yj=function(n){Xj(e,n);function e(t,r,i,o){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,a=(this.count*this.getY()+t)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,c,o)},e}(Y),lR=Yj;var Zj=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),dR=Zj;var Jl=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qj=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(de.TRY_HARDER)!==void 0,r=e!=null&&e.get(de.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*n.MAX_MODULES));(a<n.MIN_SKIP||t)&&(a=n.MIN_SKIP);for(var c=!1,u=new Int32Array(5),l=a-1;l<o&&!c;l+=a){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,h=0;h<s;h++)if(i.get(h,l))(f&1)===1&&f++,u[f]++;else if((f&1)===0)if(f===4)if(n.foundPatternCross(u)){var p=this.handlePossibleCenter(u,l,h,r);if(p===!0)if(a=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(l+=m-u[2]-a,h=s-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;else u[f]++;if(n.foundPatternCross(u)){var p=this.handlePossibleCenter(u,l,s,r);p===!0&&(a=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var y=this.selectBestPatterns();return Y.orderBestPatterns(y),new dR(y)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&t>=s&&a.get(t-s,e-s);)o[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!a.get(t-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||t<s||o[1]>r)return!1;for(;e>=s&&t>=s&&a.get(t-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var c=a.getHeight(),u=a.getWidth();for(s=1;e+s<c&&t+s<u&&a.get(t+s,e+s);)o[2]++,s++;if(e+s>=c||t+s>=u)return!1;for(;e+s<c&&t+s<u&&!a.get(t+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=c||t+s>=u||o[3]>=r)return!1;for(;e+s<c&&t+s<u&&a.get(t+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var l=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(l-i)<2*i&&n.foundPatternCross(o)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(t,c);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(t,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(t,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(t,c)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(t,c)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=2*i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,t);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,t)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(c,t)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(c,t);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,t)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(c,t)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),a=this.crossCheckVertical(t,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var c=o/7,u=!1,l=this.possibleCenters,f=0,h=l.length;f<h;f++){var p=l[f];if(p.aboutEquals(c,a,s)){l[f]=p.combineEstimate(a,s,c),u=!0;break}}if(!u){var m=new lR(s,a,c);l.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=Jl(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=n.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,o=0,s=0,a=this.possibleCenters.length;try{for(var c=Jl(this.possibleCenters),u=c.next();!u.done;u=c.next()){var l=u.value;l.getCount()>=n.CENTER_QUORUM&&(o++,s+=l.getEstimatedModuleSize())}}catch(y){e={error:y}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var f=s/a,h=0;try{for(var p=Jl(this.possibleCenters),m=p.next();!m.done;m=p.next()){var l=m.value;h+=Math.abs(l.getEstimatedModuleSize()-f)}}catch(y){r={error:y}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return h<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,o=this.possibleCenters.length;if(o<3)throw new P;var s=this.possibleCenters,a;if(o>3){var c=0,u=0;try{for(var l=Jl(this.possibleCenters),f=l.next();!f.done;f=l.next()){var h=f.value,p=h.getEstimatedModuleSize();c+=p,u+=p*p}}catch(V){e={error:V}}finally{try{f&&!f.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}a=c/o;var m=Math.sqrt(u/o-a*a);s.sort(function(V,U){var A=Math.abs(U.getEstimatedModuleSize()-a),E=Math.abs(V.getEstimatedModuleSize()-a);return A<E?-1:A>E?1:0});for(var y=Math.max(.2*a,m),_=0;_<s.length&&s.length>3;_++){var C=s[_];Math.abs(C.getEstimatedModuleSize()-a)>y&&(s.splice(_,1),_--)}}if(s.length>3){var c=0;try{for(var x=Jl(s),R=x.next();!R.done;R=x.next()){var O=R.value;c+=O.getEstimatedModuleSize()}}catch(U){r={error:U}}finally{try{R&&!R.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}a=c/s.length,s.sort(function(U,A){if(A.getCount()===U.getCount()){var E=Math.abs(A.getEstimatedModuleSize()-a),T=Math.abs(U.getEstimatedModuleSize()-a);return E<T?1:E>T?-1:0}else return A.getCount()-U.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),fR=Qj;var Jj=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(de.NEED_RESULT_POINT_CALLBACK);var t=new fR(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,r,i);if(o<1)throw new P("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,o),a=Rr.getProvisionalVersionForDimension(s),c=a.getDimensionForVersion()-7,u=null;if(a.getAlignmentPatternCenters().length>0)for(var l=r.getX()-t.getX()+i.getX(),f=r.getY()-t.getY()+i.getY(),h=1-3/c,p=Math.floor(t.getX()+h*(l-t.getX())),m=Math.floor(t.getY()+h*(f-t.getY())),y=4;y<=16;y<<=1)try{u=this.findAlignmentInRegion(o,p,m,y);break}catch(R){if(!(R instanceof P))throw R}var _=n.createTransform(t,r,i,u,s),C=n.sampleGrid(this.image,_,s),x;return u===null?x=[i,t,r]:x=[i,t,r,u],new Ps(C,x)},n.createTransform=function(e,t,r,i,o){var s=o-3.5,a,c,u,l;return i!==null?(a=i.getX(),c=i.getY(),u=s-3,l=u):(a=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),u=s,l=s),Kl.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,u,l,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),a,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=ks.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var o=Ce.round(Y.distance(e,t)/i),s=Ce.round(Y.distance(e,r)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new P("Dimensions could be not found.")}return a},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,a,c),o-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var o=Math.abs(i-t)>Math.abs(r-e);if(o){var s=e;e=t,t=s,s=r,r=i,i=s}for(var a=Math.abs(r-e),c=Math.abs(i-t),u=-a/2,l=e<r?1:-1,f=t<i?1:-1,h=0,p=r+l,m=e,y=t;m!==p;m+=l){var _=o?y:m,C=o?m:y;if(h===1===this.image.get(_,C)){if(h===2)return Ce.distance(m,y,e,t);h++}if(u+=c,u>0){if(y===i)break;y+=f,u-=a}}return h===2?Ce.distance(r+l,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var o=Math.floor(i*e),s=Math.max(0,t-o),a=Math.min(this.image.getWidth()-1,t+o);if(a-s<e*3)throw new P("Alignment top exceeds estimated module size.");var c=Math.max(0,r-o),u=Math.min(this.image.getHeight()-1,r+o);if(u-c<e*3)throw new P("Alignment bottom exceeds estimated module size.");var l=new uR(this.image,s,c,a-s,u-c,e,this.resultPointCallback);return l.find()},n}(),hR=Jj;var eH=function(){function n(){this.decoder=new aR}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(de.PURE_BARCODE)!==void 0){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),i=n.NO_POINTS}else{var s=new hR(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof Wp&&r.getOther().applyMirroredCorrection(i);var a=new Ge(r.getText(),r.getRawBytes(),void 0,i,K.QR_CODE,void 0),c=r.getByteSegments();c!==null&&a.putMetadata(gt.BYTE_SEGMENTS,c);var u=r.getECLevel();return u!==null&&a.putMetadata(gt.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(a.putMetadata(gt.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(gt.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new P;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],c=r[0];if(a>=c||o>=s)throw new P;if(s-o!==c-a&&(c=a+(s-o),c>=e.getWidth()))throw new P;var u=Math.round((c-a+1)/i),l=Math.round((s-o+1)/i);if(u<=0||l<=0)throw new P;if(l!==u)throw new P;var f=Math.floor(i/2);o+=f,a+=f;var h=a+Math.floor((u-1)*i)-c;if(h>0){if(h>f)throw new P;a-=h}var p=o+Math.floor((l-1)*i)-s;if(p>0){if(p>f)throw new P;o-=p}for(var m=new ft(u,l),y=0;y<l;y++)for(var _=o+Math.floor(y*i),C=0;C<u;C++)e.get(a+Math.floor(C*i),_)&&m.set(C,y);return m},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),o=e[0],s=e[1],a=!0,c=0;o<i&&s<r;){if(a!==t.get(o,s)){if(++c===5)break;a=!a}o++,s++}if(o===i||s===r)throw new P;return(o-e[0])/7},n.NO_POINTS=new Array,n}(),Vo=eH;var tH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nH=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return Ce.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=tH(e),a=s.next();!a.done;a=s.next()){var c=a.value;i[o++]=c}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=We.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),Se=nH;var rH=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),pR=rH;var iH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oH=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),o=n.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=n.detect(r,i)),new pR(i,o)},n.detect=function(e,t){for(var r,i,o=new Array,s=0,a=0,c=!1;s<t.getHeight();){var u=n.findVertices(t,s,a);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,a=0;try{for(var l=(r=void 0,iH(o)),f=l.next();!f.done;f=l.next()){var h=f.value;h[1]!=null&&(s=Math.trunc(Math.max(s,h[1].getY()))),h[3]!=null&&(s=Math.max(s,Math.trunc(h[3].getY())))}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,o.push(u),!e)break;u[2]!=null?(a=Math.trunc(u[2].getX()),s=Math.trunc(u[2].getY())):(a=Math.trunc(u[4].getX()),s=Math.trunc(u[4].getY()))}return o},n.findVertices=function(e,t,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,o,s){for(var a=new Array(4),c=!1,u=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var l=n.findGuardPattern(e,o,i,r,!1,s,u);if(l!=null){for(;i>0;){var f=n.findGuardPattern(e,o,--i,r,!1,s,u);if(f!=null)l=f;else{i++;break}}a[0]=new Y(l[0],i),a[1]=new Y(l[1],i),c=!0;break}}var h=i+1;if(c){for(var p=0,f=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);h<t;h++){var l=n.findGuardPattern(e,f[0],h,r,!1,s,u);if(l!=null&&Math.abs(f[0]-l[0])<n.MAX_PATTERN_DRIFT&&Math.abs(f[1]-l[1])<n.MAX_PATTERN_DRIFT)f=l,p=0;else{if(p>n.SKIPPED_ROW_COUNT_MAX)break;p++}}h-=p+1,a[2]=new Y(f[0],h),a[3]=new Y(f[1],h)}return h-i<n.BARCODE_MIN_HEIGHT&&We.fill(a,null),a},n.findGuardPattern=function(e,t,r,i,o,s,a){We.fillWithin(a,0,a.length,0);for(var c=t,u=0;e.get(c,r)&&c>0&&u++<n.MAX_PIXEL_DRIFT;)c--;for(var l=c,f=0,h=s.length,p=o;l<i;l++){var m=e.get(l,r);if(m!==p)a[f]++;else{if(f===h-1){if(n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,l]);c+=a[0]+a[1],Ie.arraycopy(a,2,a,0,f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,p=!p}}return f===h-1&&n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,l-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return 1/0;var c=o/s;r*=c;for(var u=0,l=0;l<i;l++){var f=e[l],h=t[l]*c,p=f>h?f-h:h-f;if(p>r)return 1/0;u+=p}return u/o},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),gR=oH;var sH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aH=function(){function n(e,t){if(t.length===0)throw new W;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Ie.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=sH(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],u=this.coefficients.length,l=1;l<u;l++)c=this.field.add(this.field.multiply(e,c),this.coefficients[l]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new W("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;Ie.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=this.field.add(t[a-s],r[a]);return new n(this.field,o)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new W("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new W("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=0;a<r;a++)for(var c=t[a],u=0;u<o;u++)s[a+u]=this.field.add(s[a+u],this.field.multiply(c,i[u]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new W;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new te,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),Hi=aH;var cH=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new W;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new Wl;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),mR=cH;var uH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lH=function(n){uH(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,s=0;s<t;s++)i.expTable[s]=o,o=o*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Hi(i,new Int32Array([0])),i.one=new Hi(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new W;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Hi(this,i)},e.PDF417_GF=new e(Se.NUMBER_OF_CODEWORDS,3),e}(mR),vR=lH;var dH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fH=function(){function n(){this.field=vR.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,o,s=new Hi(this.field,e),a=new Int32Array(t),c=!1,u=t;u>0;u--){var l=s.evaluateAt(this.field.exp(u));a[t-u]=l,l!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(r!=null)try{for(var h=dH(r),p=h.next();!p.done;p=h.next()){var m=p.value,y=this.field.exp(e.length-1-m),_=new Hi(this.field,new Int32Array([this.field.subtract(0,y),1]));f=f.multiply(_)}}catch(E){i={error:E}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}for(var C=new Hi(this.field,a),x=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),C,t),R=x[0],O=x[1],V=this.findErrorLocations(R),U=this.findErrorMagnitudes(O,R,V),u=0;u<V.length;u++){var A=e.length-1-this.field.log(V[u]);if(A<0)throw je.getChecksumInstance();e[A]=this.field.subtract(e[A],U[u])}return V.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,s=t,a=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var u=o,l=a;if(o=s,a=c,o.isZero())throw je.getChecksumInstance();s=u;for(var f=this.field.getZero(),h=o.getCoefficient(o.getDegree()),p=this.field.inverse(h);s.getDegree()>=o.getDegree()&&!s.isZero();){var m=s.getDegree()-o.getDegree(),y=this.field.multiply(s.getCoefficient(s.getDegree()),p);f=f.add(this.field.buildMonomial(m,y)),s=s.subtract(o.multiplyByMonomial(m,y))}c=f.multiply(a).subtract(l).negative()}var _=c.getCoefficient(0);if(_===0)throw je.getChecksumInstance();var C=this.field.inverse(_),x=c.multiply(C),R=s.multiply(C);return[x,R]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==t)throw je.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var a=new Hi(this.field,o),c=r.length,u=new Int32Array(c),s=0;s<c;s++){var l=this.field.inverse(r[s]),f=this.field.subtract(0,e.evaluateAt(l)),h=this.field.inverse(a.evaluateAt(l));u[s]=this.field.multiply(f,h)}return u},n}(),d_=fH;var hH=function(){function n(e,t,r,i,o){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,o)}return n.prototype.constructor_1=function(e,t,r,i,o){var s=t==null||r==null,a=i==null||o==null;if(s&&a)throw new P;s?(t=new Y(0,i.getY()),r=new Y(0,o.getY())):a&&(i=new Y(e.getWidth()-1,t.getY()),o=new Y(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var l=new Y(c.getX(),u);r?i=l:s=l}if(t>0){var f=r?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+t);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var p=new Y(f.getX(),h);r?o=p:a=p}return new n(this.image,i,o,s,a)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),ed=hH;var pH=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),yR=pH;var gH=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,a,c,u,l,f){if(s==="%%")return"%";if(t[++r]!==void 0){s=u?parseInt(u.substr(1)):void 0;var h=l?parseInt(l.substr(1)):void 0,p;switch(f){case"s":p=t[r];break;case"c":p=t[r][0];break;case"f":p=parseFloat(t[r]).toFixed(s);break;case"p":p=parseFloat(t[r]).toPrecision(s);break;case"e":p=parseFloat(t[r]).toExponential(s);break;case"x":p=parseInt(t[r]).toString(h||16);break;case"d":p=parseFloat(parseInt(t[r],h||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var m=parseInt(c),y=c&&c[0]+""=="0"?"0":" ";p.length<m;)p=a!==void 0?p+y:y+p;return p}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),Dc=gH;var mH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vH=function(){function n(e){this.boundingBox=new ed(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new Dc,i=0;try{for(var o=mH(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),qp=vH;var yH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_H=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},wH=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,o=function(f,h){var p={getKey:function(){return f},getValue:function(){return h}};p.getValue()>r?(r=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===r&&i.push(p.getKey())};try{for(var s=yH(this.values.entries()),a=s.next();!a.done;a=s.next()){var c=_H(a.value,2),u=c[0],l=c[1];o(u,l)}}catch(f){e={error:f}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Se.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),Vs=wH;var EH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),f_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IH=function(n){EH(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=f_(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=-1,l=1,f=0,h=a;h<c;h++)if(r[h]!=null){var p=r[h],m=p.getRowNumber()-u;if(m===0)f++;else if(m===1)l=Math.max(l,f),f=1,u=p.getRowNumber();else if(m<0||p.getRowNumber()>=t.getRowCount()||m>h)r[h]=null;else{var y=void 0;l>2?y=(l-2)*m:y=m;for(var _=y>=h,C=1;C<=y&&!_;C++)_=r[h-C]!=null;_?r[h]=null:(u=p.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=f_(this.getCodewords()),a=s.next();!a.done;a=s.next()){var c=a.value;if(c!=null){var u=c.getRowNumber();if(u>=o.length)continue;o[u]++}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),u=-1,l=1,f=0,h=s;h<a;h++)if(c[h]!=null){var p=c[h];p.setRowNumberAsRowIndicatorColumn();var m=p.getRowNumber()-u;m===0?f++:m===1?(l=Math.max(l,f),f=1,u=p.getRowNumber()):p.getRowNumber()>=t.getRowCount()?c[h]=null:(u=p.getRowNumber(),f=1)}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),o=new Vs,s=new Vs,a=new Vs,c=new Vs;try{for(var u=f_(i),l=u.next();!l.done;l=u.next()){var f=l.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,p=f.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:s.setValue(h*3+1);break;case 1:c.setValue(h/3),a.setValue(h%3);break;case 2:o.setValue(h+1);break}}}}catch(y){t={error:y}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<Se.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>Se.MAX_ROWS_IN_BARCODE)return null;var m=new yR(o.getValue()[0],s.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,m),m},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(qp),h_=IH;var CH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xH=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Se.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[t],a=this.detectionResultColumns[e-1].getCodewords(),c=a;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=a[t],u[3]=c[t],t>0&&(u[0]=r[t-1],u[4]=a[t-1],u[5]=c[t-1]),t>1&&(u[8]=r[t-2],u[10]=a[t-2],u[11]=c[t-2]),t<r.length-1&&(u[1]=r[t+1],u[6]=a[t+1],u[7]=c[t+1]),t<r.length-2&&(u[9]=r[t+2],u[12]=a[t+2],u[13]=c[t+2]);try{for(var l=CH(u),f=l.next();!f.done;f=l.next()){var h=f.value;if(n.adjustRowNumber(s,h))return}}catch(p){i={error:p}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Dc,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},n}(),_R=xH;var AH=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),wR=AH;var TH=function(){function n(){}return n.initialize=function(){for(var e=0;e<Se.SYMBOL_TABLE.length;e++)for(var t=Se.SYMBOL_TABLE[e],r=t&1,i=0;i<Se.BARS_IN_MODULE;i++){for(var o=0;(t&1)===r;)o+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Se.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Se.BARS_IN_MODULE-i-1]=Math.fround(o/Se.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=Ce.sum(e),r=new Int32Array(Se.BARS_IN_MODULE),i=0,o=0,s=0;s<Se.MODULES_IN_CODEWORD;s++){var a=t/(2*Se.MODULES_IN_CODEWORD)+s*t/Se.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Se.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=Ce.sum(e),r=new Array(Se.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var o=ql.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var a=0;a<n.RATIOS_TABLE.length;a++){for(var c=0,u=n.RATIOS_TABLE[a],l=0;l<Se.BARS_IN_MODULE;l++){var f=Math.fround(u[l]-r[l]);if(c+=Math.fround(f*f),c>=o)break}c<o&&(o=c,s=Se.SYMBOL_TABLE[a])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Se.SYMBOL_TABLE.length).map(function(e){return e=new Array(Se.BARS_IN_MODULE)}),n}(),ER=TH;var DH=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),p_=DH;var SH=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),g_=SH;var bH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RH=function(n){bH(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(tt),IR=RH;var NH=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new IR;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new wc;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),CR=NH;var MH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OH=function(n){MH(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(tt),xR=OH;var PH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kH=function(n){PH(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new W("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new xR;i=oe.MAX_VALUE}this.buf=We.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new wc;this.ensureCapacity(this.count+i),Ie.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return We.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(CR),AR=kH;var ht=function(n){return n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT",n}(ht||{});function TR(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Kp;function Bo(n){if(typeof Kp>"u"&&(Kp=TR()),Kp===null)throw new Error("BigInt is not supported!");return Kp(n)}function FH(){var n=[];n[0]=Bo(1);var e=Bo(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var LH=function(){function n(){}return n.decode=function(e,t){var r=new te(""),i=dt.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],a=new p_;o<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:o=n.textCompaction(e,o,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:o=n.byteCompaction(s,e,i,o,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:o=n.numericCompaction(e,o,r);break;case n.ECI_CHARSET:var c=dt.getCharacterSetECIByValue(e[o++]);break;case n.ECI_GENERAL_PURPOSE:o+=2;break;case n.ECI_USER_DEFINED:o++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=n.decodeMacroBlock(e,o,a);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new $;default:o--,o=n.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw $.getFormatInstance()}if(r.length()===0)throw $.getFormatInstance();var u=new Vi(null,r.toString(),null,t);return u.setOther(a),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw $.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<n.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];r.setSegmentIndex(oe.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new te;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var a=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new te;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new te;t=n.textCompaction(e,t+1,u),r.setSender(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var l=new te;t=n.textCompaction(e,t+1,l),r.setAddressee(l.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new te;t=n.numericCompaction(e,t+1,f),r.setSegmentCount(oe.parseInt(f.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new te;t=n.numericCompaction(e,t+1,h),r.setTimestamp(g_.parseLong(h.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new te;t=n.numericCompaction(e,t+1,p),r.setChecksum(oe.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new te;t=n.numericCompaction(e,t+1,m),r.setFileSize(g_.parseLong(m.toString()));break;default:throw $.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw $.getFormatInstance()}if(a!==-1){var y=t-a;r.isLastSegment()&&y--,r.setOptionalData(We.copyOfRange(e,a,a+y))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,a=!1;t<e[0]&&!a;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],o[s]=c,s++;break}}return n.decodeTextCompaction(i,o,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var o=ht.ALPHA,s=ht.ALPHA,a=0;a<r;){var c=e[a],u="";switch(o){case ht.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case n.LL:o=ht.LOWER;break;case n.ML:o=ht.MIXED;break;case n.PS:s=o,o=ht.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=ht.ALPHA;break}break;case ht.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case n.AS:s=o,o=ht.ALPHA_SHIFT;break;case n.ML:o=ht.MIXED;break;case n.PS:s=o,o=ht.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=ht.ALPHA;break}break;case ht.MIXED:if(c<n.PL)u=n.MIXED_CHARS[c];else switch(c){case n.PL:o=ht.PUNCT;break;case 26:u=" ";break;case n.LL:o=ht.LOWER;break;case n.AL:o=ht.ALPHA;break;case n.PS:s=o,o=ht.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=ht.ALPHA;break}break;case ht.PUNCT:if(c<n.PAL)u=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=ht.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=ht.ALPHA;break}break;case ht.ALPHA_SHIFT:if(o=s,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:o=ht.ALPHA;break}break;case ht.PUNCT_SHIFT:if(o=s,c<n.PAL)u=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=ht.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=ht.ALPHA;break}break}u!==""&&i.append(u),a++}},n.byteCompaction=function(e,t,r,i,o){var s=new AR,a=0,c=0,u=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var l=new Int32Array(6),f=t[i++];i<t[0]&&!u;)switch(l[a++]=f,c=900*c+f,f=t[i++],f){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(a%5===0&&a>0){for(var h=0;h<6;++h)s.write(Number(Bo(c)>>Bo(8*(5-h))));c=0,a=0}break}i===t[0]&&f<n.TEXT_COMPACTION_MODE_LATCH&&(l[a++]=f);for(var p=0;p<a;p++)s.write(l[p]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!u;){var m=t[i++];if(m<n.TEXT_COMPACTION_MODE_LATCH)a++,c=900*c+m;else switch(m){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(a%5===0&&a>0){for(var h=0;h<6;++h)s.write(Number(Bo(c)>>Bo(8*(5-h))));c=0,a=0}}break}return o.append(Kt.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,o=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var a=e[t++];if(t===e[0]&&(o=!0),a<n.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||a===n.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Bo(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Bo(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new $;return o.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=TR()?FH():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),m_=LH;var td=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VH=function(){function n(){}return n.decode=function(e,t,r,i,o,s,a){for(var c=new ed(e,t,r,i,o),u=null,l=null,f,h=!0;;h=!1){if(t!=null&&(u=n.getRowIndicatorColumn(e,c,t,!0,s,a)),i!=null&&(l=n.getRowIndicatorColumn(e,c,i,!1,s,a)),f=n.merge(u,l),f==null)throw P.getNotFoundInstance();var p=f.getBoundingBox();if(h&&p!=null&&(p.getMinY()<c.getMinY()||p.getMaxY()>c.getMaxY()))c=p;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,l);for(var y=u!=null,_=1;_<=m;_++){var C=y?_:m-_;if(f.getDetectionResultColumn(C)===void 0){var x=void 0;C===0||C===m?x=new h_(c,C===0):x=new qp(c),f.setDetectionResultColumn(C,x);for(var R=-1,O=R,V=c.getMinY();V<=c.getMaxY();V++){if(R=n.getStartColumn(f,C,V,y),R<0||R>c.getMaxX()){if(O===-1)continue;R=O}var U=n.detectCodeword(e,c.getMinX(),c.getMaxX(),y,R,V,s,a);U!=null&&(x.setCodeword(V,U),O=R,s=Math.min(s,U.getWidth()),a=Math.max(a,U.getWidth()))}}}return n.createDecoderResult(f)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=ed.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new _R(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=n.getMax(i),s=0;try{for(var a=td(i),c=a.next();!c.done;c=a.next()){var u=c.value;if(s+=o-u,u>0)break}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}for(var l=e.getCodewords(),f=0;s>0&&l[f]==null;f++)s--;for(var h=0,f=i.length-1;f>=0&&(h+=o-i[f],!(i[f]>0));f--);for(var f=l.length-1;h>0&&l[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(s,h,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var o=td(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,o,s){for(var a=new h_(t,i),c=0;c<2;c++)for(var u=c===0?1:-1,l=Math.trunc(Math.trunc(r.getX())),f=Math.trunc(Math.trunc(r.getY()));f<=t.getMaxY()&&f>=t.getMinY();f+=u){var h=n.detectCodeword(e,0,e.getWidth(),i,l,f,o,s);h!=null&&(a.setCodeword(f,h),i?l=h.getStartX():l=h.getEndX())}return a},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>Se.MAX_CODEWORDS_IN_BARCODE)throw P.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=t[a][c+1].getValue(),l=a*e.getBarcodeColumnCount()+c;u.length===0?r.push(l):u.length===1?i[l]=u[0]:(s.push(l),o.push(u))}for(var f=new Array(o.length),h=0;h<f.length;h++)f[h]=o[h];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Se.toIntArray(r),Se.toIntArray(s),f)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=o[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(l){var u=l instanceof je;if(!u)throw l}if(s.length===0)throw je.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw je.getChecksumInstance()}throw je.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var c=0;c<s[a].length;c++)s[a][c]=new Vs;var u=0;try{for(var l=td(e.getDetectionResultColumns()),f=l.next();!f.done;f=l.next()){var h=f.value;if(h!=null)try{for(var p=(i=void 0,td(h.getCodewords())),m=p.next();!m.done;m=p.next()){var y=m.value;if(y!=null){var _=y.getRowNumber();if(_>=0){if(_>=s.length)continue;s[_][u].setValue(y.getValue())}}}}catch(C){i={error:C}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}u++}}catch(C){t={error:C}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var o,s,a=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var u=0;n.isValidBarcodeColumn(e,t-a);){t-=a;try{for(var l=(o=void 0,td(e.getDetectionResultColumn(t).getCodewords())),f=l.next();!f.done;f=l.next()){var h=f.value;if(h!=null)return(i?h.getEndX():h.getStartX())+a*u*(h.getEndX()-h.getStartX())}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,o,s,a,c){o=n.adjustCodewordStartColumn(e,t,r,i,o,s);var u=n.getModuleBitCount(e,t,r,i,o,s);if(u==null)return null;var l,f=Ce.sum(u);if(i)l=o+f;else{for(var h=0;h<u.length/2;h++){var p=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=p}l=o,o=l-f}if(!n.checkCodewordSkew(f,a,c))return null;var m=ER.getDecodedValue(u),y=Se.getCodeword(m);return y===-1?null:new wR(o,l,n.getCodewordBucketNumber(m),y)},n.getModuleBitCount=function(e,t,r,i,o,s){for(var a=o,c=new Int32Array(8),u=0,l=i?1:-1,f=i;(i?a<r:a>=t)&&u<c.length;)e.get(a,s)===f?(c[u]++,a+=l):(u++,f=!f);return u===c.length||a===(i?r:t)&&u===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,o,s){for(var a=o,c=i?-1:1,u=0;u<2;u++){for(;(i?a>=t:a<r)&&i===e.get(a,s);){if(Math.abs(o-a)>n.CODEWORD_SKEW_SIZE)return o;a+=c}c=-c,i=!i}return a},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw $.getFormatInstance();var i=1<<t+1,o=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=m_.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw je.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw $.getFormatInstance();var r=e[0];if(r>e.length)throw $.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw $.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new Dc,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new d_,n}(),DR=VH;var BH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UH=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw P.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof $||r instanceof je?P.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,o,s=new Array,a=gR.detectMultiple(e,t,r);try{for(var c=BH(a.getPoints()),u=c.next();!u.done;u=c.next()){var l=u.value,f=DR.decode(a.getBits(),l[4],l[5],l[6],l[7],n.getMinCodewordWidth(l),n.getMaxCodewordWidth(l)),h=new Ge(f.getText(),f.getRawBytes(),void 0,l,K.PDF_417);h.putMetadata(gt.ERROR_CORRECTION_LEVEL,f.getECLevel());var p=f.getOther();p!=null&&h.putMetadata(gt.PDF417_EXTRA_METADATA,p),s.push(h)}}catch(m){i={error:m}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(m){return m})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?oe.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),Uo=UH;var jH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HH=function(n){jH(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(tt),Xp=HH;var SR=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$H=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(de.TRY_HARDER)!==void 0,r=e==null?null:e.get(de.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===K.UPC_A||s===K.UPC_E||s===K.EAN_13||s===K.EAN_8||s===K.CODABAR||s===K.CODE_39||s===K.CODE_93||s===K.CODE_128||s===K.ITF||s===K.RSS_14||s===K.RSS_EXPANDED});o&&!t&&i.push(new ti(e)),r.includes(K.QR_CODE)&&i.push(new Vo),r.includes(K.DATA_MATRIX)&&i.push(new Lo),r.includes(K.AZTEC)&&i.push(new Mo),r.includes(K.PDF_417)&&i.push(new Uo),o&&t&&i.push(new ti(e))}i.length===0&&(t||i.push(new ti(e)),i.push(new Vo),i.push(new Lo),i.push(new Mo),i.push(new Uo),t&&i.push(new ti(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=SR(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new Xp("No readers where selected, nothing can be read.");try{for(var i=SR(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof Xp)continue}}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new P("No MultiFormat Readers were able to detect the code.")},n}(),nd=$H;var GH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ove=function(n){GH(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,o=new nd;return o.setHints(t),i=n.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(pr);var zH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lve=function(n){zH(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Uo,t)||this}return e}(pr);var WH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jve=function(n){WH(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Vo,t)||this}return e}(pr);var bR=function(n){return n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40",n}(bR||{}),_e=bR;var qH=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new gr(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var s=r.multiply(new gr(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new W("No error correction bytes");var r=e.length-t;if(r<=0)throw new W("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(r);Ie.arraycopy(e,0,o,0,r);var s=new gr(this.field,o);s=s.multiplyByMonomial(t,1);for(var a=s.divide(i)[1],c=a.getCoefficients(),u=t-c.length,l=0;l<u;l++)e[r+l]=0;Ie.arraycopy(c,0,e,r+u,c.length)},n}(),rd=qH;var KH=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=r[s],c=0;c<i-1;c++){var u=a[c];u===a[c+1]&&u===r[s+1][c]&&u===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var c=r[s];a+6<i&&c[a]===1&&c[a+1]===0&&c[a+2]===1&&c[a+3]===1&&c[a+4]===1&&c[a+5]===0&&c[a+6]===1&&(n.isWhiteHorizontal(c,a-4,a)||n.isWhiteHorizontal(c,a+7,a+11))&&t++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(n.isWhiteVertical(r,a,s-4,s)||n.isWhiteVertical(r,a,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=r[s],c=0;c<i;c++)a[c]===1&&t++;var u=e.getHeight()*e.getWidth(),l=Math.floor(Math.abs(t*2-u)*10/u);return l*n.N4},n.getDataMaskBit=function(e,t,r){var i,o;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:o=r*t,i=(o&1)+o%3;break;case 6:o=r*t,i=(o&1)+o%3&1;break;case 7:o=r*t,i=o%3+(r+t&1)&1;break;default:throw new W("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var c=0,u=-1,l=0;l<o;l++){var f=t?s[a][l]:s[l][a];f===u?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,u=f)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),jo=KH;var XH=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YH=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=XH(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;We.fill(s,e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=t.bytes[r],a=0,c=this.width;a<c;++a)if(o[a]!==s[a])return!1;return!0},n.prototype.toString=function(){for(var e=new te,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),id=YH;var ZH=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new te;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),Sc=ZH;var QH=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),JH=function(n){QH(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(tt),at=JH;var e$=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,o){n.clearMatrix(o),n.embedBasicPatterns(r,o),n.embedTypeInfo(t,i,o),n.maybeEmbedVersionInfo(r,o),n.embedDataBits(e,i,o)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new lt;n.makeTypeInfoBits(e,t,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),c=n.TYPE_INFO_COORDINATES[o],u=c[0],l=c[1];if(r.setBoolean(u,l,a),o<8){var f=r.getWidth()-o-1,h=8;r.setBoolean(f,h,a)}else{var f=8,h=r.getHeight()-7+(o-8);r.setBoolean(f,h,a)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new lt;n.makeVersionInfoBits(e,r);for(var i=6*3-1,o=0;o<6;++o)for(var s=0;s<3;++s){var a=r.get(i);i--,t.setBoolean(o,t.getHeight()-11+s,a),t.setBoolean(t.getHeight()-11+s,o,a)}}},n.embedDataBits=function(e,t,r){for(var i=0,o=-1,s=r.getWidth()-1,a=r.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(var c=0;c<2;++c){var u=s-c;if(n.isEmpty(r.get(u,a))){var l=void 0;i<e.getSize()?(l=e.get(i),++i):l=!1,t!==255&&jo.getDataMaskBit(t,u,a)&&(l=!l),r.setBoolean(u,a,l)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new at("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-oe.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new W("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Sc.isValidMaskPattern(t))throw new at("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var o=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(o,10);var s=new lt;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new at("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new at("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new at;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new at;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new at;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var o=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var o=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var c=0;c!==s;c++){var u=i[c];u>=0&&n.isEmpty(t.get(u,a))&&n.embedPositionAdjustmentPattern(u-2,a-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),Yp=e$;var t$=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),RR=t$;var NR=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n$=function(){function n(){}return n.calculateMaskPenalty=function(e){return jo.applyMaskPenaltyRule1(e)+jo.applyMaskPenaltyRule2(e)+jo.applyMaskPenaltyRule3(e)+jo.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(_e.CHARACTER_SET)!==void 0;o&&(i=r.get(_e.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new lt;if(s===st.BYTE&&(o||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=dt.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,a)}this.appendModeInfo(s,a);var u=new lt;this.appendBytes(e,s,u,i);var l;if(r!==null&&r.get(_e.QR_VERSION)!==void 0){var f=Number.parseInt(r.get(_e.QR_VERSION).toString(),10);l=Rr.getVersionForNumber(f);var h=this.calculateBitsNeeded(s,a,u,l);if(!this.willFit(h,l,t))throw new at("Data too big for requested version")}else l=this.recommendVersion(t,s,a,u);var p=new lt;p.appendBitArray(a);var m=s===st.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,l,s,p),p.appendBitArray(u);var y=l.getECBlocksForLevel(t),_=l.getTotalCodewords()-y.getTotalECCodewords();this.terminateBits(_,p);var C=this.interleaveWithECBytes(p,l.getTotalCodewords(),_,y.getNumBlocks()),x=new Sc;x.setECLevel(t),x.setMode(s),x.setVersion(l);var R=l.getDimensionForVersion(),O=new id(R,R),V=this.chooseMaskPattern(C,t,l,O);return x.setMaskPattern(V),Yp.buildMatrix(C,t,l,V,O),x.setMatrix(O),x},n.recommendVersion=function(e,t,r,i){var o=this.calculateBitsNeeded(t,r,i,Rr.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(a,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),dt.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return st.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(n.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return st.BYTE}return i?st.ALPHANUMERIC:r?st.NUMERIC:st.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Kt.encode(e,dt.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<Sc.NUM_MASK_PATTERNS;a++){Yp.buildMatrix(e,t,r,a,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=a)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Rr.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new at("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(r),s=o.getTotalECCodewords(),a=i-s,c=(e+7)/8;return a>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new at("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new at("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,o,s){if(i>=r)throw new at("Block ID too large");var a=e%r,c=r-a,u=Math.floor(e/r),l=u+1,f=Math.floor(t/r),h=f+1,p=u-f,m=l-h;if(p!==m)throw new at("EC bytes mismatch");if(r!==c+a)throw new at("RS blocks mismatch");if(e!==(f+p)*c+(h+m)*a)throw new at("Total bytes mismatch");i<c?(o[0]=f,s[0]=p):(o[0]=h,s[0]=m)},n.interleaveWithECBytes=function(e,t,r,i){var o,s,a,c;if(e.getSizeInBytes()!==r)throw new at("Number of bits and data bytes does not match");for(var u=0,l=0,f=0,h=new Array,p=0;p<i;++p){var m=new Int32Array(1),y=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,p,m,y);var _=m[0],C=new Uint8Array(_);e.toBytes(8*u,C,0,_);var x=n.generateECBytes(C,y[0]);h.push(new RR(C,x)),l=Math.max(l,_),f=Math.max(f,x.length),u+=m[0]}if(r!==u)throw new at("Data bytes does not match offset");for(var R=new lt,p=0;p<l;++p)try{for(var O=(o=void 0,NR(h)),V=O.next();!V.done;V=O.next()){var U=V.value,C=U.getDataBytes();p<C.length&&R.appendBits(C[p],8)}}catch(S){o={error:S}}finally{try{V&&!V.done&&(s=O.return)&&s.call(O)}finally{if(o)throw o.error}}for(var p=0;p<f;++p)try{for(var A=(a=void 0,NR(h)),E=A.next();!E.done;E=A.next()){var U=E.value,x=U.getErrorCorrectionBytes();p<x.length&&R.appendBits(x[p],8)}}catch(S){a={error:S}}finally{try{E&&!E.done&&(c=A.return)&&c.call(A)}finally{if(a)throw a.error}}if(t!==R.getSizeInBytes())throw new at("Interleaving error: "+t+" and "+R.getSizeInBytes()+" differ.");return R},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=e[o]&255;new rd(St.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),o=0;o<t;o++)s[o]=i[r+o];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var o=r.getCharacterCountBits(t);if(e>=1<<o)throw new at(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},n.appendBytes=function(e,t,r,i){switch(t){case st.NUMERIC:n.appendNumericBytes(e,r);break;case st.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case st.BYTE:n.append8BitBytes(e,r,i);break;case st.KANJI:n.appendKanjiBytes(e,r);break;default:throw new at("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),a=n.getDigit(e.charAt(i+2));t.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(o*10+s,7),i+=2}else t.appendBits(o,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new at;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new at;t.appendBits(o*45+s,11),i+=2}else t.appendBits(o,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Kt.encode(e,r)}catch(c){throw new at(c)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];t.appendBits(a,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Kt.encode(e,dt.SJIS)}catch(f){throw new at(f)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,a=r[o+1]&255,c=s<<8&4294967295|a,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new at("Invalid byte sequence");var l=(u>>8)*192+(u&255);t.appendBits(l,13)}},n.appendECI=function(e,t){t.appendBits(st.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=dt.UTF8.getName(),n}(),$i=n$;var Nye=function(){function n(){}return n.prototype.write=function(e,t,r,i){if(i===void 0&&(i=null),e.length===0)throw new W("Found empty contents");if(t<0||r<0)throw new W("Requested dimensions are too small: "+t+"x"+r);var o=Vn.L,s=n.QUIET_ZONE_SIZE;i!==null&&(i.get(_e.ERROR_CORRECTION)!==void 0&&(o=Vn.fromString(i.get(_e.ERROR_CORRECTION).toString())),i.get(_e.MARGIN)!==void 0&&(s=Number.parseInt(i.get(_e.MARGIN).toString(),10)));var a=$i.encode(e,o,i);return this.renderResult(a,t,r,s)},n.prototype.writeToDom=function(e,t,r,i,o){o===void 0&&(o=null),typeof e=="string"&&(e=document.querySelector(e));var s=this.write(t,r,i,o);e&&e.appendChild(s)},n.prototype.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new Ot;for(var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),f=Math.max(r,u),h=Math.min(Math.floor(l/c),Math.floor(f/u)),p=Math.floor((l-s*h)/2),m=Math.floor((f-a*h)/2),y=this.createSVGElement(l,f),_=0,C=m;_<a;_++,C+=h)for(var x=0,R=p;x<s;x++,R+=h)if(o.get(x,_)===1){var O=this.createSvgRectElement(R,C,h,h);y.appendChild(O)}return y},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",t.toString()),r},n.prototype.createSvgRectElement=function(e,t,r,i){var o=document.createElementNS(n.SVG_NS,"rect");return o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",t.toString()),o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",i.toString()),o.setAttributeNS(null,"fill","#000000"),o},n.QUIET_ZONE_SIZE=4,n.SVG_NS="http://www.w3.org/2000/svg",n}();var r$=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){if(e.length===0)throw new W("Found empty contents");if(t!==K.QR_CODE)throw new W("Can only encode QR_CODE, but got "+t);if(r<0||i<0)throw new W("Requested dimensions are too small: "+r+"x"+i);var s=Vn.L,a=n.QUIET_ZONE_SIZE;o!==null&&(o.get(_e.ERROR_CORRECTION)!==void 0&&(s=Vn.fromString(o.get(_e.ERROR_CORRECTION).toString())),o.get(_e.MARGIN)!==void 0&&(a=Number.parseInt(o.get(_e.MARGIN).toString(),10)));var c=$i.encode(e,s,o);return n.renderResult(c,r,i,a)},n.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new Ot;for(var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),f=Math.max(r,u),h=Math.min(Math.floor(l/c),Math.floor(f/u)),p=Math.floor((l-s*h)/2),m=Math.floor((f-a*h)/2),y=new ft(l,f),_=0,C=m;_<a;_++,C+=h)for(var x=0,R=p;x<s;x++,R+=h)o.get(x,_)===1&&y.setRegion(R,C,h,h);return y},n.QUIET_ZONE_SIZE=4,n}(),v_=r$;var r1e=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){var s;switch(t){case K.QR_CODE:s=new v_;break;default:throw new W("No encoder available for format "+t)}return s.encode(e,t,r,i,o)},n}();var i$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),u1e=function(n){i$(e,n);function e(t,r,i,o,s,a,c,u){var l=n.call(this,a,c)||this;if(l.yuvData=t,l.dataWidth=r,l.dataHeight=i,l.left=o,l.top=s,o+a>r||s+c>i)throw new W("Crop rectangle does not fit within image data.");return u&&l.reverseHorizontal(a,c),l}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new W("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Ie.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ie.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*t;Ie.arraycopy(this.yuvData,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var c=a*t,u=0;u<t;u++){var l=o[s+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+u]=4278190080|l*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var a=s+t/2,c=s,u=s+t-1;c<a;c++,u--){var l=i[c];i[c]=i[u],i[u]=l}},e.prototype.invert=function(){return new Li(this)},e.THUMBNAIL_SCALE_FACTOR=2,e}(br);var o$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),m1e=function(n){o$(e,n);function e(t,r,i,o,s,a,c){var u=n.call(this,r,i)||this;if(u.dataWidth=o,u.dataHeight=s,u.left=a,u.top=c,t.BYTES_PER_ELEMENT===4){for(var l=r*i,f=new Uint8ClampedArray(l),h=0;h<l;h++){var p=t[h],m=p>>16&255,y=p>>7&510,_=p&255;f[h]=(m+y+_)/4&255}u.luminances=f}else u.luminances=t;if(o===void 0&&(u.dataWidth=r),s===void 0&&(u.dataHeight=i),a===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+r>u.dataWidth||u.top+i>u.dataHeight)throw new W("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new W("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Ie.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ie.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*t;Ie.arraycopy(this.luminances,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new Li(this)},e}(br);var s$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),a$=function(n){s$(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(dt),Bs=a$;var c$=function(){function n(){}return n.ISO_8859_1=dt.ISO8859_1,n}(),od=c$;var u$=function(){function n(e,t,r){this.codewords=e,this.numcols=t,this.numrows=r,this.bits=new Uint8Array(t*r),We.fill(this.bits,2)}return n.prototype.getNumrows=function(){return this.numrows},n.prototype.getNumcols=function(){return this.numcols},n.prototype.getBits=function(){return this.bits},n.prototype.getBit=function(e,t){return this.bits[t*this.numcols+e]===1},n.prototype.setBit=function(e,t,r){this.bits[t*this.numcols+e]=r?1:0},n.prototype.noBit=function(e,t){return this.bits[t*this.numcols+e]===2},n.prototype.place=function(){var e=0,t=4,r=0;do{t===this.numrows&&r===0&&this.corner1(e++),t===this.numrows-2&&r===0&&this.numcols%4!==0&&this.corner2(e++),t===this.numrows-2&&r===0&&this.numcols%8===4&&this.corner3(e++),t===this.numrows+4&&r===2&&this.numcols%8===0&&this.corner4(e++);do t<this.numrows&&r>=0&&this.noBit(r,t)&&this.utah(t,r,e++),t-=2,r+=2;while(t>=0&&r<this.numcols);t++,r+=3;do t>=0&&r<this.numcols&&this.noBit(r,t)&&this.utah(t,r,e++),t+=2,r-=2;while(t<this.numrows&&r>=0);t+=3,r++}while(t<this.numrows||r<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},n.prototype.module=function(e,t,r,i){e<0&&(e+=this.numrows,t+=4-(this.numrows+4)%8),t<0&&(t+=this.numcols,e+=4-(this.numcols+4)%8);var o=this.codewords.charCodeAt(r);o&=1<<8-i,this.setBit(t,e,o!==0)},n.prototype.utah=function(e,t,r){this.module(e-2,t-2,r,1),this.module(e-2,t-1,r,2),this.module(e-1,t-2,r,3),this.module(e-1,t-1,r,4),this.module(e-1,t,r,5),this.module(e,t-2,r,6),this.module(e,t-1,r,7),this.module(e,t,r,8)},n.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},n.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},n.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},n.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},n}(),Zp=u$;var y_,__=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],MR=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],l$=301,d$=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=l$);return{LOG:n,ALOG:e}},sd=(y_=d$([],[]),y_.LOG),w_=y_.ALOG;var E_=129,Qp=230,OR=231,PR=235,kR=236,FR=237,LR=238,VR=239,BR=240,Jp=254,UR=254,bc="[)>05",Rc="[)>06",Nc="",Ve=0,Vt=1,en=2,bt=3,Pt=4,Xt=5;var f$=function(){function n(){}return n.encodeECC200=function(e,t){if(e.length!==t.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var r=new te;r.append(e);var i=t.getInterleavedBlockCount();if(i===1){var o=this.createECCBlock(e,t.getErrorCodewords());r.append(o)}else{for(var s=[],a=[],c=0;c<i;c++)s[c]=t.getDataLengthForInterleavedBlock(c+1),a[c]=t.getErrorLengthForInterleavedBlock(c+1);for(var u=0;u<i;u++){for(var l=new te,f=u;f<t.getDataCapacity();f+=i)l.append(e.charAt(f));for(var o=this.createECCBlock(l.toString(),a[u]),h=0,p=u;p<a[u]*i;p+=i)r.setCharAt(t.getDataCapacity()+p,o.charAt(h++))}}return r.toString()},n.createECCBlock=function(e,t){for(var r=-1,i=0;i<__.length;i++)if(__[i]===t){r=i;break}if(r<0)throw new Error("Illegal number of error correction codewords specified: "+t);for(var o=MR[r],s=[],i=0;i<t;i++)s[i]=0;for(var i=0;i<e.length;i++){for(var a=s[t-1]^e.charAt(i).charCodeAt(0),c=t-1;c>0;c--)a!==0&&o[c]!==0?s[c]=s[c-1]^w_[(sd[a]+sd[o[c]])%255]:s[c]=s[c-1];a!==0&&o[0]!==0?s[0]=w_[(sd[a]+sd[o[0]])%255]:s[0]=0}for(var u=[],i=0;i<t;i++)u[i]=s[t-i-1];return u.map(function(l){return String.fromCharCode(l)}).join("")},n}(),eg=f$;var I_=function(){function n(){}return n.prototype.getEncodingMode=function(){return Ve},n.prototype.encode=function(e){var t=ye.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=ye.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Xt:e.writeCodeword(OR),e.signalEncoderChange(Xt);return;case Vt:e.writeCodeword(Qp),e.signalEncoderChange(Vt);return;case bt:e.writeCodeword(LR),e.signalEncoderChange(bt);break;case en:e.writeCodeword(VR),e.signalEncoderChange(en);break;case Pt:e.writeCodeword(BR),e.signalEncoderChange(Pt);break;default:throw new Error("Illegal mode: "+i)}else ye.isExtendedASCII(r)?(e.writeCodeword(PR),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(ye.isDigit(e)&&ye.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}();var C_=function(){function n(){}return n.prototype.getEncodingMode=function(){return Xt},n.prototype.encode=function(e){var t=new te;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=ye.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Ve);break}}var o=t.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var c=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||c)if(o<=249)t.setCharAt(0,fe.getCharAt(o));else if(o<=1555)t.setCharAt(0,fe.getCharAt(Math.floor(o/250)+249)),t.insert(1,fe.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var u=0,r=t.length();u<r;u++)e.writeCodeword(this.randomize255State(t.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}();var Us=function(){function n(){}return n.prototype.getEncodingMode=function(){return Vt},n.prototype.encodeMaximal=function(e){for(var t=new te,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var a=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,l=Math.floor(t.length()%3);(l===2&&u!==2||l===1&&(r>3||u!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Qp),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new te;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),o=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new te;for(t.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var u=t.length();if(u%3===0){var l=ye.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(l!==this.getEncodingMode()){e.signalEncoderChange(Ve);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var o=t.length(),s=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Jp)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Jp),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(Jp)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Ve)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,o=new te;return o.append(r),o.append(i),o.toString()},n}();var x_=function(){function n(){}return n.prototype.getEncodingMode=function(){return Pt},n.prototype.encode=function(e){for(var t=new te;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var s=ye.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Ve);break}}}t.append(fe.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,a=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),u=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}u?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(Ve)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(fe.getCharAt(e-64)):ye.illegalCharacter(fe.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(o<<6)+s,c=a>>16&255,u=a>>8&255,l=a&255,f=new te;return f.append(c),t>=2&&f.append(u),t>=3&&f.append(l),f.toString()},n}();var h$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),p$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ke=function(){function n(e,t,r,i,o,s,a,c){a===void 0&&(a=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=c}return n.lookup=function(e,t,r,i,o){var s,a;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=p$(m$),u=c.next();!u.done;u=c.next()){var l=u.value;if(!(t===1&&l.rectangular)&&!(t===2&&!l.rectangular)&&!(r!=null&&(l.getSymbolWidth()<r.getWidth()||l.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(l.getSymbolWidth()>i.getWidth()||l.getSymbolHeight()>i.getHeight()))&&e<=l.dataCapacity)return l}}catch(f){s={error:f}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),Mc=Ke,g$=function(n){h$(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Ke),m$=[new Ke(!1,3,5,8,8,1),new Ke(!1,5,7,10,10,1),new Ke(!0,5,7,16,6,1),new Ke(!1,8,10,12,12,1),new Ke(!0,10,11,14,6,2),new Ke(!1,12,12,14,14,1),new Ke(!0,16,14,24,10,1),new Ke(!1,18,14,16,16,1),new Ke(!1,22,18,18,18,1),new Ke(!0,22,18,16,10,2),new Ke(!1,30,20,20,20,1),new Ke(!0,32,24,16,14,2),new Ke(!1,36,24,22,22,1),new Ke(!1,44,28,24,24,1),new Ke(!0,49,28,22,14,2),new Ke(!1,62,36,14,14,4),new Ke(!1,86,42,16,16,4),new Ke(!1,114,48,18,18,4),new Ke(!1,144,56,20,20,4),new Ke(!1,174,68,22,22,4),new Ke(!1,204,84,24,24,4,102,42),new Ke(!1,280,112,14,14,16,140,56),new Ke(!1,368,144,16,16,16,92,36),new Ke(!1,456,192,18,18,16,114,48),new Ke(!1,576,224,20,20,16,144,56),new Ke(!1,696,272,22,22,16,174,68),new Ke(!1,816,336,24,24,16,136,56),new Ke(!1,1050,408,18,18,36,175,68),new Ke(!1,1304,496,20,20,36,163,62),new g$];var A_=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(a){return a.charCodeAt(0)}),r=new te,i=0,o=t.length;i<o;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new te,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Mc.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}();var v$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),T_=function(n){v$(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return bt},e.prototype.encode=function(t){for(var r=new te;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(t,r);var s=ye.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(Ve);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):ye.illegalCharacter(fe.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=r.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(UR),t.getNewEncoding()<0&&t.signalEncoderChange(Ve)},e}(Us);var y$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),D_=function(n){y$(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return en},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(Us);var _$=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=E_+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,o){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new Us,a=[new I_,s,new D_,new T_,new x_,new C_],c=new A_(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(bc)&&e.endsWith(Nc)?(c.writeCodeword(kR),c.setSkipAtEnd(2),c.pos+=bc.length):e.startsWith(Rc)&&e.endsWith(Nc)&&(c.writeCodeword(FR),c.setSkipAtEnd(2),c.pos+=Rc.length);var u=Ve;for(o&&(s.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)a[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var l=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();l<f&&u!==Ve&&u!==Xt&&u!==Pt&&c.writeCodeword("\xFE");var h=c.getCodewords();for(h.length()<f&&h.append(E_);h.length()<f;)h.append(this.randomize253State(h.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===bt&&i===bt){for(var o=Math.min(t+3,e.length),s=t;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return Ve}else if(r===Pt&&i===Pt){for(var o=Math.min(t+4,e.length),s=t;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return Ve}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===Ve?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(t+o===e.length){We.fill(s,0),We.fill(a,0);var c=this.findMinimums(i,a,oe.MAX_VALUE,s),u=this.getMinimumCount(s);if(a[Ve]===c)return Ve;if(u===1){if(s[Xt]>0)return Xt;if(s[Pt]>0)return Pt;if(s[en]>0)return en;if(s[bt]>0)return bt}return Vt}var l=e.charCodeAt(t+o);if(o++,this.isDigit(l)?i[Ve]+=.5:this.isExtendedASCII(l)?(i[Ve]=Math.ceil(i[Ve]),i[Ve]+=2):(i[Ve]=Math.ceil(i[Ve]),i[Ve]++),this.isNativeC40(l)?i[Vt]+=2/3:this.isExtendedASCII(l)?i[Vt]+=8/3:i[Vt]+=4/3,this.isNativeText(l)?i[en]+=2/3:this.isExtendedASCII(l)?i[en]+=8/3:i[en]+=4/3,this.isNativeX12(l)?i[bt]+=2/3:this.isExtendedASCII(l)?i[bt]+=13/3:i[bt]+=10/3,this.isNativeEDIFACT(l)?i[Pt]+=3/4:this.isExtendedASCII(l)?i[Pt]+=17/4:i[Pt]+=13/4,this.isSpecialB256(l)?i[Xt]+=4:i[Xt]++,o>=4){if(We.fill(s,0),We.fill(a,0),this.findMinimums(i,a,oe.MAX_VALUE,s),a[Ve]<this.min(a[Xt],a[Vt],a[en],a[bt],a[Pt]))return Ve;if(a[Xt]<a[Ve]||a[Xt]+1<this.min(a[Vt],a[en],a[bt],a[Pt]))return Xt;if(a[Pt]+1<this.min(a[Xt],a[Vt],a[en],a[bt],a[Ve]))return Pt;if(a[en]+1<this.min(a[Xt],a[Vt],a[Pt],a[bt],a[Ve]))return en;if(a[bt]+1<this.min(a[Xt],a[Vt],a[Pt],a[en],a[Ve]))return bt;if(a[Vt]+1<this.min(a[Ve],a[Xt],a[Pt],a[en])){if(a[Vt]<a[bt])return Vt;if(a[Vt]===a[bt]){for(var f=t+o+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return bt;if(!this.isNativeX12(h))break;f++}return Vt}}}}},n.min=function(e,t,r,i,o){var s=Math.min(e,Math.min(t,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},n.findMinimums=function(e,t,r,i){for(var o=0;o<6;o++){var s=t[o]=Math.ceil(e[o]);r>s&&(r=s,We.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=oe.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),ye=_$;var S_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jR=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Kt.encode(e,this.charset)!=null}catch{return!1}},n}(),HR=function(){function n(e,t,r){var i,o,s,a,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(T){return new jR(Bs.forName(T))}),this.encoders=[];var l=[];l.push(new jR(od.ISO_8859_1));for(var f=t!=null&&t.name.startsWith("UTF"),h=0;h<e.length;h++){var p=!1;try{for(var m=(i=void 0,S_(l)),y=m.next();!y.done;y=m.next()){var _=y.value,C=e.charAt(h),x=C.charCodeAt(0);if(x===r||_.canEncode(C)){p=!0;break}}}catch(T){i={error:T}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}if(!p)try{for(var R=(s=void 0,S_(this.ENCODERS)),O=R.next();!O.done;O=R.next()){var _=O.value;if(_.canEncode(e.charAt(h))){l.push(_),p=!0;break}}}catch(T){s={error:T}}finally{try{O&&!O.done&&(a=R.return)&&a.call(R)}finally{if(s)throw s.error}}p||(f=!0)}if(l.length===1&&!f)this.encoders=[l[0]];else{this.encoders=[];var V=0;try{for(var U=S_(l),A=U.next();!A.done;A=U.next()){var _=A.value;this.encoders[V++]=_}}catch(T){c={error:T}}finally{try{A&&!A.done&&(u=U.return)&&u.call(U)}finally{if(c)throw c.error}}}var E=-1;if(t!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&t.name===this.encoders[h].name){E=h;break}}this.priorityEncoderIndex=E}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Kt.encode(fe.getCharAt(e),this.encoders[t].name)},n}();var w$=3,GR=function(){function n(e,t,r){this.fnc1=r;var i=new HR(e,t,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new te,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,o,s){var a=e.charAt(i).charCodeAt(0),c=0,u=t.length();t.getPriorityEncoderIndex()>=0&&(a===s||t.canEncode(a,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),u=c+1);for(var l=c;l<u;l++)(a===s||t.canEncode(a,l))&&this.addEdge(r,i+1,new $R(a,t,l,o,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,o=new $R[i+1][t.length()];this.addEdges(e,t,o,0,null,r);for(var s=1;s<=i;s++){for(var a=0;a<t.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,t,o,s,o[s][a],r);for(var a=0;a<t.length();a++)o[s-1][a]=null}for(var c=-1,u=oe.MAX_VALUE,a=0;a<t.length();a++)if(o[i][a]!=null){var l=o[i][a];l.cachedTotalSize<u&&(u=l.cachedTotalSize,c=a)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=o[i][c];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var p=t.encode(h.c,h.encoderIndex),s=p.length-1;s>=0;s--)f.unshift(p[s]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&f.unshift(256+t.getECIValue(h.encoderIndex)),h=h.previous}for(var y=[],s=0;s<y.length;s++)y[s]=f[s];return y},n}();var $R=function(){function n(e,t,r,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(s+=w$),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}();var E$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ad=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I$=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},C$=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(I$(arguments[e]));return n},Q=function(n){return n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256",n}(Q||{}),x$=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],An=function(){function n(){}return n.isExtendedASCII=function(e,t){return e!==t&&e>=128&&e<=255},n.isInC40Shift1Set=function(e){return e<=31},n.isInC40Shift2Set=function(e,t){var r,i;try{for(var o=ad(x$),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.charCodeAt(0)===e)return!0}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return e===t},n.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},n.isInTextShift2Set=function(e,t){return this.isInC40Shift2Set(e,t)},n.encodeHighLevel=function(e,t,r,i){t===void 0&&(t=null),r===void 0&&(r=-1),i===void 0&&(i=0);var o=0;return e.startsWith(bc)&&e.endsWith(Nc)?(o=5,e=e.substring(bc.length,e.length-2)):e.startsWith(Rc)&&e.endsWith(Nc)&&(o=6,e=e.substring(Rc.length,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,C$(this.encode(e,t,r,i,o)))))},n.encode=function(e,t,r,i,o){return this.encodeMinimally(new T$(e,t,r,i,o)).getBytes()},n.addEdge=function(e,t){var r=t.fromPosition+t.characterLength;(e[r][t.getEndMode()]===null||e[r][t.getEndMode()].cachedTotalSize>t.cachedTotalSize)&&(e[r][t.getEndMode()]=t)},n.getNumberOfC40Words=function(e,t,r,i){for(var o=0,s=t;s<e.length();s++){if(e.isECI(s))return i[0]=0,0;var a=e.charAt(s);if(r&&ye.isNativeC40(a)||!r&&ye.isNativeText(a))o++;else if(!n.isExtendedASCII(a,e.getFNC1Character()))o+=2;else{var c=a&255;c>=128&&(r&&ye.isNativeC40(c-128)||!r&&ye.isNativeText(c-128))?o+=3:o+=4}if(o%3===0||(o-2)%3===0&&s+1===e.length())return i[0]=s-t+1,Math.ceil(o/3)}return i[0]=0,0},n.addEdges=function(e,t,r,i){var o,s;if(e.isECI(r)){this.addEdge(t,new vr(e,Q.ASCII,r,1,i));return}var a=e.charAt(r);if(i===null||i.getEndMode()!==Q.EDF){ye.isDigit(a)&&e.haveNCharacters(r,2)&&ye.isDigit(e.charAt(r+1))?this.addEdge(t,new vr(e,Q.ASCII,r,2,i)):this.addEdge(t,new vr(e,Q.ASCII,r,1,i));var c=[Q.C40,Q.TEXT];try{for(var u=ad(c),l=u.next();!l.done;l=u.next()){var f=l.value,h=[];n.getNumberOfC40Words(e,r,f===Q.C40,h)>0&&this.addEdge(t,new vr(e,f,r,h[0],i))}}catch(y){o={error:y}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}e.haveNCharacters(r,3)&&ye.isNativeX12(e.charAt(r))&&ye.isNativeX12(e.charAt(r+1))&&ye.isNativeX12(e.charAt(r+2))&&this.addEdge(t,new vr(e,Q.X12,r,3,i)),this.addEdge(t,new vr(e,Q.B256,r,1,i))}var p;for(p=0;p<3;p++){var m=r+p;if(e.haveNCharacters(m,1)&&ye.isNativeEDIFACT(e.charAt(m)))this.addEdge(t,new vr(e,Q.EDF,r,p+1,i));else break}p===3&&e.haveNCharacters(r,4)&&ye.isNativeEDIFACT(e.charAt(r+3))&&this.addEdge(t,new vr(e,Q.EDF,r,4,i))},n.encodeMinimally=function(e){var t=e.length(),r=Array(t+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,r,0,null);for(var i=1;i<=t;i++){for(var o=0;o<6;o++)r[i][o]!==null&&i<t&&this.addEdges(e,r,i,r[i][o]);for(var o=0;o<6;o++)r[i-1][o]=null}for(var s=-1,a=oe.MAX_VALUE,o=0;o<6;o++)if(r[t][o]!==null){var c=r[t][o],u=o>=1&&o<=3?c.cachedTotalSize+1:c.cachedTotalSize;u<a&&(a=u,s=o)}if(s<0)throw new Error('Failed to encode "'+e+'"');return new A$(r[t][s])},n}();var A$=function(){function n(e){var t=e.input,r=0,i=[],o=[],s=[];(e.mode===Q.C40||e.mode===Q.TEXT||e.mode===Q.X12)&&e.getEndMode()!==Q.ASCII&&(r+=this.prepend(vr.getBytes(254),i));for(var a=e;a!==null;)r+=this.prepend(a.getDataBytes(),i),(a.previous===null||a.getPreviousStartMode()!==a.getMode())&&(a.getMode()===Q.B256&&(r<=249?(i.unshift(r),r++):(i.unshift(r%250),i.unshift(r/250+249),r+=2),o.push(i.length),s.push(r)),this.prepend(a.getLatchBytes(),i),r=0),a=a.previous;t.getMacroId()===5?r+=this.prepend(vr.getBytes(236),i):t.getMacroId()===6&&(r+=this.prepend(vr.getBytes(237),i)),t.getFNC1Character()>0&&(r+=this.prepend(vr.getBytes(232),i));for(var c=0;c<o.length;c++)this.applyRandomPattern(i,i.length-o[c],s[c]);var u=e.getMinSymbolSize(i.length);for(i.length<u&&i.push(129);i.length<u;)i.push(this.randomize253State(i.length+1));this.bytes=new Uint8Array(i.length);for(var c=0;c<this.bytes.length;c++)this.bytes[c]=i[c]}return n.prototype.prepend=function(e,t){for(var r=e.length-1;r>=0;r--)t.unshift(e[r]);return e.length},n.prototype.randomize253State=function(e){var t=149*e%253+1,r=129+t;return r<=254?r:r-254},n.prototype.applyRandomPattern=function(e,t,r){for(var i=0;i<r;i++){var o=t+i,s=e[o]&255,a=149*(o+1)%255+1,c=s+a;e[o]=c<=255?c:c-256}},n.prototype.getBytes=function(){return this.bytes},n}(),vr=function(){function n(e,t,r,i,o){if(this.input=e,this.mode=t,this.fromPosition=r,this.characterLength=i,this.previous=o,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(r+i<=e.length()))throw new Error("Invalid edge");var s=o!==null?o.cachedTotalSize:0,a=this.getPreviousMode();switch(t){case Q.ASCII:s++,(e.isECI(r)||An.isExtendedASCII(e.charAt(r),e.getFNC1Character()))&&s++,(a===Q.C40||a===Q.TEXT||a===Q.X12)&&s++;break;case Q.B256:s++,(a!==Q.B256||this.getB256Size()===250)&&s++,a===Q.ASCII?s++:(a===Q.C40||a===Q.TEXT||a===Q.X12)&&(s+=2);break;case Q.C40:case Q.TEXT:case Q.X12:if(t===Q.X12)s+=2;else{var c=[];s+=An.getNumberOfC40Words(e,r,t===Q.C40,c)*2}a===Q.ASCII||a===Q.B256?s++:a!==t&&(a===Q.C40||a===Q.TEXT||a===Q.X12)&&(s+=2);break;case Q.EDF:s+=3,a===Q.ASCII||a===Q.B256?s++:(a===Q.C40||a===Q.TEXT||a===Q.X12)&&(s+=2);break}this.cachedTotalSize=s}return n.prototype.getB256Size=function(){for(var e=0,t=this;t!==null&&t.mode===Q.B256&&e<=250;)e++,t=t.previous;return e},n.prototype.getPreviousStartMode=function(){return this.previous===null?Q.ASCII:this.previous.mode},n.prototype.getPreviousMode=function(){return this.previous===null?Q.ASCII:this.previous.getEndMode()},n.prototype.getEndMode=function(){if(this.mode===Q.EDF){if(this.characterLength<4)return Q.ASCII;var e=this.getLastASCII();if(e>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return Q.ASCII}if(this.mode===Q.C40||this.mode===Q.TEXT||this.mode===Q.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&this.getCodewordsRemaining(this.cachedTotalSize)===0)return Q.ASCII;var e=this.getLastASCII();if(e===1&&this.getCodewordsRemaining(this.cachedTotalSize+1)===0)return Q.ASCII}return this.mode},n.prototype.getMode=function(){return this.mode},n.prototype.getLastASCII=function(){var e=this.input.length(),t=this.fromPosition+this.characterLength;return e-t>4||t>=e?0:e-t===1?An.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?0:1:e-t===2?An.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())||An.isExtendedASCII(this.input.charAt(t+1),this.input.getFNC1Character())?0:ye.isDigit(this.input.charAt(t))&&ye.isDigit(this.input.charAt(t+1))?1:2:e-t===3?ye.isDigit(this.input.charAt(t))&&ye.isDigit(this.input.charAt(t+1))&&!An.isExtendedASCII(this.input.charAt(t+2),this.input.getFNC1Character())||ye.isDigit(this.input.charAt(t+1))&&ye.isDigit(this.input.charAt(t+2))&&!An.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?2:0:ye.isDigit(this.input.charAt(t))&&ye.isDigit(this.input.charAt(t+1))&&ye.isDigit(this.input.charAt(t+2))&&ye.isDigit(this.input.charAt(t+3))?2:0},n.prototype.getMinSymbolSize=function(e){var t,r,i,o,s,a;switch(this.input.getShapeHint()){case 1:try{for(var c=ad(this.squareCodewordCapacities),u=c.next();!u.done;u=c.next()){var l=u.value;if(l>=e)return l}}catch(y){t={error:y}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}break;case 2:try{for(var f=ad(this.rectangularCodewordCapacities),h=f.next();!h.done;h=f.next()){var l=h.value;if(l>=e)return l}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}break}try{for(var p=ad(this.allCodewordCapacities),m=p.next();!m.done;m=p.next()){var l=m.value;if(l>=e)return l}}catch(y){s={error:y}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},n.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},n.getBytes=function(e,t){var r=new Uint8Array(t?2:1);return r[0]=e,t&&(r[1]=t),r},n.prototype.setC40Word=function(e,t,r,i,o){var s=1600*(r&255)+40*(i&255)+(o&255)+1;e[t]=s/256,e[t+1]=s%256},n.prototype.getX12Value=function(e){return e===13?0:e===42?1:e===62?2:e===32?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},n.prototype.getX12Words=function(){if(this.characterLength%3!==0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),t=0;t<e.length;t+=2)this.setC40Word(e,t,this.getX12Value(this.input.charAt(this.fromPosition+t/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+2)));return e},n.prototype.getShiftValue=function(e,t,r){return t&&An.isInC40Shift1Set(e)||!t&&An.isInTextShift1Set(e)?0:t&&An.isInC40Shift2Set(e,r)||!t&&An.isInTextShift2Set(e,r)?1:2},n.prototype.getC40Value=function(e,t,r,i){if(r===i){if(t!==2)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?r<=31?r:r===32?3:r<=47?r-33:r<=57?r-44:r<=64?r-43:r<=90?r-51:r<=95?r-69:r<=127?r-96:r:r===0?0:t===0&&r<=3?r-1:t===1&&r<=31?r:r===32?3:r>=33&&r<=47?r-33:r>=48&&r<=57?r-44:r>=58&&r<=64?r-43:r>=65&&r<=90?r-64:r>=91&&r<=95?r-69:r===96?0:r>=97&&r<=122?r-83:r>=123&&r<=127?r-96:r},n.prototype.getC40Words=function(e,t){for(var r=[],i=0;i<this.characterLength;i++){var o=this.input.charAt(this.fromPosition+i);if(e&&ye.isNativeC40(o)||!e&&ye.isNativeText(o))r.push(this.getC40Value(e,0,o,t));else if(An.isExtendedASCII(o,t)){var a=(o&255)-128;if(e&&ye.isNativeC40(a)||!e&&ye.isNativeText(a))r.push(1),r.push(30),r.push(this.getC40Value(e,0,a,t));else{r.push(1),r.push(30);var s=this.getShiftValue(a,e,t);r.push(s),r.push(this.getC40Value(e,s,a,t))}}else{var s=this.getShiftValue(o,e,t);r.push(s),r.push(this.getC40Value(e,s,o,t))}}if(r.length%3!==0){if(!((r.length-2)%3===0&&this.fromPosition+this.characterLength===this.input.length()))throw new Error("C40 words must be a multiple of 3");r.push(0)}for(var c=new Uint8Array(r.length/3*2),u=0,i=0;i<r.length;i+=3)this.setC40Word(c,u,r[i]&255,r[i+1]&255,r[i+2]&255),u+=2;return c},n.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),t=new Uint8Array(e*3),r=this.fromPosition,i=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),o=0;o<e;o+=3){for(var s=[],a=0;a<4;a++)r<=i?s[a]=this.input.charAt(r++)&63:s[a]=r===i+1?31:0;var c=s[0]<<18;c|=s[1]<<12,c|=s[2]<<6,c|=s[3],t[o]=c>>16&255,t[o+1]=c>>8&255,t[o+2]=c&255}return t},n.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case Q.ASCII:case Q.B256:switch(this.mode){case Q.B256:return n.getBytes(231);case Q.C40:return n.getBytes(230);case Q.TEXT:return n.getBytes(239);case Q.X12:return n.getBytes(238);case Q.EDF:return n.getBytes(240)}break;case Q.C40:case Q.TEXT:case Q.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case Q.ASCII:return n.getBytes(254);case Q.B256:return n.getBytes(254,231);case Q.C40:return n.getBytes(254,230);case Q.TEXT:return n.getBytes(254,239);case Q.X12:return n.getBytes(254,238);case Q.EDF:return n.getBytes(254,240)}break;case Q.EDF:if(this.mode!==Q.EDF)throw new Error("Cannot switch from EDF to "+this.mode);break}return new Uint8Array(0)},n.prototype.getDataBytes=function(){switch(this.mode){case Q.ASCII:return this.input.isECI(this.fromPosition)?n.getBytes(241,this.input.getECIValue(this.fromPosition)+1):An.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?n.getBytes(235,this.input.charAt(this.fromPosition)-127):this.characterLength===2?n.getBytes(this.input.charAt(this.fromPosition)*10+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?n.getBytes(232):n.getBytes(this.input.charAt(this.fromPosition)+1);case Q.B256:return n.getBytes(this.input.charAt(this.fromPosition));case Q.C40:return this.getC40Words(!0,this.input.getFNC1Character());case Q.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case Q.X12:return this.getX12Words();case Q.EDF:return this.getEDFBytes()}},n}(),T$=function(n){E$(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e}(GR);var K_e=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){if(o===void 0&&(o=null),e.trim()==="")throw new Error("Found empty contents");if(t!==K.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+t);if(r<0||i<0)throw new Error("Requested dimensions can't be negative: "+r+"x"+i);var s=0,a=null,c=null;if(o!=null){var u=o.get(_e.DATA_MATRIX_SHAPE);u!=null&&(s=u);var l=o.get(_e.MIN_SIZE);l!=null&&(a=l);var f=o.get(_e.MAX_SIZE);f!=null&&(c=f)}var h,p=o!=null&&o.has(_e.DATA_MATRIX_COMPACT)&&!!o.get(_e.DATA_MATRIX_COMPACT).toString();if(p){var m=o.has(_e.GS1_FORMAT)&&!!o.get(_e.GS1_FORMAT).toString(),y=null,_=o.has(_e.CHARACTER_SET);_&&(y=Bs.forName(o.get(_e.CHARACTER_SET).toString())),h=An.encodeHighLevel(e,y,m?29:-1,s)}else{var C=o!=null&&o.has(_e.FORCE_C40)&&!!o.get(_e.FORCE_C40).toString();h=ye.encodeHighLevel(e,s,a,c,C)}var x=Mc.lookup(h.length,s,a,c,!0),R=eg.encodeECC200(h,x),O=new Zp(R,x.getSymbolDataWidth(),x.getSymbolDataHeight());return O.place(),this.encodeLowLevel(O,x,r,i)},n.prototype.encodeLowLevel=function(e,t,r,i){for(var o=t.getSymbolDataWidth(),s=t.getSymbolDataHeight(),a=new id(t.getSymbolWidth(),t.getSymbolHeight()),c=0,u=0;u<s;u++){var l=void 0;if(u%t.matrixHeight===0){l=0;for(var f=0;f<t.getSymbolWidth();f++)a.setBoolean(l,c,f%2===0),l++;c++}l=0;for(var f=0;f<o;f++)f%t.matrixWidth===0&&(a.setBoolean(l,c,!0),l++),a.setBoolean(l,c,e.getBit(f,u)),l++,f%t.matrixWidth===t.matrixWidth-1&&(a.setBoolean(l,c,u%2===0),l++);if(c++,u%t.matrixHeight===t.matrixHeight-1){l=0;for(var f=0;f<t.getSymbolWidth();f++)a.setBoolean(l,c,!0),l++;c++}}return this.convertByteMatrixToBitMatrix(a,r,i)},n.prototype.convertByteMatrixToBitMatrix=function(e,t,r){var i=e.getWidth(),o=e.getHeight(),s=Math.max(t,i),a=Math.max(r,o),c=Math.min(s/i,a/o),u=(s-i*c)/2,l=(a-o*c)/2,f;r<o||t<i?(u=0,l=0,f=new ft(i,o)):f=new ft(t,r),f.clear();for(var h=0,p=l;h<o;h++,p+=c)for(var m=0,y=u;m<i;m++,y+=c)e.get(m,h)===1&&f.setRegion(y,p,c,c);return f},n}();var D$=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),b_=D$;var S$=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),R_=S$;var b$=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),zR=b$;var R$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),N$=function(n){R$(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+oe.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(zR),Oc=N$;var M$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),O$=function(n){M$(e,n);function e(t,r,i){var o=n.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Oc),WR=O$;function qR(n,e,t){return new WR(n,e,t)}function Pc(n,e,t){return new Oc(n,e,t)}var KR=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Mr=0,kc=1,Tn=2,tg=3,Kn=4,XR=new Oc(null,0,0);var rg=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];var F$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function L$(n){var e,t;try{for(var r=F$(n),i=r.next();!i.done;i=r.next()){var o=i.value;We.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Mr][Kn]=0,n[kc][Kn]=0,n[kc][Mr]=28,n[tg][Kn]=0,n[Tn][Kn]=0,n[Tn][Mr]=15,n}var ig=L$(We.createInt32Array(6,6));var V$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B$=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=rg[this.mode][e];i=Pc(i,o&65535,o>>16),r+=o>>16}var s=e===Tn?4:5;return i=Pc(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===Tn?4:5;return r=Pc(r,ig[this.mode][e],i),r=Pc(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Kn||this.mode===Tn){var o=rg[r][Mr];t=Pc(t,o&65535,o>>16),i+=o>>16,r=Mr}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new n(t,r,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=qR(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(rg[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new lt;try{for(var a=V$(i),c=a.next();!c.done;c=a.next()){var u=c.value;u.appendTo(s,e)}}catch(l){t={error:l}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return fe.format("%s bits=%d bytes=%d",KR[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(XR,Mr,0,0),n}(),ZR=B$;function U$(n){var e=fe.getCharCode(" "),t=fe.getCharCode("."),r=fe.getCharCode(",");n[Mr][e]=1;for(var i=fe.getCharCode("Z"),o=fe.getCharCode("A"),s=o;s<=i;s++)n[Mr][s]=s-o+2;n[kc][e]=1;for(var a=fe.getCharCode("z"),c=fe.getCharCode("a"),s=c;s<=a;s++)n[kc][s]=s-c+2;n[Tn][e]=1;for(var u=fe.getCharCode("9"),l=fe.getCharCode("0"),s=l;s<=u;s++)n[Tn][s]=s-l+2;n[Tn][r]=12,n[Tn][t]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"],h=0;h<f.length;h++)n[tg][fe.getCharCode(f[h])]=h;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<p.length;h++)fe.getCharCode(p[h])>0&&(n[Kn][fe.getCharCode(p[h])]=h);return n}var og=U$(We.createInt32Array(5,256));var sg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H$=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=fe.getCharCode(" "),t=fe.getCharCode(`
`),r=R_.singletonList(ZR.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case fe.getCharCode("\r"):o=s===t?2:0;break;case fe.getCharCode("."):o=s===e?3:0;break;case fe.getCharCode(","):o=s===e?4:0;break;case fe.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=n.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var a=R_.min(r,function(c,u){return c.getBitCount()-u.getBitCount()});return a.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,o=[];try{for(var s=sg(e),a=s.next();!a.done;a=s.next()){var c=a.value;this.updateStateForChar(c,t,o)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(o)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,o=og[e.getMode()][i]>0,s=null,a=0;a<=Kn;a++){var c=og[a][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!o||a===e.getMode()||a===Tn){var u=s.latchAndAppend(a,c);r.push(u)}if(!o&&ig[e.getMode()][a]>=0){var l=s.shiftAndAppend(a,c);r.push(l)}}}if(e.getBinaryShiftByteCount()>0||og[e.getMode()][i]===0){var f=e.addBinaryShiftChar(t);r.push(f)}},n.updateStateListForPair=function(e,t,r){var i,o,s=[];try{for(var a=sg(e),c=a.next();!c.done;c=a.next()){var u=c.value;this.updateStateForPair(u,t,r,s)}}catch(l){i={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(Kn,r)),e.getMode()!==Kn&&i.push(o.shiftAndAppend(Kn,r)),r===3||r===4){var s=o.latchAndAppend(Tn,16-r).latchAndAppend(Tn,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(a)}},n.simplifyStates=function(e){var t,r,i,o,s=[];try{for(var a=sg(e),c=a.next();!c.done;c=a.next()){var u=c.value,l=!0,f=function(_){if(_.isBetterThanOrEqualTo(u))return l=!1,"break";u.isBetterThanOrEqualTo(_)&&(s=s.filter(function(C){return C!==_}))};try{for(var h=(i=void 0,sg(s)),p=h.next();!p.done;p=h.next()){var m=p.value,y=f(m);if(y==="break")break}}catch(_){i={error:_}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}l&&s.push(u)}}catch(_){t={error:_}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n}(),N_=H$;var $$=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G$=function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new N_(e).encode(),o=oe.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+o,a,c,u,l,f;if(r!==n.DEFAULT_AZTEC_LAYERS){if(a=r<0,c=Math.abs(r),c>(a?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new W(fe.format("Illegal value %s for layers",r));u=n.totalBitsInLayer(c,a),l=n.WORD_SIZE[c];var h=u-u%l;if(f=n.stuffBits(i,l),f.getSize()+o>h)throw new W("Data to large for user specified layer");if(a&&f.getSize()>l*64)throw new W("Data to large for user specified layer")}else{l=0,f=null;for(var p=0;;p++){if(p>n.MAX_NB_BITS)throw new W("Data too large for an Aztec code");if(a=p<=3,c=a?p+1:p,u=n.totalBitsInLayer(c,a),!(s>u)){(f==null||l!==n.WORD_SIZE[c])&&(l=n.WORD_SIZE[c],f=n.stuffBits(i,l));var h=u-u%l;if(!(a&&f.getSize()>l*64)&&f.getSize()+o<=h)break}}}var m=n.generateCheckWords(f,u,l),y=f.getSize()/l,_=n.generateModeMessage(a,c,y),C=(a?11:14)+c*4,x=new Int32Array(C),R;if(a){R=C;for(var p=0;p<x.length;p++)x[p]=p}else{R=C+1+2*oe.truncDivision(oe.truncDivision(C,2)-1,15);for(var O=oe.truncDivision(C,2),V=oe.truncDivision(R,2),p=0;p<O;p++){var U=p+oe.truncDivision(p,15);x[O-p-1]=V-U-1,x[O+p]=V+U+1}}for(var A=new ft(R),p=0,E=0;p<c;p++){for(var T=(c-p)*4+(a?9:12),S=0;S<T;S++)for(var N=S*2,M=0;M<2;M++)m.get(E+N+M)&&A.set(x[p*2+M],x[p*2+S]),m.get(E+T*2+N+M)&&A.set(x[p*2+S],x[C-1-p*2-M]),m.get(E+T*4+N+M)&&A.set(x[C-1-p*2-M],x[C-1-p*2-S]),m.get(E+T*6+N+M)&&A.set(x[C-1-p*2-S],x[p*2+M]);E+=T*8}if(n.drawModeMessage(A,a,R,_),a)n.drawBullsEye(A,oe.truncDivision(R,2),5);else{n.drawBullsEye(A,oe.truncDivision(R,2),7);for(var p=0,S=0;p<oe.truncDivision(C,2)-1;p+=15,S+=16)for(var M=oe.truncDivision(R,2)&1;M<R;M+=2)A.set(oe.truncDivision(R,2)-S,M),A.set(oe.truncDivision(R,2)+S,M),A.set(M,oe.truncDivision(R,2)-S),A.set(M,oe.truncDivision(R,2)+S)}var D=new b_;return D.setCompact(a),D.setSize(R),D.setLayers(c),D.setCodeWords(y),D.setMatrix(A),D},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new lt;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var o=oe.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+oe.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},n.generateCheckWords=function(e,t,r){var i,o,s=e.getSize()/r,a=new rd(n.getGF(r)),c=oe.truncDivision(t,r),u=n.bitsToWords(e,r,c);a.encode(u,c-s);var l=t%r,f=new lt;f.appendBits(0,l);try{for(var h=$$(Array.from(u)),p=h.next();!p.done;p=h.next()){var m=p.value;f.appendBits(m,r)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return f},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/t;o<s;o++){for(var a=0,c=0;c<t;c++)a|=e.get(o*t+c)?1<<t-c-1:0;i[o]=a}return i},n.getGF=function(e){switch(e){case 4:return St.AZTEC_PARAM;case 6:return St.AZTEC_DATA_6;case 8:return St.AZTEC_DATA_8;case 10:return St.AZTEC_DATA_10;case 12:return St.AZTEC_DATA_12;default:throw new W("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new lt,i=e.getSize(),o=(1<<t)-2,s=0;s<i;s+=t){for(var a=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(a|=1<<t-1-c);(a&o)===o?(r.appendBits(a&o,t),s--):(a&o)===0?(r.appendBits(a|1,t),s--):r.appendBits(a,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n}(),cd=G$;var Lwe=function(){function n(){}return n.prototype.encode=function(e,t,r,i){return this.encodeWithHints(e,t,r,i,null)},n.prototype.encodeWithHints=function(e,t,r,i,o){var s=od.ISO_8859_1,a=cd.DEFAULT_EC_PERCENT,c=cd.DEFAULT_AZTEC_LAYERS;return o!=null&&(o.has(_e.CHARACTER_SET)&&(s=Bs.forName(o.get(_e.CHARACTER_SET).toString())),o.has(_e.ERROR_CORRECTION)&&(a=oe.parseInt(o.get(_e.ERROR_CORRECTION).toString())),o.has(_e.AZTEC_LAYERS)&&(c=oe.parseInt(o.get(_e.AZTEC_LAYERS).toString()))),n.encodeLayers(e,t,r,i,s,a,c)},n.encodeLayers=function(e,t,r,i,o,s,a){if(t!==K.AZTEC)throw new W("Can only encode AZTEC, but got "+t);var c=cd.encode(fe.getBytes(e,o),s,a);return n.renderResult(c,r,i)},n.renderResult=function(e,t,r){var i=e.getMatrix();if(i==null)throw new Ot;for(var o=i.getWidth(),s=i.getHeight(),a=Math.max(t,o),c=Math.max(r,s),u=Math.min(a/o,c/s),l=(a-o*u)/2,f=(c-s*u)/2,h=new ft(a,c),p=0,m=f;p<s;p++,m+=u)for(var y=0,_=l;y<o;y++,_+=u)i.get(y,p)&&h.setRegion(_,m,u,u);return h},n}();var z$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QR=function(n){z$(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var o=new Uint8ClampedArray(r*i),s=0,a=0,c=t.length;s<c;s+=4,a++){var u=void 0,l=t[s+3];if(l===0)u=255;else{var f=t[s],h=t[s+1],p=t[s+2];u=306*f+601*h+117*p+512>>10}o[a]=u}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new W("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Li(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),c=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);r.width=a,r.height=c;var u=r.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(a/2,c/2),u.rotate(i),u.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(br);function M_(){return typeof navigator<"u"}function W$(){return M_()&&!!navigator.mediaDevices}function JR(){return!!(W$()&&navigator.mediaDevices.enumerateDevices)}var Fc=function(){return Fc=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Fc.apply(this,arguments)},It=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})},Ct=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(l){u=[6,l],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},O_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q$={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},tn=function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=Fc(Fc({},q$),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(de.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return It(this,void 0,void 0,function(){return Ct(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var o=O_(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(n.mediaStreamIsTorchCompatibleTrack(a))return!0}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new vt("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new vt("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new QR(e),r=new zl(t);return new Gl(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new vt("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,o=r.height;return t.style.width=i+"px",t.style.height=o+"px",t.width=i,t.height=o,t},n.tryPlayVideo=function(e){return It(this,void 0,void 0,function(){var t;return Ct(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return It(this,void 0,void 0,function(){var e,t,r,i,o,s,a,c,u,l,f,h;return Ct(this,function(p){switch(p.label){case 0:if(!M_())throw new Error("Can't enumerate devices, navigator is not present.");if(!JR())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),t=[];try{for(r=O_(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device ".concat(t.length+1),u=o.groupId,l={deviceId:a,label:c,kind:s,groupId:u},t.push(l))}catch(m){f={error:m}}finally{try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(f)throw f.error}}return[2,t]}})})},n.findDeviceById=function(e){return It(this,void 0,void 0,function(){var t;return Ct(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return It(this,void 0,void 0,function(){var r;return Ct(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(o,s){var a=setTimeout(function(){n.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",c))},t),c=function(){n.tryPlayVideo(e).then(function(u){clearTimeout(a),e.removeEventListener("canplay",c),o(u)})};e.addEventListener("canplay",c)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),It(this,void 0,void 0,function(){var i;return Ct(this,function(o){switch(o.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return o.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,o=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",s),r())},i),s=function(){clearTimeout(o),e.removeEventListener("load",s),t()};e.addEventListener("load",s)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new vt("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return It(this,void 0,void 0,function(){var t;return Ct(this,function(r){switch(r.label){case 0:if(!e)throw new vt("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return It(this,void 0,void 0,function(){var t;return Ct(this,function(r){switch(r.label){case 0:if(!e)throw new vt("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return It(this,void 0,void 0,function(){var i,o;return Ct(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,s.sent()];case 4:throw o=s.sent(),n.disposeMediaStream(i),o;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return It(this,void 0,void 0,function(){var i,o,s,a,c,u,l,f,h,p=this;return Ct(this,function(m){switch(m.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return o=m.sent(),s=function(){n.disposeMediaStream(e),n.cleanVideoSource(o)},a=this.scan(o,r,s),c=e.getVideoTracks(),u=Fc(Fc({},a),{stop:function(){a.stop()},streamVideoConstraintsApply:function(y,_){return It(this,void 0,void 0,function(){var C,x,R,O,V,U,A;return Ct(this,function(E){switch(E.label){case 0:C=_?c.filter(_):c,E.label=1;case 1:E.trys.push([1,6,7,8]),x=O_(C),R=x.next(),E.label=2;case 2:return R.done?[3,5]:(O=R.value,[4,O.applyConstraints(y)]);case 3:E.sent(),E.label=4;case 4:return R=x.next(),[3,2];case 5:return[3,8];case 6:return V=E.sent(),U={error:V},[3,8];case 7:try{R&&!R.done&&(A=x.return)&&A.call(x)}finally{if(U)throw U.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(y){return c.find(y).getConstraints()},streamVideoSettingsGet:function(y){return c.find(y).getSettings()},streamVideoCapabilitiesGet:function(y){return c.find(y).getCapabilities()}}),l=n.mediaStreamIsTorchCompatible(e),l&&(f=c?.find(function(y){return n.mediaStreamIsTorchCompatibleTrack(y)}),h=function(y){return It(p,void 0,void 0,function(){return Ct(this,function(_){switch(_.label){case 0:return[4,n.mediaStreamSetTorch(f,y)];case 1:return _.sent(),[2]}})})},u.switchTorch=h,u.stop=function(){return It(p,void 0,void 0,function(){return Ct(this,function(y){switch(y.label){case 0:return a.stop(),[4,h(!1)];case 1:return y.sent(),[2]}})})}),[2,u]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return It(this,void 0,void 0,function(){var i,o;return Ct(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return It(this,void 0,void 0,function(){var r,i;return Ct(this,function(o){switch(o.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new vt("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return o.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return It(this,void 0,void 0,function(){var r,i,o,s;return Ct(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new vt("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},o=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,o)];case 1:return a.sent(),s=this.scan(r,t,i),[2,s]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return It(this,void 0,void 0,function(){var r;return Ct(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return It(this,void 0,void 0,function(){var r,i,o;return Ct(this,function(s){switch(s.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return o=s.sent(),[2,o];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return It(this,void 0,void 0,function(){var r,i;return Ct(this,function(o){switch(o.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return It(this,void 0,void 0,function(){var t,r;return Ct(this,function(i){switch(i.label){case 0:if(!e)throw new vt("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return It(this,void 0,void 0,function(){var t,r;return Ct(this,function(i){switch(i.label){case 0:if(!e)throw new vt("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var o=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(s,a){o.scan(e,function(c,u,l){if(c){s(c),l.stop();return}if(u){if(u instanceof P&&t||u instanceof je&&r||u instanceof $&&i)return;l.stop(),a(u)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var o=n.createCaptureCanvas(e),s;try{s=o.getContext("2d",{willReadFrequently:!0})}catch{s=o.getContext("2d")}if(!s)throw new Error("Couldn't create canvas for visual element scan.");var a=function(){s=void 0,o=void 0},c=!1,u,l=function(){c=!0,clearTimeout(u),a(),r&&r()},f={stop:l},h=function(){if(!c)try{n.drawImageOnCanvas(s,e);var p=i.decodeFromCanvas(o);t(p,void 0,f),u=setTimeout(h,i.options.delayBetweenScanSuccess)}catch(C){t(void 0,C,f);var m=C instanceof je,y=C instanceof $,_=C instanceof P;if(m||y||_){u=setTimeout(h,i.options.delayBetweenScanAttempts);return}a(),r&&r(C)}};return h(),f},n.prototype._decodeOnLoadImage=function(e){return It(this,void 0,void 0,function(){var t;return Ct(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return It(this,void 0,void 0,function(){var t;return Ct(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n}();var K$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WIe=function(n){K$(e,n);function e(t,r){return n.call(this,new Mo,t,r)||this}return e}(tn);var X$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YIe=function(n){X$(e,n);function e(t,r){return n.call(this,new ti(t),t,r)||this}return e}(tn);var Y$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eCe=function(n){Y$(e,n);function e(t,r){return n.call(this,new Lo,t,r)||this}return e}(tn);var Z$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eN=function(n){Z$(e,n);function e(t,r){var i=this,o=new nd;return o.setHints(t),i=n.call(this,o,t,r)||this,i.reader=o,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(de.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e}(tn);var Q$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aCe=function(n){Q$(e,n);function e(t,r){return n.call(this,new Uo,t,r)||this}return e}(tn);var J$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dCe=function(n){J$(e,n);function e(t,r){return n.call(this,new Vo,t,r)||this}return e}(tn);var Gi="http://www.w3.org/2000/svg",pCe=function(){function n(e){if(typeof e=="string"){var t=document.getElementById(e);if(!t)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=t}else this.containerElement=e}return n.prototype.write=function(e,t,r,i){if(e.length===0)throw new W("Found empty contents");if(t<0||r<0)throw new W("Requested dimensions are too small: "+t+"x"+r);var o=i&&i.get(_e.MARGIN)!==void 0?Number.parseInt(i.get(_e.MARGIN).toString(),10):n.QUIET_ZONE_SIZE,s=this.encode(i,e);return this.renderResult(s,t,r,o)},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"svg");return r.setAttributeNS(Gi,"width",t.toString()),r.setAttributeNS(Gi,"height",e.toString()),r},n.prototype.createSvgPathPlaceholderElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"path");return r.setAttributeNS(Gi,"d","M0 0h".concat(e,"v").concat(t,"H0z")),r.setAttributeNS(Gi,"fill","none"),r},n.prototype.createSvgRectElement=function(e,t,r,i){var o=document.createElementNS(n.SVG_NS,"rect");return o.setAttributeNS(Gi,"x",e.toString()),o.setAttributeNS(Gi,"y",t.toString()),o.setAttributeNS(Gi,"height",r.toString()),o.setAttributeNS(Gi,"width",i.toString()),o.setAttributeNS(Gi,"fill","#000000"),o},n.prototype.encode=function(e,t){var r=Vn.L;if(e&&e.get(_e.ERROR_CORRECTION)!==void 0){var i=e.get(_e.ERROR_CORRECTION).toString();r=Vn.fromString(i)}var o=$i.encode(t,r,e);return o},n.prototype.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new Ot;var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),f=Math.max(r,u),h=Math.min(Math.floor(l/c),Math.floor(f/u)),p=Math.floor((l-s*h)/2),m=Math.floor((f-a*h)/2),y=this.createSVGElement(l,f),_=this.createSvgPathPlaceholderElement(t,r);y.appendChild(_),this.containerElement.appendChild(y);for(var C=0,x=m;C<a;C++,x+=h)for(var R=0,O=p;R<s;R++,O+=h)if(o.get(R,C)===1){var V=this.createSvgRectElement(O,x,h,h);y.appendChild(V)}return y},n.QUIET_ZONE_SIZE=4,n.SVG_NS="http://www.w3.org/2000/svg",n}();var tN="http://www.w3.org/2000/svg",vCe=function(){function n(){}return n.prototype.write=function(e,t,r,i){if(e.length===0)throw new W("Found empty contents");if(t<0||r<0)throw new W("Requested dimensions are too small: "+t+"x"+r);var o=Vn.L,s=n.QUIET_ZONE_SIZE;if(i){if(i.get(_e.ERROR_CORRECTION)!==void 0){var a=i.get(_e.ERROR_CORRECTION).toString();o=Vn.fromString(a)}i.get(_e.MARGIN)!==void 0&&(s=Number.parseInt(i.get(_e.MARGIN).toString(),10))}var c=$i.encode(e,o,i);return this.renderResult(c,t,r,s)},n.prototype.writeToDom=function(e,t,r,i,o){if(typeof e=="string"){var s=document.querySelector(e);if(!s)throw new Error("Could no find the target HTML element.");e=s}var a=this.write(t,r,i,o);e instanceof HTMLElement&&e.appendChild(a)},n.prototype.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new Ot;for(var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),f=Math.max(r,u),h=Math.min(Math.floor(l/c),Math.floor(f/u)),p=Math.floor((l-s*h)/2),m=Math.floor((f-a*h)/2),y=this.createSVGElement(l,f),_=0,C=m;_<a;_++,C+=h)for(var x=0,R=p;x<s;x++,R+=h)if(o.get(x,_)===1){var O=this.createSvgRectElement(R,C,h,h);y.appendChild(O)}return y},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(tN,"svg"),i=e.toString(),o=t.toString();return r.setAttribute("height",o),r.setAttribute("width",i),r.setAttribute("viewBox","0 0 "+i+" "+o),r},n.prototype.createSvgRectElement=function(e,t,r,i){var o=document.createElementNS(tN,"rect");return o.setAttribute("x",e.toString()),o.setAttribute("y",t.toString()),o.setAttribute("height",r.toString()),o.setAttribute("width",i.toString()),o.setAttribute("fill","#000000"),o},n.QUIET_ZONE_SIZE=4,n}();var eG=["preview"],ud=class extends eN{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(e,t){return b(this,null,function*(){let r=new Mt({}),i;try{i=yield this.decodeFromVideoDevice(e,t,(o,s)=>{if(!s){r.next({result:o});return}let a=s.name;if(a===P.name||a===je.name||a===$.name||s.message.includes("No MultiFormat Readers were able to detect the code.")){r.next({error:s});return}r.error(s),this.scannerControls.stop(),this.scannerControls=void 0}),this.scannerControls=Ae(X({},i),{stop(){i.stop(),r.complete()}})}catch(o){r.error(o),this.scannerControls?.stop(),this.scannerControls=void 0}return r.asObservable()})}},nN=(()=>{class n{get codeReader(){return this._codeReader}set device(t){if(!this._ready){this._devicePreStart=t;return}if(this.isAutostarting){console.warn("Avoid setting a device during auto-start.");return}if(this.isCurrentDevice(t)){console.warn("Setting the same device is not allowed.");return}if(!this.hasPermission){console.warn("Permissions not set yet, waiting for them to be set to apply device change.");return}this.setDevice(t)}get device(){return this._device}get formats(){return this.hints.get(de.POSSIBLE_FORMATS)}set formats(t){if(typeof t=="string")throw new Error("Invalid formats, make sure the [formats] input is a binding.");let r=t.map(o=>this.getBarcodeFormatOrFail(o)),i=this.hints;i.set(de.POSSIBLE_FORMATS,r),this.hints=i}get hints(){return this._hints}set hints(t){this._hints=t,this.codeReader?.setHints(this._hints)}set videoConstraints(t){let r=this.codeReader?.getScannerControls();r&&r?.streamVideoConstraintsApply(t)}set isAutostarting(t){this._isAutostarting=t,this.autostarting.next(t)}get isAutostarting(){return this._isAutostarting}set torch(t){try{this.getCodeReader().getScannerControls().switchTorch(t)}catch{}}set enable(t){this._enabled!==!!t&&(this._enabled=!!t,this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():(this.reset(),ud.releaseAllStreams()))}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(de.TRY_HARDER)}set tryHarder(t){let r=this.hints;t?r.set(de.TRY_HARDER,!0):r.delete(de.TRY_HARDER),this.hints=r}constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this.poster="",this._ready=!1,this.autostarted=new Xe,this.autostarting=new Xe,this.torchCompatible=new Xe(!1),this.scanSuccess=new Xe,this.scanFailure=new Xe,this.scanError=new Xe,this.scanComplete=new Xe,this.camerasFound=new Xe,this.camerasNotFound=new Xe,this.permissionResponse=new Xe(!0),this.hasDevices=new Xe,this.deviceChange=new Xe,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[K.QR_CODE],this.hasNavigator=typeof navigator<"u",this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}askForPermission(){return b(this,null,function*(){if(!this.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),this.setPermission(null),this.hasPermission;if(!this.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),this.setPermission(null),this.hasPermission;let t,r;try{t=yield this.getAnyVideoDevice(),r=!!t}catch(i){return this.handlePermissionException(i)}finally{this.terminateStream(t)}return this.setPermission(r),r})}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(t){t&&t.getTracks().forEach(r=>r.stop()),t=void 0}init(){return b(this,null,function*(){if(!this.autostart){console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),this.initAutostartOff(),this._ready=!0;return}yield this.initAutostartOn(),this._ready=!0})}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){return b(this,null,function*(){this.isAutostarting=!0;let t;try{t=yield this.askForPermission()}catch(r){console.error("Exception occurred while asking for permission:",r);return}if(t){let r=yield this.updateVideoInputDevices();yield this.autostartScanner([...r])}this.isAutostarting=!1,this.autostarted.next()})}isCurrentDevice(t){return t?.deviceId===this._device?.deviceId}ngOnDestroy(){this.reset(),tn.cleanVideoSource(this.previewElemRef.nativeElement),ud.releaseAllStreams()}ngOnInit(){this.init()}scanStop(){this._scanSubscription&&(this.codeReader?.getScannerControls().stop(),this._scanSubscription?.unsubscribe(),this._scanSubscription=void 0)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan process running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;let t=this._reset();t&&(this.device=t)}updateVideoInputDevices(){return b(this,null,function*(){let t=(yield tn.listVideoInputDevices())||[],r=t&&t.length>0;return this.hasDevices.next(r),this.camerasFound.next([...t]),r||this.camerasNotFound.next(null),t})}autostartScanner(t){return b(this,null,function*(){let r=({label:o})=>/back|trs|rear|traseira|environment|ambiente/gi.test(o),i=t.find(r)||t.pop();if(!i)throw new Error("Impossible to autostart, no input devices available.");yield this.setDevice(i),this.deviceChange.next(i)})}dispatchScanSuccess(t){this.scanSuccess.next(t.getText())}dispatchScanFailure(t){this.scanFailure.next(t)}dispatchScanError(t){this.scanError.observed||(console.error(`zxing scanner component: ${t.name}`,t),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(t)}dispatchScanComplete(t){this.scanComplete.next(t)}handlePermissionException(t){console.error("@zxing/ngx-scanner","Error when asking for permission.",t);let r;switch(t.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",t.message),r=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",t.message),r=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",t.message),r=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),r=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;case"AbortError":console.warn("@zxing/ngx-scanner","It seems that the required permissions have been granted, but something else failed",t),r=!0,this.hasDevices.next(null),this.camerasNotFound.next(t);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",t),r=null;break}return this.setPermission(r),this.permissionResponse.error(t),r}getBarcodeFormatOrFail(t){return typeof t=="string"?K[t.trim().toUpperCase()]:t}getCodeReader(){if(!this._codeReader){let t={delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess};this._codeReader=new ud(this.hints,t)}return this._codeReader}scanFromDevice(t){return b(this,null,function*(){let r=this.previewElemRef.nativeElement,i=this.getCodeReader(),o=yield i.scanFromDeviceObservable(t,r);if(!o)throw new Error("Undefined decoding stream, aborting.");let s=f=>this._onDecodeResult(f.result,f.error),a=f=>this._onDecodeError(f),c=()=>{};if(this._scanSubscription=o.subscribe(s,a,c),this._scanSubscription.closed)return;let l=typeof i.getScannerControls().switchTorch<"u";this.torchCompatible.next(l)})}_onDecodeError(t){this.dispatchScanError(t)}_onDecodeResult(t,r){t?this.dispatchScanSuccess(t):this.dispatchScanFailure(r),this.dispatchScanComplete(t)}_reset(){if(!this._codeReader)return;this.scanStop();try{let r=this.previewElemRef.nativeElement;tn.cleanVideoSource(r)}catch{}try{tn.releaseAllStreams()}catch{}this._codeReader=void 0;let t=this._device;return this.device=void 0,t}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(t){return b(this,null,function*(){this.scanStop(),this._device=t||void 0,this._device||tn.cleanVideoSource(this.previewElemRef.nativeElement),this._enabled&&t&&(yield this.scanFromDevice(t.deviceId))})}setPermission(t){this.hasPermission=t,this.permissionResponse.next(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ft({type:n,selectors:[["zxing-scanner"]],viewQuery:function(r,i){if(r&1&&IS(eG,7),r&2){let o;My(o=Oy())&&(i.previewElemRef=o.first)}},inputs:{autofocusEnabled:"autofocusEnabled",timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",autostart:"autostart",previewFitMode:"previewFitMode",poster:"poster",device:"device",formats:"formats",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},standalone:!1,decls:6,vars:3,consts:[["preview",""],[3,"poster"]],template:function(r,i){r&1&&(B(0,"video",1,0)(2,"p"),z(3," Your browser does not support this feature, please try to upgrade it. "),j(),B(4,"p"),z(5," Seu navegador n\xE3o suporta este recurso, por favor tente atualiz\xE1-lo. "),j()()),r&2&&(Wh("object-fit",i.previewFitMode),Fe("poster",i.poster,qa))},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain}"],changeDetection:0})}}return n})(),rN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=nr({type:n})}static{this.\u0275inj=er({imports:[ln,No]})}}return n})();function nG(n,e){if(n&1&&(B(0,"option",13),z(1),j()),n&2){let t=e.$implicit;Fe("value",t.deviceId),le(),In(" ",t.label||t.deviceId," ")}}function rG(n,e){if(n&1){let t=Tr();B(0,"div",9)(1,"label",10),z(2,"Select Camera:"),j(),B(3,"select",11),Ye("change",function(i){wn(t);let o=Dt();return En(o.onDeviceSelect(i))}),qt(4,nG,2,2,"option",12),j()()}if(n&2){let t=Dt();le(3),Fe("value",t.selectedDevice==null?null:t.selectedDevice.deviceId),le(),Fe("ngForOf",t.availableDevices)}}function iG(n,e){if(n&1){let t=Tr();B(0,"div",14)(1,"zxing-scanner",15),Ye("camerasFound",function(i){wn(t);let o=Dt();return En(o.onCamerasFound(i))})("scanSuccess",function(i){wn(t);let o=Dt();return En(o.onScanSuccess(i))})("scanFailure",function(i){wn(t);let o=Dt();return En(o.onScanFailure(i))}),j()()}if(n&2){let t=Dt();le(),Fe("device",t.selectedDevice)("formats",t.allowedFormats)}}function oG(n,e){n&1&&(B(0,"div",18),De(1,"img",19),B(2,"h4"),z(3,"Safe Product"),j(),B(4,"p"),z(5,"This product does not contain allergens."),j()())}function sG(n,e){n&1&&(B(0,"div",18),De(1,"img",20),B(2,"h4"),z(3,"Unsafe Product"),j(),B(4,"p"),z(5,"This product contains allergens."),j()())}function aG(n,e){n&1&&(B(0,"div",18),De(1,"img",21),B(2,"h4"),z(3,"Product Not Found"),j(),B(4,"p"),z(5,"Help us improve by adding this product to Open Food Facts."),j()())}function cG(n,e){if(n&1&&(B(0,"div",16),qt(1,oG,6,0,"div",17)(2,sG,6,0,"div",17)(3,aG,6,0,"div",17),j()),n&2){let t=Dt();le(),Fe("ngIf",t.resultStatus==="safe"),le(),Fe("ngIf",t.resultStatus==="unsafe"),le(),Fe("ngIf",t.resultStatus==="notfound")}}function uG(n,e){if(n&1&&(B(0,"div",22),z(1),j()),n&2){let t=Dt();le(),In(" ",t.errorMsg," ")}}var ag=class n{constructor(e){this.http=e}isCameraActive=!1;scannedResult="";errorMsg="";availableDevices=[];selectedDevice;allowedFormats=[K.QR_CODE,K.CODE_128,K.EAN_13,K.EAN_8,K.UPC_A,K.UPC_E];resultStatus=null;startCamera(){console.log("startCamera() clicked"),this.isCameraActive=!0,this.scannedResult="",this.errorMsg="",this.resultStatus=null,console.log("isCameraActive set to true, cleared old results")}stopCamera(){console.log("stopCamera() called, turning camera off"),this.isCameraActive=!1}onScanSuccess(e){console.log("onScanSuccess(), decodedText =",e),this.scannedResult=e,this.fetchProductData(e),setTimeout(()=>{this.stopCamera()},300)}onScanFailure(e){console.warn("Scan failure:",e)}onCamerasFound(e){if(console.log("onCamerasFound(), devices =",e),this.availableDevices=e,e&&e.length){let t=e.find(r=>/back|rear|environment/i.test(r.label));this.selectedDevice=t||e[0],console.log("Selected device =",this.selectedDevice)}else this.errorMsg="No cameras found.",console.error("No cameras found")}onDeviceSelect(e){let r=e.target.value;console.log("User selected deviceId =",r),this.selectedDevice=this.availableDevices.find(i=>i.deviceId===r),console.log("New selectedDevice =",this.selectedDevice)}fetchProductData(e){console.log("fetchProductData(), barcode =",e);let t=`https://world.openfoodfacts.org/api/v0/product/${e}.json`;this.http.get(t).subscribe({next:r=>{if(console.log("OpenFoodFacts response:",r),!r||r.status===0||!r.product){this.resultStatus="notfound";return}r.product.allergens_tags&&r.product.allergens_tags.length>0?this.resultStatus="unsafe":this.resultStatus="safe"},error:r=>{console.error("OpenFoodFacts request error:",r),this.resultStatus="notfound"}})}static \u0275fac=function(t){return new(t||n)(ge(Ky))};static \u0275cmp=Ft({type:n,selectors:[["app-barcode"]],decls:12,vars:5,consts:[[1,"barcode-page"],[1,"barcode-container"],[1,"barcode-header"],[1,"scanner-area"],[1,"btn","btn-primary","scan-btn",3,"click","disabled"],["class","mb-3 text-center",4,"ngIf"],["class","text-center",4,"ngIf"],["class","result-container mt-4 text-center","style","max-width: 400px; margin: auto",4,"ngIf"],["class","alert alert-danger w-100 mt-3 text-center",4,"ngIf"],[1,"mb-3","text-center"],["for","cameraSelect",1,"form-label"],["id","cameraSelect",1,"form-select","w-50","mx-auto",3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-center"],[2,"display","block","margin","20px auto","width","100%","max-width","350px",3,"camerasFound","scanSuccess","scanFailure","device","formats"],[1,"result-container","mt-4","text-center",2,"max-width","400px","margin","auto"],["class","card my-3 p-3",4,"ngIf"],[1,"card","my-3","p-3"],["src","assets/safe.png","alt","Safe Product",2,"width","60px","margin","auto"],["src","assets/unsafe.png","alt","Unsafe Product",2,"width","60px","margin","auto"],["src","assets/not-found.png","alt","Product Not Found",2,"width","60px","margin","auto"],[1,"alert","alert-danger","w-100","mt-3","text-center"]],template:function(t,r){t&1&&(B(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),z(4,"Barcode Scanning"),j()(),B(5,"div",3)(6,"button",4),Ye("click",function(){return r.startCamera()}),z(7," Scan Now "),j()(),qt(8,rG,5,2,"div",5)(9,iG,2,2,"div",6)(10,cG,4,3,"div",7)(11,uG,2,1,"div",8),j()()),t&2&&(le(6),Fe("disabled",r.isCameraActive),le(2),Fe("ngIf",r.isCameraActive&&r.availableDevices.length>1),le(),Fe("ngIf",r.isCameraActive),le(),Fe("ngIf",r.resultStatus),le(),Fe("ngIf",r.errorMsg))},dependencies:[ln,ec,Zr,rN,nN,nb],encapsulation:2})};var iN=()=>{};var sN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},lG=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},cg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,l=o>>2,f=(o&3)<<4|a>>4,h=(a&15)<<2|u>>6,p=u&63;c||(p=64,s||(h=64)),r.push(t[l],t[f],t[h],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):lG(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||f==null)throw new k_;let h=o<<2|a>>4;if(r.push(h),u!==64){let p=a<<4&240|u>>2;if(r.push(p),f!==64){let m=u<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},k_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dG=function(n){let e=sN(n);return cg.encodeByteArray(e,!0)},ld=function(n){return dG(n).replace(/\./g,"")},ug=function(n){try{return cg.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function aN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var fG=()=>aN().__FIREBASE_DEFAULTS__,hG=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pG=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ug(n[1]);return e&&JSON.parse(e)},lg=()=>{try{return iN()||fG()||hG()||pG()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},L_=n=>{var e,t;return(t=(e=lg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},cN=n=>{let e=L_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},V_=()=>{var n;return(n=lg())===null||n===void 0?void 0:n.config},B_=n=>{var e;return(e=lg())===null||e===void 0?void 0:e[`_${n}`]};var js=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function uN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ld(JSON.stringify(t)),ld(JSON.stringify(s)),""].join(".")}function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function gG(){var n;let e=(n=lg())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fN(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pN(){let n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gN(){return!gG()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dd(){try{return typeof indexedDB=="object"}catch{return!1}}function mN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var mG="FirebaseError",or=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mG,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Or.prototype.create)}},Or=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?vG(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new or(i,a,r)}};function vG(n,e){return n.replace(yG,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var yG=/\{\$([^}]+)}/g;function vN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ni(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(oN(o)&&oN(s)){if(!ni(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function oN(n){return n!==null&&typeof n=="object"}function Lc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vc(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Bc(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yN(n,e){let t=new F_(n,e);return t.subscribe.bind(t)}var F_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");_G(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=P_),i.error===void 0&&(i.error=P_),i.complete===void 0&&(i.complete=P_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function _G(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function P_(){}var txe=4*60*60*1e3;function fn(n){return n&&n._delegate?n._delegate:n}var Bn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Hs="[DEFAULT]";var U_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new js;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EG(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wG(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wG(n){return n===Hs?void 0:n}function EG(n){return n.instantiationMode==="EAGER"}var dg=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new U_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var IG=[],Pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Pe||{}),CG={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},xG=Pe.INFO,AG={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},TG=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=AG[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ri=class{constructor(e){this.name=e,this._logLevel=xG,this._logHandler=TG,this._userLogHandler=null,IG.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}};var DG=(n,e)=>e.some(t=>n instanceof t),_N,wN;function SG(){return _N||(_N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bG(){return wN||(wN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var EN=new WeakMap,H_=new WeakMap,IN=new WeakMap,j_=new WeakMap,G_=new WeakMap;function RG(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(ii(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&EN.set(t,n)}).catch(()=>{}),G_.set(e,n),e}function NG(n){if(H_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});H_.set(n,e)}var $_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return H_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||IN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ii(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CN(n){$_=n($_)}function MG(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(fg(this),e,...t);return IN.set(r,e.sort?e.sort():[e]),ii(r)}:bG().includes(n)?function(...e){return n.apply(fg(this),e),ii(EN.get(this))}:function(...e){return ii(n.apply(fg(this),e))}}function OG(n){return typeof n=="function"?MG(n):(n instanceof IDBTransaction&&NG(n),DG(n,SG())?new Proxy(n,$_):n)}function ii(n){if(n instanceof IDBRequest)return RG(n);if(j_.has(n))return j_.get(n);let e=OG(n);return e!==n&&(j_.set(n,e),G_.set(e,n)),e}var fg=n=>G_.get(n);function AN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=ii(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ii(s.result),c.oldVersion,c.newVersion,ii(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var PG=["get","getKey","getAll","getAllKeys","count"],kG=["put","add","delete","clear"],z_=new Map;function xN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(z_.get(e))return z_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=kG.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PG.includes(t)))return;let o=function(s,...a){return b(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return z_.set(e,o),o}CN(n=>Ae(X({},n),{get:(e,t,r)=>xN(e,t)||n.get(e,t,r),has:(e,t)=>!!xN(e,t)||n.has(e,t)}));var q_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FG(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function FG(n){let e=n.getComponent();return e?.type==="VERSION"}var K_="@firebase/app",TN="0.11.2";var zi=new ri("@firebase/app"),LG="@firebase/app-compat",VG="@firebase/analytics-compat",BG="@firebase/analytics",UG="@firebase/app-check-compat",jG="@firebase/app-check",HG="@firebase/auth",$G="@firebase/auth-compat",GG="@firebase/database",zG="@firebase/data-connect",WG="@firebase/database-compat",qG="@firebase/functions",KG="@firebase/functions-compat",XG="@firebase/installations",YG="@firebase/installations-compat",ZG="@firebase/messaging",QG="@firebase/messaging-compat",JG="@firebase/performance",ez="@firebase/performance-compat",tz="@firebase/remote-config",nz="@firebase/remote-config-compat",rz="@firebase/storage",iz="@firebase/storage-compat",oz="@firebase/firestore",sz="@firebase/vertexai",az="@firebase/firestore-compat",cz="firebase",uz="11.4.0";var X_="[DEFAULT]",lz={[K_]:"fire-core",[LG]:"fire-core-compat",[BG]:"fire-analytics",[VG]:"fire-analytics-compat",[jG]:"fire-app-check",[UG]:"fire-app-check-compat",[HG]:"fire-auth",[$G]:"fire-auth-compat",[GG]:"fire-rtdb",[zG]:"fire-data-connect",[WG]:"fire-rtdb-compat",[qG]:"fire-fn",[KG]:"fire-fn-compat",[XG]:"fire-iid",[YG]:"fire-iid-compat",[ZG]:"fire-fcm",[QG]:"fire-fcm-compat",[JG]:"fire-perf",[ez]:"fire-perf-compat",[tz]:"fire-rc",[nz]:"fire-rc-compat",[rz]:"fire-gcs",[iz]:"fire-gcs-compat",[oz]:"fire-fst",[az]:"fire-fst-compat",[sz]:"fire-vertex","fire-js":"fire-js",[cz]:"fire-js-all"};var fd=new Map,dz=new Map,Y_=new Map;function DN(n,e){try{n.container.addComponent(e)}catch(t){zi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pr(n){let e=n.name;if(Y_.has(e))return zi.debug(`There were multiple attempts to register component ${e}.`),!1;Y_.set(e,n);for(let t of fd.values())DN(t,n);for(let t of dz.values())DN(t,n);return!0}function Uc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Un(n){return n==null?!1:n.settings!==void 0}var fz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ho=new Or("app","Firebase",fz);var Z_=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ho.create("app-deleted",{appName:this._name})}};var $o=uz;function ew(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:X_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ho.create("bad-app-name",{appName:String(i)});if(t||(t=V_()),!t)throw Ho.create("no-options");let o=fd.get(i);if(o){if(ni(t,o.options)&&ni(r,o.config))return o;throw Ho.create("duplicate-app",{appName:i})}let s=new dg(i);for(let c of Y_.values())s.addComponent(c);let a=new Z_(t,r,s);return fd.set(i,a),a}function $s(n=X_){let e=fd.get(n);if(!e&&n===X_&&V_())return ew();if(!e)throw Ho.create("no-app",{appName:n});return e}function hg(){return Array.from(fd.values())}function Rt(n,e,t){var r;let i=(r=lz[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zi.warn(a.join(" "));return}Pr(new Bn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var hz="firebase-heartbeat-database",pz=1,hd="firebase-heartbeat-store",W_=null;function NN(){return W_||(W_=AN(hz,pz,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(hd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ho.create("idb-open",{originalErrorMessage:n.message})})),W_}function gz(n){return b(this,null,function*(){try{let t=(yield NN()).transaction(hd),r=yield t.objectStore(hd).get(MN(n));return yield t.done,r}catch(e){if(e instanceof or)zi.warn(e.message);else{let t=Ho.create("idb-get",{originalErrorMessage:e?.message});zi.warn(t.message)}}})}function SN(n,e){return b(this,null,function*(){try{let r=(yield NN()).transaction(hd,"readwrite");yield r.objectStore(hd).put(e,MN(n)),yield r.done}catch(t){if(t instanceof or)zi.warn(t.message);else{let r=Ho.create("idb-set",{originalErrorMessage:t?.message});zi.warn(r.message)}}})}function MN(n){return`${n.name}!${n.options.appId}`}var mz=1024,vz=30,Q_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new J_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=bN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>vz){let s=_z(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zi.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=bN(),{heartbeatsToSend:r,unsentEntries:i}=yz(this._heartbeatsCache.heartbeats),o=ld(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return zi.warn(t),""}})}};function bN(){return new Date().toISOString().substring(0,10)}function yz(n,e=mz){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),RN(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),RN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var J_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return dd()?mN().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield gz(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return SN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return SN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function RN(n){return ld(JSON.stringify({version:2,heartbeats:n})).length}function _z(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function wz(n){Pr(new Bn("platform-logger",e=>new q_(e),"PRIVATE")),Pr(new Bn("heartbeat",e=>new Q_(e),"PRIVATE")),Rt(K_,TN,n),Rt(K_,TN,"esm2017"),Rt("fire-js","")}wz("");var Ez="firebase",Iz="11.4.0";Rt(Ez,Iz,"app");function tw(n){n===void 0&&(Ph(tw),n=H(_t));let e=n.get(Bh);return t=>new ve(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Go=new Ti("ANGULARFIRE2_VERSION");function pd(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Hc=(n,e)=>{let t=e?[e]:hg(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},jc=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(jc||{}),ON=dl()&&typeof Zone<"u"?jc.WARN:jc.SILENT;var pg=class{zone;delegate;constructor(e,t=S0){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},zo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=H($e);this.outsideAngular=t.runOutsideAngular(()=>new pg(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new pg(typeof Zone>"u"?void 0:Zone.current,wa))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PN=!1;function Cz(n,e){!PN&&(ON>jc.SILENT||dl())&&(PN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),ON>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function xz(n){let e=H($e,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Gs(n){let e=H($e,{optional:!0});return e?e.run(()=>n()):n()}var Az=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Zt(t,()=>Gs(()=>n.apply(void 0,r)))),Dn=(n,e,t)=>(t||=e?jc.WARN:jc.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=H(zo),s=H(Bh),a=H(an)}catch{return Cz(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Gs(()=>s.add())),i[u]=Az(i[u],r,a));let c=xz(()=>n.apply(this,i));return e?c instanceof ve?c.pipe(ho(o.outsideAngular),fo(o.insideAngular),tw(a)):c instanceof Promise?Gs(()=>new Promise((u,l)=>{s.run(()=>c).then(f=>Zt(a,()=>Gs(()=>u(f))),f=>Zt(a,()=>Gs(()=>l(f))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Gs(()=>c):c instanceof ve?c.pipe(ho(o.outsideAngular),fo(o.insideAngular)):Gs(()=>c)});var Wi=class{constructor(e){return e}},zs=class{constructor(){return hg()}};function Tz(n){return n&&n.length===1?n[0]:new Wi($s())}var nw=new J("angularfire2._apps"),Dz={provide:Wi,useFactory:Tz,deps:[[new zn,nw]]},Sz={provide:zs,deps:[[new zn,nw]]};function bz(n){return(e,t)=>{let r=t.get(bi);Rt("angularfire",Go.full,"core"),Rt("angularfire",Go.full,"app"),Rt("angular",xS.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Wi(i)}}function kN(n,...e){return Wn([Dz,Sz,{provide:nw,useFactory:bz(n),multi:!0,deps:[$e,_t,zo,...e]}])}var FN=Dn(ew,!0);var Rz=new Map,Nz={activated:!1,tokenObservers:[]},Mz={initialized:!1,enabled:!1};function kr(n){return Rz.get(n)||Object.assign({},Nz)}function UN(){return Mz}var Oz="https://content-firebaseappcheck.googleapis.com/v1";var Pz="exchangeDebugToken",LN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},sAe=24*60*60*1e3;var ow=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return b(this,null,function*(){this.stop();try{this.pending=new js,this.pending.promise.catch(t=>{}),yield kz(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new js,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function kz(n){return new Promise(e=>{setTimeout(e,n)})}var Fz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Wo=new Or("appCheck","AppCheck",Fz);function jN(n){if(!kr(n).activated)throw Wo.create("use-before-activation",{appName:n.name})}function HN(r,i){return b(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let p=yield s.getHeartbeatsHeader();p&&(o["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(p){throw Wo.create("fetch-network-error",{originalErrorMessage:p?.message})}if(c.status!==200)throw Wo.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(p){throw Wo.create("fetch-parse-error",{originalErrorMessage:p?.message})}let l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Wo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(l[1])*1e3,h=Date.now();return{token:u.token,expireTimeMillis:h+f,issuedAtTimeMillis:h}})}function $N(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Oz}/projects/${t}/apps/${r}:${Pz}?key=${i}`,body:{debug_token:e}}}var Lz="firebase-app-check-database",Vz=1,sw="firebase-app-check-store";var gg=null;function Bz(){return gg||(gg=new Promise((n,e)=>{try{let t=indexedDB.open(Lz,Vz);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Wo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(sw,{keyPath:"compositeKey"})}}}catch(t){e(Wo.create("storage-open",{originalErrorMessage:t?.message}))}}),gg)}function Uz(n,e){return jz(Hz(n),e)}function jz(n,e){return b(this,null,function*(){let r=(yield Bz()).transaction(sw,"readwrite"),o=r.objectStore(sw).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Wo.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function Hz(n){return`${n.options.appId}-${n.name}`}var gd=new ri("@firebase/app-check");function rw(n,e){return dd()?Uz(n,e).catch(t=>{gd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function GN(){return UN().enabled}function zN(){return b(this,null,function*(){let n=UN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var $z={error:"UNKNOWN_ERROR"};function Gz(n){return cg.encodeString(JSON.stringify(n),!1)}function aw(n,e=!1){return b(this,null,function*(){let t=n.app;jN(t);let r=kr(t),i=r.token,o;if(i&&!md(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(md(c)?i=c:yield rw(t,void 0))}if(!e&&i&&md(i))return{token:i.token};let s=!1;if(GN())try{r.exchangeTokenPromise||(r.exchangeTokenPromise=HN($N(t,yield zN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield rw(t,c),r.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"?gd.warn(c.message):gd.error(c),iw(c)}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield kr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?gd.warn(c.message):gd.error(c),o=c}let a;return i?o?md(i)?a={token:i.token,internalError:o}:a=iw(o):(a={token:i.token},r.token=i,yield rw(t,i)):a=iw(o),s&&Kz(t,a),a})}function zz(n){return b(this,null,function*(){let e=n.app;jN(e);let{provider:t}=kr(e);if(GN()){let r=yield zN(),{token:i}=yield HN($N(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Wz(n,e,t,r){let{app:i}=n,o=kr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&md(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),VN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>VN(n))}function WN(n,e){let t=kr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function VN(n){let{app:e}=n,t=kr(e),r=t.tokenRefresher;r||(r=qz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qz(n){let{app:e}=n;return new ow(()=>b(this,null,function*(){let t=kr(e),r;if(t.token?r=yield aw(n,!0):r=yield aw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=kr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},LN.RETRIAL_MIN_WAIT,LN.RETRIAL_MAX_WAIT)}function Kz(n,e){let t=kr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function md(n){return n.expireTimeMillis-Date.now()>0}function iw(n){return{token:Gz($z),error:n}}var cw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=kr(this.app);for(let t of e)WN(this.app,t.next);return Promise.resolve()}};function Xz(n,e){return new cw(n,e)}function Yz(n){return{getToken:e=>aw(n,e),getLimitedUseToken:()=>zz(n),addTokenListener:e=>Wz(n,"INTERNAL",e),removeTokenListener:e=>WN(n.app,e)}}var Zz="@firebase/app-check",Qz="0.8.12";var Jz="app-check",BN="app-check-internal";function eW(){Pr(new Bn(Jz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Xz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(BN).initialize()})),Pr(new Bn(BN,n=>{let e=n.getProvider("app-check").getImmediate();return Yz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rt(Zz,Qz)}eW();var tW="app-check";var $c=class{constructor(){return Hc(tW)}};var nW=["localhost","0.0.0.0","127.0.0.1"],_Ae=typeof window<"u"&&nW.includes(window.location.hostname);function cM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var uM=cM,lM=new Or("auth","Firebase",cM());var Eg=new ri("@firebase/auth");function rW(n,...e){Eg.logLevel<=Pe.WARN&&Eg.warn(`Auth (${$o}): ${n}`,...e)}function vg(n,...e){Eg.logLevel<=Pe.ERROR&&Eg.error(`Auth (${$o}): ${n}`,...e)}function yr(n,...e){throw Nw(n,...e)}function Fr(n,...e){return Nw(n,...e)}function Rw(n,e,t){let r=Object.assign(Object.assign({},uM()),{[e]:t});return new Or("auth","Firebase",r).create(e,{appName:n.name})}function Xi(n){return Rw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iW(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&yr(n,"argument-error"),Rw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return lM.create(n,...e)}function he(n,e,...t){if(!n)throw Nw(e,...t)}function qi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw vg(e),new Error(e)}function Yi(n,e){n||qi(e)}function dw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function oW(){return qN()==="http:"||qN()==="https:"}function qN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function sW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oW()||fN()||"connection"in navigator)?navigator.onLine:!0}function aW(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ws=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yi(t>e,"Short delay should be less than long delay!"),this.isMobile=lN()||hN()}get(){return sW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Mw(n,e){Yi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ig=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var cW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var uW=new Ws(3e4,6e4);function Ko(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Xo(o,s,a,c){return b(this,arguments,function*(n,e,t,r,i={}){return dM(n,i,()=>b(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let f=Lc(Object.assign({key:n.config.apiKey},l)).slice(1),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let p=Object.assign({method:e,headers:h},u);return dN()||(p.referrerPolicy="no-referrer"),Ig.fetch()(fM(n,n.config.apiHost,t,f),p)}))})}function dM(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},cW),e);try{let i=new fw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw mg(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw mg(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw mg(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw mg(n,"user-disabled",s);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Rw(n,l,u);yr(n,l)}}catch(i){if(i instanceof or)throw i;yr(n,"network-request-failed",{message:String(i)})}})}function Ad(o,s,a,c){return b(this,arguments,function*(n,e,t,r,i={}){let u=yield Xo(n,e,t,r,i);return"mfaPendingCredential"in u&&yr(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function fM(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Mw(n.config,i):`${n.config.apiScheme}://${i}`}function lW(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var fw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Fr(this.auth,"network-request-failed")),uW.get())})}};function mg(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Fr(n,e,r);return i.customData._tokenResponse=t,i}function KN(n){return n!==void 0&&n.enterprise!==void 0}var hw=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lW(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function dW(n,e){return b(this,null,function*(){return Xo(n,"GET","/v2/recaptchaConfig",Ko(n,e))})}function fW(n,e){return b(this,null,function*(){return Xo(n,"POST","/v1/accounts:delete",e)})}function hM(n,e){return b(this,null,function*(){return Xo(n,"POST","/v1/accounts:lookup",e)})}function yd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ow(n,e=!1){return b(this,null,function*(){let t=fn(n),r=yield t.getIdToken(e),i=Pw(r);he(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:yd(uw(i.auth_time)),issuedAtTime:yd(uw(i.iat)),expirationTime:yd(uw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function uw(n){return Number(n)*1e3}function Pw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return vg("JWT malformed, contained fewer than 3 sections"),null;try{let i=ug(t);return i?JSON.parse(i):(vg("Failed to decode base64 JWT payload"),null)}catch(i){return vg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function XN(n){let e=Pw(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function wd(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof or&&hW(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function hW({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var pw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ed=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yd(this.lastLoginAt),this.creationTime=yd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Cg(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield wd(n,hM(t,{idToken:r}));he(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?pM(o.providerUserInfo):[],a=pW(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,l=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ed(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(n,f)})}function kw(n){return b(this,null,function*(){let e=fn(n);yield Cg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function pW(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pM(n){return n.map(e=>{var{providerId:t}=e,r=kf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function gW(n,e){return b(this,null,function*(){let t=yield dM(n,{},()=>b(this,null,function*(){let r=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=fM(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ig.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function mW(n,e){return b(this,null,function*(){return Xo(n,"POST","/v2/accounts:revokeToken",Ko(n,e))})}var _d=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");let t=XN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield gW(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(he(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(he(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return qi("not implemented")}};function qo(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var zc=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=kf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ed(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield wd(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Ow(this,e)}reload(){return kw(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Cg(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(Un(this.auth.app))return Promise.reject(Xi(this.auth));let e=yield this.getIdToken();return yield wd(this,fW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,l;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,p=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,m=(s=t.photoURL)!==null&&s!==void 0?s:void 0,y=(a=t.tenantId)!==null&&a!==void 0?a:void 0,_=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,C=(u=t.createdAt)!==null&&u!==void 0?u:void 0,x=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:R,emailVerified:O,isAnonymous:V,providerData:U,stsTokenManager:A}=t;he(R&&A,e,"internal-error");let E=_d.fromJSON(this.name,A);he(typeof R=="string",e,"internal-error"),qo(f,e.name),qo(h,e.name),he(typeof O=="boolean",e,"internal-error"),he(typeof V=="boolean",e,"internal-error"),qo(p,e.name),qo(m,e.name),qo(y,e.name),qo(_,e.name),qo(C,e.name),qo(x,e.name);let T=new n({uid:R,auth:e,email:h,emailVerified:O,displayName:f,isAnonymous:V,photoURL:m,phoneNumber:p,tenantId:y,stsTokenManager:E,createdAt:C,lastLoginAt:x});return U&&Array.isArray(U)&&(T.providerData=U.map(S=>Object.assign({},S))),_&&(T._redirectEventId=_),T}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new _d;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Cg(o),o})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];he(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?pM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new _d;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ed(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var YN=new Map;function Ki(n){Yi(n instanceof Function,"Expected a class definition");let e=YN.get(n);return e?(Yi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,YN.set(n,e),e)}var vW=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),gw=vW;function yg(n,e,t){return`firebase:${n}:${e}:${t}`}var xg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=yg(this.userKey,i.apiKey,o),this.fullPersistenceKey=yg("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?zc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(Ki(gw),e,r);let i=(yield Promise.all(t.map(u=>b(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Ki(gw),s=yg(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let l=yield u._get(s);if(l){let f=zc._fromJSON(e,l);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>b(this,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function ZN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wM(e))return"Blackberry";if(EM(e))return"Webos";if(mM(e))return"Safari";if((e.includes("chrome/")||vM(e))&&!e.includes("edge/"))return"Chrome";if(_M(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function gM(n=nn()){return/firefox\//i.test(n)}function mM(n=nn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vM(n=nn()){return/crios\//i.test(n)}function yM(n=nn()){return/iemobile/i.test(n)}function _M(n=nn()){return/android/i.test(n)}function wM(n=nn()){return/blackberry/i.test(n)}function EM(n=nn()){return/webos/i.test(n)}function Fw(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yW(n=nn()){var e;return Fw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _W(){return pN()&&document.documentMode===10}function IM(n=nn()){return Fw(n)||_M(n)||EM(n)||wM(n)||/windows phone/i.test(n)||yM(n)}function CM(n,e=[]){let t;switch(n){case"Browser":t=ZN(nn());break;case"Worker":t=`${ZN(nn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$o}/${r}`}var mw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function wW(t){return b(this,arguments,function*(n,e={}){return Xo(n,"GET","/v2/passwordPolicy",Ko(n,e))})}var EW=6,vw=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:EW,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var yw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ag(this),this.idTokenSubscription=new Ag(this),this.beforeStateQueue=new mw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ki(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield xg.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield hM(this,{idToken:e}),r=yield zc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(Un(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield Cg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=aW()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(Un(this.app))return Promise.reject(Xi(this));let t=e?fn(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return Un(this.app)?Promise.reject(Xi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Un(this.app)?Promise.reject(Xi(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(Ki(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield wW(this),t=new vw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Or("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield mW(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ki(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=yield xg.create(this,[Ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&rW(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Yo(n){return fn(n)}var Ag=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=yN(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Pg={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IW(n){Pg=n}function xM(n){return Pg.loadJS(n)}function CW(){return Pg.recaptchaEnterpriseScript}function xW(){return Pg.gapiScript}function AM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var _w=class{constructor(){this.enterprise=new ww}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},ww=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var AW="recaptcha-enterprise",TM="NO_RECAPTCHA",Ew=class{constructor(e){this.type=AW,this.auth=Yo(e)}verify(e="verify",t=!1){return b(this,null,function*(){function r(o){return b(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>b(this,null,function*(){dW(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new hw(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;KN(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(TM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _w().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&KN(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=CW();c.length!==0&&(c+=a),xM(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function vd(n,e,t,r=!1,i=!1){return b(this,null,function*(){let o=new Ew(n),s;if(i)s=TM;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Iw(n,e,t,r,i){return b(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield vd(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>b(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield vd(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield vd(n,e,t);return r(n,a).catch(c=>b(this,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let l=yield vd(n,e,t,!1,!0);return r(n,l)}return Promise.reject(c)}))}else{let a=yield vd(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function Lw(n,e){let t=Uc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(ni(o,e??{}))return i;yr(i,"already-initialized")}return t.initialize({options:e})}function TW(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ki);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Vw(n,e,t){let r=Yo(n);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=DM(e),{host:s,port:a}=DW(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},l=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(ni(u,r.config.emulator)&&ni(l,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=l,r.settings.appVerificationDisabledForTesting=!0,i||SW()}function DM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function DW(n){let e=DM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:QN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:QN(s)}}}function QN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function SW(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Wc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,t){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}};function bW(n,e){return b(this,null,function*(){return Xo(n,"POST","/v1/accounts:signUp",e)})}function RW(n,e){return b(this,null,function*(){return Ad(n,"POST","/v1/accounts:signInWithPassword",Ko(n,e))})}function NW(n,e){return b(this,null,function*(){return Ad(n,"POST","/v1/accounts:signInWithEmailLink",Ko(n,e))})}function MW(n,e){return b(this,null,function*(){return Ad(n,"POST","/v1/accounts:signInWithEmailLink",Ko(n,e))})}var Id=class n extends Wc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Iw(e,t,"signInWithPassword",RW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return NW(e,{email:this._email,oobCode:this._password});default:yr(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Iw(e,r,"signUpPassword",bW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return MW(e,{idToken:t,email:this._email,oobCode:this._password});default:yr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Gc(n,e){return b(this,null,function*(){return Ad(n,"POST","/v1/accounts:signInWithIdp",Ko(n,e))})}var OW="http://localhost",Tg=class n extends Wc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=kf(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Gc(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Gc(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Gc(e,t)}buildRequest(){let e={requestUri:OW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lc(t)}return e}};function PW(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kW(n){let e=Vc(Bc(n)).link,t=e?Vc(Bc(e)).deep_link_id:null,r=Vc(Bc(n)).deep_link_id;return(r?Vc(Bc(r)).link:null)||r||t||e||n}var Dg=class n{constructor(e){var t,r,i,o,s,a;let c=Vc(Bc(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,f=PW((i=c.mode)!==null&&i!==void 0?i:null);he(u&&l&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=l,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=kW(e);try{return new n(t)}catch{return null}}};var SM=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Id._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Dg.parseLink(r);return he(i,"argument-error"),Id._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Cd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Sg=class extends Cd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Bw=(()=>{class n extends Sg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Tg._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function FW(n,e){return b(this,null,function*(){return Ad(n,"POST","/v1/accounts:signUp",Ko(n,e))})}var qc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let o=yield zc._fromIdTokenResponse(e,r,i),s=JN(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=JN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function JN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Cw=class n extends or{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function bM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Cw._fromErrorAndOperation(n,o,e,r):o})}function LW(n,e,t=!1){return b(this,null,function*(){let r=yield wd(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return qc._forOperation(n,"link",r)})}function VW(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(Un(r.app))return Promise.reject(Xi(r));let i="reauthenticate";try{let o=yield wd(n,bM(r,i,e,n),t);he(o.idToken,r,"internal-error");let s=Pw(o.idToken);he(s,r,"internal-error");let{sub:a}=s;return he(n.uid===a,r,"user-mismatch"),qc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&yr(r,"user-mismatch"),o}})}function RM(n,e,t=!1){return b(this,null,function*(){if(Un(n.app))return Promise.reject(Xi(n));let r="signIn",i=yield bM(n,r,e),o=yield qc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Uw(n,e){return b(this,null,function*(){return RM(Yo(n),e)})}function NM(n){return b(this,null,function*(){let e=Yo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function jw(n,e,t){return b(this,null,function*(){if(Un(n.app))return Promise.reject(Xi(n));let r=Yo(n),s=yield Iw(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FW,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&NM(n),c}),a=yield qc._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Hw(n,e,t){return Un(n.app)?Promise.reject(Xi(n)):Uw(fn(n),SM.credential(e,t)).catch(r=>b(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&NM(n),r}))}function $w(n,e){return fn(n).setPersistence(e)}function Gw(n,e,t,r){return fn(n).onIdTokenChanged(e,t,r)}function zw(n,e,t){return fn(n).beforeAuthStateChanged(e,t)}function Ww(n,e,t,r){return fn(n).onAuthStateChanged(e,t,r)}function qw(n){return fn(n).signOut()}var bg="__sak";var Rg=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bg,"1"),this.storage.removeItem(bg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var BW=1e3,UW=10,jW=(()=>{class n extends Rg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);_W()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,UW):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},BW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield uo(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield uo(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield uo(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Td=jW;var HW=(()=>{class n extends Rg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Kc=HW;function $W(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var GW=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(l=>b(this,null,function*(){return l(r.origin,s)})),u=yield $W(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Kw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var xw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=Kw("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(l),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(l),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function oi(){return window}function zW(n){oi().location.href=n}function MM(){return typeof oi().WorkerGlobalScope<"u"&&typeof oi().importScripts=="function"}function WW(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function qW(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function KW(){return MM()?self:null}var OM="firebaseLocalStorageDb",XW=1,Ng="firebaseLocalStorage",PM="fbase_key",qs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function kg(n,e){return n.transaction([Ng],e?"readwrite":"readonly").objectStore(Ng)}function YW(){let n=indexedDB.deleteDatabase(OM);return new qs(n).toPromise()}function Aw(){let n=indexedDB.open(OM,XW);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Ng,{keyPath:PM})}catch(i){t(i)}}),n.addEventListener("success",()=>b(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Ng)?e(r):(r.close(),yield YW(),e(yield Aw()))}))})}function eM(n,e,t){return b(this,null,function*(){let r=kg(n,!0).put({[PM]:e,value:t});return new qs(r).toPromise()})}function ZW(n,e){return b(this,null,function*(){let t=kg(n,!1).get(e),r=yield new qs(t).toPromise();return r===void 0?null:r.value})}function tM(n,e){let t=kg(n,!0).delete(e);return new qs(t).toPromise()}var QW=800,JW=3,eq=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Aw(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>JW)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return MM()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=GW._getInstance(KW()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield WW(),!this.activeServiceWorker)return;this.sender=new xw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||qW()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Aw();return yield eM(t,bg,"1"),yield tM(t,bg),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>eM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>ZW(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>tM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(o=>{let s=kg(o,!1).getAll();return new qs(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),QW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),kM=eq;var DAe=AM("rcb"),SAe=new Ws(3e4,6e4);function FM(n,e){return e?Ki(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var xd=class extends Wc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Gc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Gc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function tq(n){return RM(n.auth,new xd(n),n.bypassAuthState)}function nq(n){let{auth:e,user:t}=n;return he(t,e,"internal-error"),VW(t,new xd(n),n.bypassAuthState)}function rq(n){return b(this,null,function*(){let{auth:e,user:t}=n;return he(t,e,"internal-error"),LW(t,new xd(n),n.bypassAuthState)})}var Mg=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tq;case"linkViaPopup":case"linkViaRedirect":return rq;case"reauthViaPopup":case"reauthViaRedirect":return nq;default:yr(this.auth,"internal-error")}}resolve(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var iq=new Ws(2e3,1e4);function Xw(n,e,t){return b(this,null,function*(){if(Un(n.app))return Promise.reject(Fr(n,"operation-not-supported-in-this-environment"));let r=Yo(n);iW(n,e,Cd);let i=FM(r,t);return new oq(r,"signInViaPopup",e,i).executeNotNull()})}var oq=(()=>{class n extends Mg{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return b(this,null,function*(){let t=yield this.execute();return he(t,this.auth,"internal-error"),t})}onExecution(){return b(this,null,function*(){Yi(this.filter.length===1,"Popup operations only handle one event");let t=Kw();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,iq.get())};t()}}n.currentPopupAction=null;return n})(),sq="pendingRedirect",_g=new Map,Tw=class n extends Mg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=_g.get(this.auth._key());if(!e){try{let r=(yield aq(this.resolver,this.auth))?yield uo(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}_g.set(this.auth._key(),e)}return this.bypassAuthState||_g.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return uo(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,uo(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function aq(n,e){return b(this,null,function*(){let t=lq(e),r=uq(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function cq(n,e){_g.set(n._key(),e)}function uq(n){return Ki(n._redirectPersistence)}function lq(n){return yg(sq,n.config.apiKey,n.name)}function dq(n,e,t=!1){return b(this,null,function*(){if(Un(n.app))return Promise.reject(Xi(n));let r=Yo(n),i=FM(r,e),s=yield new Tw(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var fq=10*60*1e3,Dw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!LM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Fr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fq&&this.cachedEventUids.clear(),this.cachedEventUids.has(nM(e))}saveEventToCache(e){this.cachedEventUids.add(nM(e)),this.lastProcessedEventTime=Date.now()}};function nM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function LM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function hq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LM(n);default:return!1}}function pq(t){return b(this,arguments,function*(n,e={}){return Xo(n,"GET","/v1/projects",e)})}var gq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mq=/^https?/;function vq(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield pq(n);for(let t of e)try{if(yq(t))return}catch{}yr(n,"unauthorized-domain")})}function yq(n){let e=dw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!mq.test(t))return!1;if(gq.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var _q=new Ws(3e4,6e4);function rM(){let n=oi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function wq(n){return new Promise((e,t)=>{var r,i,o;function s(){rM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rM(),t(Fr(n,"network-request-failed"))},timeout:_q.get()})}if(!((i=(r=oi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=oi().gapi)===null||o===void 0)&&o.load)s();else{let a=AM("iframefcb");return oi()[a]=()=>{gapi.load?s():t(Fr(n,"network-request-failed"))},xM(`${xW()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw wg=null,e})}var wg=null;function Eq(n){return wg=wg||wq(n),wg}var Iq=new Ws(5e3,15e3),Cq="__/auth/iframe",xq="emulator/auth/iframe",Aq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dq(n){let e=n.config;he(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Mw(e,xq):`https://${n.config.authDomain}/${Cq}`,r={apiKey:e.apiKey,appName:n.name,v:$o},i=Tq.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Lc(r).slice(1)}`}function Sq(n){return b(this,null,function*(){let e=yield Eq(n),t=oi().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:Dq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Aq,dontclear:!0},r=>new Promise((i,o)=>b(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Fr(n,"network-request-failed"),a=oi().setTimeout(()=>{o(s)},Iq.get());function c(){oi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var bq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rq=500,Nq=600,Mq="_blank",Oq="http://localhost",Og=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Pq(n,e,t,r=Rq,i=Nq){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},bq),{width:r.toString(),height:i.toString(),top:o,left:s}),u=nn().toLowerCase();t&&(a=vM(u)?Mq:t),gM(u)&&(e=e||Oq,c.scrollbars="yes");let l=Object.entries(c).reduce((h,[p,m])=>`${h}${p}=${m},`,"");if(yW(u)&&a!=="_self")return kq(e||"",a),new Og(null);let f=window.open(e||"",a,l);he(f,n,"popup-blocked");try{f.focus()}catch{}return new Og(f)}function kq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Fq="__/auth/handler",Lq="emulator/auth/handler",Vq=encodeURIComponent("fac");function iM(n,e,t,r,i,o){return b(this,null,function*(){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:$o,eventId:i};if(e instanceof Cd){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",vN(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,f]of Object.entries(o||{}))s[l]=f}if(e instanceof Sg){let l=e.getScopes().filter(f=>f!=="");l.length>0&&(s.scopes=l.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield n._getAppCheckToken(),u=c?`#${Vq}=${encodeURIComponent(c)}`:"";return`${Bq(n)}?${Lc(a).slice(1)}${u}`})}function Bq({config:n}){return n.emulator?Mw(n,Lq):`https://${n.authDomain}/${Fq}`}var lw="webStorageSupport",Sw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kc,this._completeRedirectFn=dq,this._overrideRedirectResult=cq}_openPopup(e,t,r,i){return b(this,null,function*(){var o;Yi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield iM(e,t,r,dw(),i);return Pq(e,s,Kw())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let o=yield iM(e,t,r,dw(),i);return zW(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Yi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield Sq(e),r=new Dw(e);return t.register("authEvent",i=>(he(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lw,{type:lw},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[lw];s!==void 0&&t(!!s),yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return IM()||mM()||Fw()}},VM=Sw;var oM="@firebase/auth",sM="1.9.1";var bw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Uq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jq(n){Pr(new Bn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;he(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CM(n)},u=new yw(r,i,o,c);return TW(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pr(new Bn("auth-internal",e=>{let t=Yo(e.getProvider("auth").getImmediate());return(r=>new bw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rt(oM,sM,Uq(n)),Rt(oM,sM,"esm2017")}var Hq=5*60,$q=B_("authIdTokenMaxAge")||Hq,aM=null,Gq=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>$q)return;let i=t?.token;aM!==i&&(aM=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Yw(n=$s()){let e=Uc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Lw(n,{popupRedirectResolver:VM,persistence:[kM,Td,Kc]}),r=B_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Gq(o.toString());zw(t,s,()=>s(t.currentUser)),Gw(t,a=>s(a))}}let i=L_("auth");return i&&Vw(t,`http://${i}`),t}function zq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}IW({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Fr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",zq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jq("Browser");var BM="auth",Ks=class{constructor(e){return e}},Dd=class{constructor(){return Hc(BM)}};var Zw=new J("angularfire2.auth-instances");function NK(n,e){let t=pd(BM,n,e);return t&&new Ks(t)}function MK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ks(r)}}var OK={provide:Dd,deps:[[new zn,Zw]]},PK={provide:Ks,useFactory:NK,deps:[[new zn,Zw],Wi]};function UM(n,...e){return Rt("angularfire",Go.full,"auth"),Wn([PK,OK,{provide:Zw,useFactory:MK(n),multi:!0,deps:[$e,_t,zo,zs,[new zn,$c],...e]}])}var jM=Dn(jw,!0,2);var HM=Dn(Yw,!0);var $M=Dn(Ww,!0);var Qw=Dn($w,!0);var GM=Dn(Hw,!0,2);var zM=Dn(Xw,!0,2);var WM=Dn(qw,!0,2);var qM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},KM={};var Zi,Jw;(function(){var n;function e(A,E){function T(){}T.prototype=E.prototype,A.D=E.prototype,A.prototype=new T,A.prototype.constructor=A,A.C=function(S,N,M){for(var D=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)D[xt-2]=arguments[xt];return E.prototype[N].apply(S,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,E,T){T||(T=0);var S=Array(16);if(typeof E=="string")for(var N=0;16>N;++N)S[N]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(N=0;16>N;++N)S[N]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;E=A.g[0],T=A.g[1],N=A.g[2];var M=A.g[3],D=E+(M^T&(N^M))+S[0]+3614090360&4294967295;E=T+(D<<7&4294967295|D>>>25),D=M+(N^E&(T^N))+S[1]+3905402710&4294967295,M=E+(D<<12&4294967295|D>>>20),D=N+(T^M&(E^T))+S[2]+606105819&4294967295,N=M+(D<<17&4294967295|D>>>15),D=T+(E^N&(M^E))+S[3]+3250441966&4294967295,T=N+(D<<22&4294967295|D>>>10),D=E+(M^T&(N^M))+S[4]+4118548399&4294967295,E=T+(D<<7&4294967295|D>>>25),D=M+(N^E&(T^N))+S[5]+1200080426&4294967295,M=E+(D<<12&4294967295|D>>>20),D=N+(T^M&(E^T))+S[6]+2821735955&4294967295,N=M+(D<<17&4294967295|D>>>15),D=T+(E^N&(M^E))+S[7]+4249261313&4294967295,T=N+(D<<22&4294967295|D>>>10),D=E+(M^T&(N^M))+S[8]+1770035416&4294967295,E=T+(D<<7&4294967295|D>>>25),D=M+(N^E&(T^N))+S[9]+2336552879&4294967295,M=E+(D<<12&4294967295|D>>>20),D=N+(T^M&(E^T))+S[10]+4294925233&4294967295,N=M+(D<<17&4294967295|D>>>15),D=T+(E^N&(M^E))+S[11]+2304563134&4294967295,T=N+(D<<22&4294967295|D>>>10),D=E+(M^T&(N^M))+S[12]+1804603682&4294967295,E=T+(D<<7&4294967295|D>>>25),D=M+(N^E&(T^N))+S[13]+4254626195&4294967295,M=E+(D<<12&4294967295|D>>>20),D=N+(T^M&(E^T))+S[14]+2792965006&4294967295,N=M+(D<<17&4294967295|D>>>15),D=T+(E^N&(M^E))+S[15]+1236535329&4294967295,T=N+(D<<22&4294967295|D>>>10),D=E+(N^M&(T^N))+S[1]+4129170786&4294967295,E=T+(D<<5&4294967295|D>>>27),D=M+(T^N&(E^T))+S[6]+3225465664&4294967295,M=E+(D<<9&4294967295|D>>>23),D=N+(E^T&(M^E))+S[11]+643717713&4294967295,N=M+(D<<14&4294967295|D>>>18),D=T+(M^E&(N^M))+S[0]+3921069994&4294967295,T=N+(D<<20&4294967295|D>>>12),D=E+(N^M&(T^N))+S[5]+3593408605&4294967295,E=T+(D<<5&4294967295|D>>>27),D=M+(T^N&(E^T))+S[10]+38016083&4294967295,M=E+(D<<9&4294967295|D>>>23),D=N+(E^T&(M^E))+S[15]+3634488961&4294967295,N=M+(D<<14&4294967295|D>>>18),D=T+(M^E&(N^M))+S[4]+3889429448&4294967295,T=N+(D<<20&4294967295|D>>>12),D=E+(N^M&(T^N))+S[9]+568446438&4294967295,E=T+(D<<5&4294967295|D>>>27),D=M+(T^N&(E^T))+S[14]+3275163606&4294967295,M=E+(D<<9&4294967295|D>>>23),D=N+(E^T&(M^E))+S[3]+4107603335&4294967295,N=M+(D<<14&4294967295|D>>>18),D=T+(M^E&(N^M))+S[8]+1163531501&4294967295,T=N+(D<<20&4294967295|D>>>12),D=E+(N^M&(T^N))+S[13]+2850285829&4294967295,E=T+(D<<5&4294967295|D>>>27),D=M+(T^N&(E^T))+S[2]+4243563512&4294967295,M=E+(D<<9&4294967295|D>>>23),D=N+(E^T&(M^E))+S[7]+1735328473&4294967295,N=M+(D<<14&4294967295|D>>>18),D=T+(M^E&(N^M))+S[12]+2368359562&4294967295,T=N+(D<<20&4294967295|D>>>12),D=E+(T^N^M)+S[5]+4294588738&4294967295,E=T+(D<<4&4294967295|D>>>28),D=M+(E^T^N)+S[8]+2272392833&4294967295,M=E+(D<<11&4294967295|D>>>21),D=N+(M^E^T)+S[11]+1839030562&4294967295,N=M+(D<<16&4294967295|D>>>16),D=T+(N^M^E)+S[14]+4259657740&4294967295,T=N+(D<<23&4294967295|D>>>9),D=E+(T^N^M)+S[1]+2763975236&4294967295,E=T+(D<<4&4294967295|D>>>28),D=M+(E^T^N)+S[4]+1272893353&4294967295,M=E+(D<<11&4294967295|D>>>21),D=N+(M^E^T)+S[7]+4139469664&4294967295,N=M+(D<<16&4294967295|D>>>16),D=T+(N^M^E)+S[10]+3200236656&4294967295,T=N+(D<<23&4294967295|D>>>9),D=E+(T^N^M)+S[13]+681279174&4294967295,E=T+(D<<4&4294967295|D>>>28),D=M+(E^T^N)+S[0]+3936430074&4294967295,M=E+(D<<11&4294967295|D>>>21),D=N+(M^E^T)+S[3]+3572445317&4294967295,N=M+(D<<16&4294967295|D>>>16),D=T+(N^M^E)+S[6]+76029189&4294967295,T=N+(D<<23&4294967295|D>>>9),D=E+(T^N^M)+S[9]+3654602809&4294967295,E=T+(D<<4&4294967295|D>>>28),D=M+(E^T^N)+S[12]+3873151461&4294967295,M=E+(D<<11&4294967295|D>>>21),D=N+(M^E^T)+S[15]+530742520&4294967295,N=M+(D<<16&4294967295|D>>>16),D=T+(N^M^E)+S[2]+3299628645&4294967295,T=N+(D<<23&4294967295|D>>>9),D=E+(N^(T|~M))+S[0]+4096336452&4294967295,E=T+(D<<6&4294967295|D>>>26),D=M+(T^(E|~N))+S[7]+1126891415&4294967295,M=E+(D<<10&4294967295|D>>>22),D=N+(E^(M|~T))+S[14]+2878612391&4294967295,N=M+(D<<15&4294967295|D>>>17),D=T+(M^(N|~E))+S[5]+4237533241&4294967295,T=N+(D<<21&4294967295|D>>>11),D=E+(N^(T|~M))+S[12]+1700485571&4294967295,E=T+(D<<6&4294967295|D>>>26),D=M+(T^(E|~N))+S[3]+2399980690&4294967295,M=E+(D<<10&4294967295|D>>>22),D=N+(E^(M|~T))+S[10]+4293915773&4294967295,N=M+(D<<15&4294967295|D>>>17),D=T+(M^(N|~E))+S[1]+2240044497&4294967295,T=N+(D<<21&4294967295|D>>>11),D=E+(N^(T|~M))+S[8]+1873313359&4294967295,E=T+(D<<6&4294967295|D>>>26),D=M+(T^(E|~N))+S[15]+4264355552&4294967295,M=E+(D<<10&4294967295|D>>>22),D=N+(E^(M|~T))+S[6]+2734768916&4294967295,N=M+(D<<15&4294967295|D>>>17),D=T+(M^(N|~E))+S[13]+1309151649&4294967295,T=N+(D<<21&4294967295|D>>>11),D=E+(N^(T|~M))+S[4]+4149444226&4294967295,E=T+(D<<6&4294967295|D>>>26),D=M+(T^(E|~N))+S[11]+3174756917&4294967295,M=E+(D<<10&4294967295|D>>>22),D=N+(E^(M|~T))+S[2]+718787259&4294967295,N=M+(D<<15&4294967295|D>>>17),D=T+(M^(N|~E))+S[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(N+(D<<21&4294967295|D>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+M&4294967295}r.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var T=E-this.blockSize,S=this.B,N=this.h,M=0;M<E;){if(N==0)for(;M<=T;)i(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<E;)if(S[N++]=A.charCodeAt(M++),N==this.blockSize){i(this,S),N=0;break}}else for(;M<E;)if(S[N++]=A[M++],N==this.blockSize){i(this,S),N=0;break}}this.h=N,this.o+=E},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var T=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=T&255,T/=256;for(this.u(A),A=Array(16),E=T=0;4>E;++E)for(var S=0;32>S;S+=8)A[T++]=this.g[E]>>>S&255;return A};function o(A,E){var T=a;return Object.prototype.hasOwnProperty.call(T,A)?T[A]:T[A]=E(A)}function s(A,E){this.h=E;for(var T=[],S=!0,N=A.length-1;0<=N;N--){var M=A[N]|0;S&&M==E||(T[N]=M,S=!1)}this.g=T}var a={};function c(A){return-128<=A&&128>A?o(A,function(E){return new s([E|0],0>E?-1:0)}):new s([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return _(u(-A));for(var E=[],T=1,S=0;A>=T;S++)E[S]=A/T|0,T*=4294967296;return new s(E,0)}function l(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return _(l(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(E,8)),S=f,N=0;N<A.length;N+=8){var M=Math.min(8,A.length-N),D=parseInt(A.substring(N,N+M),E);8>M?(M=u(Math.pow(E,M)),S=S.j(M).add(u(D))):(S=S.j(T),S=S.add(u(D)))}return S}var f=c(0),h=c(1),p=c(16777216);n=s.prototype,n.m=function(){if(y(this))return-_(this).m();for(var A=0,E=1,T=0;T<this.g.length;T++){var S=this.i(T);A+=(0<=S?S:4294967296+S)*E,E*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(m(this))return"0";if(y(this))return"-"+_(this).toString(A);for(var E=u(Math.pow(A,6)),T=this,S="";;){var N=O(T,E).g;T=C(T,N.j(E));var M=((0<T.g.length?T.g[0]:T.h)>>>0).toString(A);if(T=N,m(T))return M+S;for(;6>M.length;)M="0"+M;S=M+S}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function m(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function y(A){return A.h==-1}n.l=function(A){return A=C(this,A),y(A)?-1:m(A)?0:1};function _(A){for(var E=A.g.length,T=[],S=0;S<E;S++)T[S]=~A.g[S];return new s(T,~A.h).add(h)}n.abs=function(){return y(this)?_(this):this},n.add=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],S=0,N=0;N<=E;N++){var M=S+(this.i(N)&65535)+(A.i(N)&65535),D=(M>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);S=D>>>16,M&=65535,D&=65535,T[N]=D<<16|M}return new s(T,T[T.length-1]&-2147483648?-1:0)};function C(A,E){return A.add(_(E))}n.j=function(A){if(m(this)||m(A))return f;if(y(this))return y(A)?_(this).j(_(A)):_(_(this).j(A));if(y(A))return _(this.j(_(A)));if(0>this.l(p)&&0>A.l(p))return u(this.m()*A.m());for(var E=this.g.length+A.g.length,T=[],S=0;S<2*E;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var N=0;N<A.g.length;N++){var M=this.i(S)>>>16,D=this.i(S)&65535,xt=A.i(N)>>>16,jn=A.i(N)&65535;T[2*S+2*N]+=D*jn,x(T,2*S+2*N),T[2*S+2*N+1]+=M*jn,x(T,2*S+2*N+1),T[2*S+2*N+1]+=D*xt,x(T,2*S+2*N+1),T[2*S+2*N+2]+=M*xt,x(T,2*S+2*N+2)}for(S=0;S<E;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=E;S<2*E;S++)T[S]=0;return new s(T,0)};function x(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function R(A,E){this.g=A,this.h=E}function O(A,E){if(m(E))throw Error("division by zero");if(m(A))return new R(f,f);if(y(A))return E=O(_(A),E),new R(_(E.g),_(E.h));if(y(E))return E=O(A,_(E)),new R(_(E.g),E.h);if(30<A.g.length){if(y(A)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var T=h,S=E;0>=S.l(A);)T=V(T),S=V(S);var N=U(T,1),M=U(S,1);for(S=U(S,2),T=U(T,2);!m(S);){var D=M.add(S);0>=D.l(A)&&(N=N.add(T),M=D),S=U(S,1),T=U(T,1)}return E=C(A,N.j(E)),new R(N,E)}for(N=f;0<=A.l(E);){for(T=Math.max(1,Math.floor(A.m()/E.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),M=u(T),D=M.j(E);y(D)||0<D.l(A);)T-=S,M=u(T),D=M.j(E);m(M)&&(M=h),N=N.add(M),A=C(A,D)}return new R(N,A)}n.A=function(A){return O(this,A).h},n.and=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)&A.i(S);return new s(T,this.h&A.h)},n.or=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)|A.i(S);return new s(T,this.h|A.h)},n.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)^A.i(S);return new s(T,this.h^A.h)};function V(A){for(var E=A.g.length+1,T=[],S=0;S<E;S++)T[S]=A.i(S)<<1|A.i(S-1)>>>31;return new s(T,A.h)}function U(A,E){var T=E>>5;E%=32;for(var S=A.g.length-T,N=[],M=0;M<S;M++)N[M]=0<E?A.i(M+T)>>>E|A.i(M+T+1)<<32-E:A.i(M+T);return new s(N,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Jw=KM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=l,Zi=KM.Integer=s}).apply(typeof qM<"u"?qM:typeof self<"u"?self:typeof window<"u"?window:{});var Fg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qi={};var eE,FK,Xc,tE,Sd,Lg,nE,rE,iE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,v){return d==Array.prototype||d==Object.prototype||(d[g]=v.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fg=="object"&&Fg];for(var g=0;g<d.length;++g){var v=d[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(d,g){if(g)e:{var v=r;d=d.split(".");for(var w=0;w<d.length-1;w++){var k=d[w];if(!(k in v))break e;v=v[k]}d=d[d.length-1],w=v[d],g=g(w),g!=w&&g!=null&&e(v,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var v=0,w=!1,k={next:function(){if(!w&&v<d.length){var L=v++;return{value:g(L,d[L]),done:!1}}return w=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(d){return d||function(){return o(this,function(g,v){return v})}});var s=s||{},a=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function l(d,g,v){return d.call.apply(d.bind,arguments)}function f(d,g,v){if(!d)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,w),d.apply(g,k)}}return function(){return d.apply(g,arguments)}}function h(d,g,v){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?l:f,h.apply(null,arguments)}function p(d,g){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),d.apply(this,w)}}function m(d,g){function v(){}v.prototype=g.prototype,d.aa=g.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(w,k,L){for(var Z=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)Z[ct-2]=arguments[ct];return g.prototype[k].apply(w,Z)}}function y(d){let g=d.length;if(0<g){let v=Array(g);for(let w=0;w<g;w++)v[w]=d[w];return v}return[]}function _(d,g){for(let v=1;v<arguments.length;v++){let w=arguments[v];if(c(w)){let k=d.length||0,L=w.length||0;d.length=k+L;for(let Z=0;Z<L;Z++)d[k+Z]=w[Z]}else d.push(w)}}class C{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(d){return/^[\s\xa0]*$/.test(d)}function R(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function O(d){return O[" "](d),d}O[" "]=function(){};var V=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function U(d,g,v){for(let w in d)g.call(v,d[w],w,d)}function A(d,g){for(let v in d)g.call(void 0,d[v],v,d)}function E(d){let g={};for(let v in d)g[v]=d[v];return g}let T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(d,g){let v,w;for(let k=1;k<arguments.length;k++){w=arguments[k];for(v in w)d[v]=w[v];for(let L=0;L<T.length;L++)v=T[L],Object.prototype.hasOwnProperty.call(w,v)&&(d[v]=w[v])}}function N(d){var g=1;d=d.split(":");let v=[];for(;0<g&&d.length;)v.push(d.shift()),g--;return d.length&&v.push(d.join(":")),v}function M(d){a.setTimeout(()=>{throw d},0)}function D(){var d=Lm;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class xt{constructor(){this.h=this.g=null}add(g,v){let w=jn.get();w.set(g,v),this.h?this.h.next=w:this.g=w,this.h=w}}var jn=new C(()=>new wu,d=>d.reset());class wu{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let hi,pi=!1,Lm=new xt,wC=()=>{let d=a.Promise.resolve(void 0);hi=()=>{d.then(vk)}};var vk=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(v){M(v)}var g=jn;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}pi=!1};function oo(){this.s=this.s,this.C=this.C}oo.prototype.s=!1,oo.prototype.ma=function(){this.s||(this.s=!0,this.N())},oo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pn(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}pn.prototype.h=function(){this.defaultPrevented=!0};var yk=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return d}();function Eu(d,g){if(pn.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,w=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(V){e:{try{O(g.nodeName);var k=!0;break e}catch{}k=!1}k||(g=null)}}else v=="mouseover"?g=d.fromElement:v=="mouseout"&&(g=d.toElement);this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:_k[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Eu.aa.h.call(this)}}m(Eu,pn);var _k={2:"touch",3:"pen",4:"mouse"};Eu.prototype.h=function(){Eu.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Iu="closure_listenable_"+(1e6*Math.random()|0),wk=0;function Ek(d,g,v,w,k){this.listener=d,this.proxy=null,this.src=g,this.type=v,this.capture=!!w,this.ha=k,this.key=++wk,this.da=this.fa=!1}function ef(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function tf(d){this.src=d,this.g={},this.h=0}tf.prototype.add=function(d,g,v,w,k){var L=d.toString();d=this.g[L],d||(d=this.g[L]=[],this.h++);var Z=Bm(d,g,w,k);return-1<Z?(g=d[Z],v||(g.fa=!1)):(g=new Ek(g,this.src,L,!!w,k),g.fa=v,d.push(g)),g};function Vm(d,g){var v=g.type;if(v in d.g){var w=d.g[v],k=Array.prototype.indexOf.call(w,g,void 0),L;(L=0<=k)&&Array.prototype.splice.call(w,k,1),L&&(ef(g),d.g[v].length==0&&(delete d.g[v],d.h--))}}function Bm(d,g,v,w){for(var k=0;k<d.length;++k){var L=d[k];if(!L.da&&L.listener==g&&L.capture==!!v&&L.ha==w)return k}return-1}var Um="closure_lm_"+(1e6*Math.random()|0),jm={};function EC(d,g,v,w,k){if(w&&w.once)return CC(d,g,v,w,k);if(Array.isArray(g)){for(var L=0;L<g.length;L++)EC(d,g[L],v,w,k);return null}return v=zm(v),d&&d[Iu]?d.K(g,v,u(w)?!!w.capture:!!w,k):IC(d,g,v,!1,w,k)}function IC(d,g,v,w,k,L){if(!g)throw Error("Invalid event type");var Z=u(k)?!!k.capture:!!k,ct=$m(d);if(ct||(d[Um]=ct=new tf(d)),v=ct.add(g,v,w,Z,L),v.proxy)return v;if(w=Ik(),v.proxy=w,w.src=d,w.listener=v,d.addEventListener)yk||(k=Z),k===void 0&&(k=!1),d.addEventListener(g.toString(),w,k);else if(d.attachEvent)d.attachEvent(AC(g.toString()),w);else if(d.addListener&&d.removeListener)d.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ik(){function d(v){return g.call(d.src,d.listener,v)}let g=Ck;return d}function CC(d,g,v,w,k){if(Array.isArray(g)){for(var L=0;L<g.length;L++)CC(d,g[L],v,w,k);return null}return v=zm(v),d&&d[Iu]?d.L(g,v,u(w)?!!w.capture:!!w,k):IC(d,g,v,!0,w,k)}function xC(d,g,v,w,k){if(Array.isArray(g))for(var L=0;L<g.length;L++)xC(d,g[L],v,w,k);else w=u(w)?!!w.capture:!!w,v=zm(v),d&&d[Iu]?(d=d.i,g=String(g).toString(),g in d.g&&(L=d.g[g],v=Bm(L,v,w,k),-1<v&&(ef(L[v]),Array.prototype.splice.call(L,v,1),L.length==0&&(delete d.g[g],d.h--)))):d&&(d=$m(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Bm(g,v,w,k)),(v=-1<d?g[d]:null)&&Hm(v))}function Hm(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Iu])Vm(g.i,d);else{var v=d.type,w=d.proxy;g.removeEventListener?g.removeEventListener(v,w,d.capture):g.detachEvent?g.detachEvent(AC(v),w):g.addListener&&g.removeListener&&g.removeListener(w),(v=$m(g))?(Vm(v,d),v.h==0&&(v.src=null,g[Um]=null)):ef(d)}}}function AC(d){return d in jm?jm[d]:jm[d]="on"+d}function Ck(d,g){if(d.da)d=!0;else{g=new Eu(g,this);var v=d.listener,w=d.ha||d.src;d.fa&&Hm(d),d=v.call(w,g)}return d}function $m(d){return d=d[Um],d instanceof tf?d:null}var Gm="__closure_events_fn_"+(1e9*Math.random()>>>0);function zm(d){return typeof d=="function"?d:(d[Gm]||(d[Gm]=function(g){return d.handleEvent(g)}),d[Gm])}function gn(){oo.call(this),this.i=new tf(this),this.M=this,this.F=null}m(gn,oo),gn.prototype[Iu]=!0,gn.prototype.removeEventListener=function(d,g,v,w){xC(this,d,g,v,w)};function Rn(d,g){var v,w=d.F;if(w)for(v=[];w;w=w.F)v.push(w);if(d=d.M,w=g.type||g,typeof g=="string")g=new pn(g,d);else if(g instanceof pn)g.target=g.target||d;else{var k=g;g=new pn(w,d),S(g,k)}if(k=!0,v)for(var L=v.length-1;0<=L;L--){var Z=g.g=v[L];k=nf(Z,w,!0,g)&&k}if(Z=g.g=d,k=nf(Z,w,!0,g)&&k,k=nf(Z,w,!1,g)&&k,v)for(L=0;L<v.length;L++)Z=g.g=v[L],k=nf(Z,w,!1,g)&&k}gn.prototype.N=function(){if(gn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var v=d.g[g],w=0;w<v.length;w++)ef(v[w]);delete d.g[g],d.h--}}this.F=null},gn.prototype.K=function(d,g,v,w){return this.i.add(String(d),g,!1,v,w)},gn.prototype.L=function(d,g,v,w){return this.i.add(String(d),g,!0,v,w)};function nf(d,g,v,w){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var k=!0,L=0;L<g.length;++L){var Z=g[L];if(Z&&!Z.da&&Z.capture==v){var ct=Z.listener,sn=Z.ha||Z.src;Z.fa&&Vm(d.i,Z),k=ct.call(sn,w)!==!1&&k}}return k&&!w.defaultPrevented}function TC(d,g,v){if(typeof d=="function")v&&(d=h(d,v));else if(d&&typeof d.handleEvent=="function")d=h(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function DC(d){d.g=TC(()=>{d.g=null,d.i&&(d.i=!1,DC(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class xk extends oo{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:DC(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cu(d){oo.call(this),this.h=d,this.g={}}m(Cu,oo);var SC=[];function bC(d){U(d.g,function(g,v){this.g.hasOwnProperty(v)&&Hm(g)},d),d.g={}}Cu.prototype.N=function(){Cu.aa.N.call(this),bC(this)},Cu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wm=a.JSON.stringify,Ak=a.JSON.parse,Tk=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function qm(){}qm.prototype.h=null;function RC(d){return d.h||(d.h=d.i())}function NC(){}var xu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Km(){pn.call(this,"d")}m(Km,pn);function Xm(){pn.call(this,"c")}m(Xm,pn);var es={},MC=null;function rf(){return MC=MC||new gn}es.La="serverreachability";function OC(d){pn.call(this,es.La,d)}m(OC,pn);function Au(d){let g=rf();Rn(g,new OC(g))}es.STAT_EVENT="statevent";function PC(d,g){pn.call(this,es.STAT_EVENT,d),this.stat=g}m(PC,pn);function Nn(d){let g=rf();Rn(g,new PC(g,d))}es.Ma="timingevent";function kC(d,g){pn.call(this,es.Ma,d),this.size=g}m(kC,pn);function Tu(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function Du(){this.g=!0}Du.prototype.xa=function(){this.g=!1};function Dk(d,g,v,w,k,L){d.info(function(){if(d.g)if(L)for(var Z="",ct=L.split("&"),sn=0;sn<ct.length;sn++){var ze=ct[sn].split("=");if(1<ze.length){var mn=ze[0];ze=ze[1];var vn=mn.split("_");Z=2<=vn.length&&vn[1]=="type"?Z+(mn+"="+ze+"&"):Z+(mn+"=redacted&")}}else Z=null;else Z=L;return"XMLHTTP REQ ("+w+") [attempt "+k+"]: "+g+`
`+v+`
`+Z})}function Sk(d,g,v,w,k,L,Z){d.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+k+"]: "+g+`
`+v+`
`+L+" "+Z})}function aa(d,g,v,w){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+Rk(d,v)+(w?" "+w:"")})}function bk(d,g){d.info(function(){return"TIMEOUT: "+g})}Du.prototype.info=function(){};function Rk(d,g){if(!d.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var w=v[d];if(!(2>w.length)){var k=w[1];if(Array.isArray(k)&&!(1>k.length)){var L=k[0];if(L!="noop"&&L!="stop"&&L!="close")for(var Z=1;Z<k.length;Z++)k[Z]=""}}}}return Wm(v)}catch{return g}}var of={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},FC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ym;function sf(){}m(sf,qm),sf.prototype.g=function(){return new XMLHttpRequest},sf.prototype.i=function(){return{}},Ym=new sf;function so(d,g,v,w){this.j=d,this.i=g,this.l=v,this.R=w||1,this.U=new Cu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new LC}function LC(){this.i=null,this.g="",this.h=!1}var VC={},Zm={};function Qm(d,g,v){d.L=1,d.v=lf(gi(g)),d.m=v,d.P=!0,BC(d,null)}function BC(d,g){d.F=Date.now(),af(d),d.A=gi(d.v);var v=d.A,w=d.R;Array.isArray(w)||(w=[String(w)]),JC(v.i,"t",w),d.C=0,v=d.j.J,d.h=new LC,d.g=vx(d.j,v?g:null,!d.m),0<d.O&&(d.M=new xk(h(d.Y,d,d.g),d.O)),g=d.U,v=d.g,w=d.ca;var k="readystatechange";Array.isArray(k)||(k&&(SC[0]=k.toString()),k=SC);for(var L=0;L<k.length;L++){var Z=EC(v,k[L],w||g.handleEvent,!1,g.h||g);if(!Z)break;g.g[Z.key]=Z}g=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Au(),Dk(d.i,d.u,d.A,d.l,d.R,d.m)}so.prototype.ca=function(d){d=d.target;let g=this.M;g&&mi(d)==3?g.j():this.Y(d)},so.prototype.Y=function(d){try{if(d==this.g)e:{let vn=mi(this.g);var g=this.g.Ba();let la=this.g.Z();if(!(3>vn)&&(vn!=3||this.g&&(this.h.h||this.g.oa()||sx(this.g)))){this.J||vn!=4||g==7||(g==8||0>=la?Au(3):Au(2)),Jm(this);var v=this.g.Z();this.X=v;t:if(UC(this)){var w=sx(this.g);d="";var k=w.length,L=mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ts(this),Su(this);var Z="";break t}this.h.i=new a.TextDecoder}for(g=0;g<k;g++)this.h.h=!0,d+=this.h.i.decode(w[g],{stream:!(L&&g==k-1)});w.length=0,this.h.g+=d,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=v==200,Sk(this.i,this.u,this.A,this.l,this.R,vn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,sn=this.g;if((ct=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(ct)){var ze=ct;break t}}ze=null}if(v=ze)aa(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,e0(this,v);else{this.o=!1,this.s=3,Nn(12),ts(this),Su(this);break e}}if(this.P){v=!0;let Er;for(;!this.J&&this.C<Z.length;)if(Er=Nk(this,Z),Er==Zm){vn==4&&(this.s=4,Nn(14),v=!1),aa(this.i,this.l,null,"[Incomplete Response]");break}else if(Er==VC){this.s=4,Nn(15),aa(this.i,this.l,Z,"[Invalid Chunk]"),v=!1;break}else aa(this.i,this.l,Er,null),e0(this,Er);if(UC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vn!=4||Z.length!=0||this.h.h||(this.s=1,Nn(16),v=!1),this.o=this.o&&v,!v)aa(this.i,this.l,Z,"[Invalid Chunked Response]"),ts(this),Su(this);else if(0<Z.length&&!this.W){this.W=!0;var mn=this.j;mn.g==this&&mn.ba&&!mn.M&&(mn.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),s0(mn),mn.M=!0,Nn(11))}}else aa(this.i,this.l,Z,null),e0(this,Z);vn==4&&ts(this),this.o&&!this.J&&(vn==4?hx(this.j,this):(this.o=!1,af(this)))}else Kk(this.g),v==400&&0<Z.indexOf("Unknown SID")?(this.s=3,Nn(12)):(this.s=0,Nn(13)),ts(this),Su(this)}}}catch{}finally{}};function UC(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Nk(d,g){var v=d.C,w=g.indexOf(`
`,v);return w==-1?Zm:(v=Number(g.substring(v,w)),isNaN(v)?VC:(w+=1,w+v>g.length?Zm:(g=g.slice(w,w+v),d.C=w+v,g)))}so.prototype.cancel=function(){this.J=!0,ts(this)};function af(d){d.S=Date.now()+d.I,jC(d,d.I)}function jC(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Tu(h(d.ba,d),g)}function Jm(d){d.B&&(a.clearTimeout(d.B),d.B=null)}so.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(bk(this.i,this.A),this.L!=2&&(Au(),Nn(17)),ts(this),this.s=2,Su(this)):jC(this,this.S-d)};function Su(d){d.j.G==0||d.J||hx(d.j,d)}function ts(d){Jm(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,bC(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function e0(d,g){try{var v=d.j;if(v.G!=0&&(v.g==d||t0(v.h,d))){if(!d.K&&t0(v.h,d)&&v.G==3){try{var w=v.Da.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var k=w;if(k[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)gf(v),hf(v);else break e;o0(v),Nn(18)}}else v.za=k[1],0<v.za-v.T&&37500>k[2]&&v.F&&v.v==0&&!v.C&&(v.C=Tu(h(v.Za,v),6e3));if(1>=GC(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else rs(v,11)}else if((d.K||v.g==d)&&gf(v),!x(g))for(k=v.Da.g.parse(g),g=0;g<k.length;g++){let ze=k[g];if(v.T=ze[0],ze=ze[1],v.G==2)if(ze[0]=="c"){v.K=ze[1],v.ia=ze[2];let mn=ze[3];mn!=null&&(v.la=mn,v.j.info("VER="+v.la));let vn=ze[4];vn!=null&&(v.Aa=vn,v.j.info("SVER="+v.Aa));let la=ze[5];la!=null&&typeof la=="number"&&0<la&&(w=1.5*la,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;let Er=d.g;if(Er){let vf=Er.g?Er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vf){var L=w.h;L.g||vf.indexOf("spdy")==-1&&vf.indexOf("quic")==-1&&vf.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(n0(L,L.h),L.h=null))}if(w.D){let a0=Er.g?Er.g.getResponseHeader("X-HTTP-Session-Id"):null;a0&&(w.ya=a0,mt(w.I,w.D,a0))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var Z=d;if(w.qa=mx(w,w.J?w.ia:null,w.W),Z.K){zC(w.h,Z);var ct=Z,sn=w.L;sn&&(ct.I=sn),ct.B&&(Jm(ct),af(ct)),w.g=Z}else dx(w);0<v.i.length&&pf(v)}else ze[0]!="stop"&&ze[0]!="close"||rs(v,7);else v.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?rs(v,7):i0(v):ze[0]!="noop"&&v.l&&v.l.ta(ze),v.v=0)}}Au(4)}catch{}}var Mk=class{constructor(d,g){this.g=d,this.map=g}};function HC(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $C(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function GC(d){return d.h?1:d.g?d.g.size:0}function t0(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function n0(d,g){d.g?d.g.add(g):d.h=g}function zC(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}HC.prototype.cancel=function(){if(this.i=WC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function WC(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let v of d.g.values())g=g.concat(v.D);return g}return y(d.i)}function Ok(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],v=d.length,w=0;w<v;w++)g.push(d[w]);return g}g=[],v=0;for(w in d)g[v++]=d[w];return g}function Pk(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var v=0;v<d;v++)g.push(v);return g}g=[],v=0;for(let w in d)g[v++]=w;return g}}}function qC(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var v=Pk(d),w=Ok(d),k=w.length,L=0;L<k;L++)g.call(void 0,w[L],v&&v[L],d)}var KC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kk(d,g){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var w=d[v].indexOf("="),k=null;if(0<=w){var L=d[v].substring(0,w);k=d[v].substring(w+1)}else L=d[v];g(L,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function ns(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ns){this.h=d.h,cf(this,d.j),this.o=d.o,this.g=d.g,uf(this,d.s),this.l=d.l;var g=d.i,v=new Nu;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),XC(this,v),this.m=d.m}else d&&(g=String(d).match(KC))?(this.h=!1,cf(this,g[1]||"",!0),this.o=bu(g[2]||""),this.g=bu(g[3]||"",!0),uf(this,g[4]),this.l=bu(g[5]||"",!0),XC(this,g[6]||"",!0),this.m=bu(g[7]||"")):(this.h=!1,this.i=new Nu(null,this.h))}ns.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Ru(g,YC,!0),":");var v=this.g;return(v||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Ru(g,YC,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(Ru(v,v.charAt(0)=="/"?Vk:Lk,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",Ru(v,Uk)),d.join("")};function gi(d){return new ns(d)}function cf(d,g,v){d.j=v?bu(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function uf(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function XC(d,g,v){g instanceof Nu?(d.i=g,jk(d.i,d.h)):(v||(g=Ru(g,Bk)),d.i=new Nu(g,d.h))}function mt(d,g,v){d.i.set(g,v)}function lf(d){return mt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function bu(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ru(d,g,v){return typeof d=="string"?(d=encodeURI(d).replace(g,Fk),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Fk(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var YC=/[#\/\?@]/g,Lk=/[#\?:]/g,Vk=/[#\?]/g,Bk=/[#\?@]/g,Uk=/#/g;function Nu(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function ao(d){d.g||(d.g=new Map,d.h=0,d.i&&kk(d.i,function(g,v){d.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=Nu.prototype,n.add=function(d,g){ao(this),this.i=null,d=ca(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(g),this.h+=1,this};function ZC(d,g){ao(d),g=ca(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function QC(d,g){return ao(d),g=ca(d,g),d.g.has(g)}n.forEach=function(d,g){ao(this),this.g.forEach(function(v,w){v.forEach(function(k){d.call(g,k,w,this)},this)},this)},n.na=function(){ao(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let w=0;w<g.length;w++){let k=d[w];for(let L=0;L<k.length;L++)v.push(g[w])}return v},n.V=function(d){ao(this);let g=[];if(typeof d=="string")QC(this,d)&&(g=g.concat(this.g.get(ca(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)g=g.concat(d[v])}return g},n.set=function(d,g){return ao(this),this.i=null,d=ca(this,d),QC(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function JC(d,g,v){ZC(d,g),0<v.length&&(d.i=null,d.g.set(ca(d,g),y(v)),d.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var w=g[v];let L=encodeURIComponent(String(w)),Z=this.V(w);for(w=0;w<Z.length;w++){var k=L;Z[w]!==""&&(k+="="+encodeURIComponent(String(Z[w]))),d.push(k)}}return this.i=d.join("&")};function ca(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function jk(d,g){g&&!d.j&&(ao(d),d.i=null,d.g.forEach(function(v,w){var k=w.toLowerCase();w!=k&&(ZC(this,w),JC(this,k,v))},d)),d.j=g}function Hk(d,g){let v=new Du;if(a.Image){let w=new Image;w.onload=p(co,v,"TestLoadImage: loaded",!0,g,w),w.onerror=p(co,v,"TestLoadImage: error",!1,g,w),w.onabort=p(co,v,"TestLoadImage: abort",!1,g,w),w.ontimeout=p(co,v,"TestLoadImage: timeout",!1,g,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=d}else g(!1)}function $k(d,g){let v=new Du,w=new AbortController,k=setTimeout(()=>{w.abort(),co(v,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:w.signal}).then(L=>{clearTimeout(k),L.ok?co(v,"TestPingServer: ok",!0,g):co(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(k),co(v,"TestPingServer: error",!1,g)})}function co(d,g,v,w,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),w(v)}catch{}}function Gk(){this.g=new Tk}function zk(d,g,v){let w=v||"";try{qC(d,function(k,L){let Z=k;u(k)&&(Z=Wm(k)),g.push(w+L+"="+encodeURIComponent(Z))})}catch(k){throw g.push(w+"type="+encodeURIComponent("_badmap")),k}}function Mu(d){this.l=d.Ub||null,this.j=d.eb||!1}m(Mu,qm),Mu.prototype.g=function(){return new df(this.l,this.j)},Mu.prototype.i=function(d){return function(){return d}}({});function df(d,g){gn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(df,gn),n=df.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,Pu(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ou(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Pu(this)),this.g&&(this.readyState=3,Pu(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ex(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function ex(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Ou(this):Pu(this),this.readyState==3&&ex(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Ou(this))},n.Qa=function(d){this.g&&(this.response=d,Ou(this))},n.ga=function(){this.g&&Ou(this)};function Ou(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Pu(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=g.next();return d.join(`\r
`)};function Pu(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(df.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function tx(d){let g="";return U(d,function(v,w){g+=w,g+=":",g+=v,g+=`\r
`}),g}function r0(d,g,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=tx(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):mt(d,g,v))}function At(d){gn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(At,gn);var Wk=/^https?$/i,qk=["POST","PUT"];n=At.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ym.g(),this.v=this.o?RC(this.o):RC(Ym),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(L){nx(this,L);return}if(d=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var k in w)v.set(k,w[k]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let L of w.keys())v.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(L=>L.toLowerCase()=="content-type"),k=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qk,g,void 0))||w||k||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,Z]of v)this.g.setRequestHeader(L,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ox(this),this.u=!0,this.g.send(d),this.u=!1}catch(L){nx(this,L)}};function nx(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,rx(d),ff(d)}function rx(d){d.A||(d.A=!0,Rn(d,"complete"),Rn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Rn(this,"complete"),Rn(this,"abort"),ff(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ff(this,!0)),At.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ix(this):this.bb())},n.bb=function(){ix(this)};function ix(d){if(d.h&&typeof s<"u"&&(!d.v[1]||mi(d)!=4||d.Z()!=2)){if(d.u&&mi(d)==4)TC(d.Ea,0,d);else if(Rn(d,"readystatechange"),mi(d)==4){d.h=!1;try{let Z=d.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var w;if(w=Z===0){var k=String(d.D).match(KC)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),w=!Wk.test(k?k.toLowerCase():"")}v=w}if(v)Rn(d,"complete"),Rn(d,"success");else{d.m=6;try{var L=2<mi(d)?d.g.statusText:""}catch{L=""}d.l=L+" ["+d.Z()+"]",rx(d)}}finally{ff(d)}}}}function ff(d,g){if(d.g){ox(d);let v=d.g,w=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||Rn(d,"ready");try{v.onreadystatechange=w}catch{}}}function ox(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function mi(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<mi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Ak(g)}};function sx(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Kk(d){let g={};d=(d.g&&2<=mi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<d.length;w++){if(x(d[w]))continue;var v=N(d[w]);let k=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let L=g[k]||[];g[k]=L,L.push(v)}A(g,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ku(d,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||g}function ax(d){this.Aa=0,this.i=[],this.j=new Du,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ku("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ku("baseRetryDelayMs",5e3,d),this.cb=ku("retryDelaySeedMs",1e4,d),this.Wa=ku("forwardChannelMaxRetries",2,d),this.wa=ku("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new HC(d&&d.concurrentRequestLimit),this.Da=new Gk,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ax.prototype,n.la=8,n.G=1,n.connect=function(d,g,v,w){Nn(0),this.W=d,this.H=g||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=mx(this,null,this.W),pf(this)};function i0(d){if(cx(d),d.G==3){var g=d.U++,v=gi(d.I);if(mt(v,"SID",d.K),mt(v,"RID",g),mt(v,"TYPE","terminate"),Fu(d,v),g=new so(d,d.j,g),g.L=2,g.v=lf(gi(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=vx(g.j,null),g.g.ea(g.v)),g.F=Date.now(),af(g)}gx(d)}function hf(d){d.g&&(s0(d),d.g.cancel(),d.g=null)}function cx(d){hf(d),d.u&&(a.clearTimeout(d.u),d.u=null),gf(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function pf(d){if(!$C(d.h)&&!d.s){d.s=!0;var g=d.Ga;hi||wC(),pi||(hi(),pi=!0),Lm.add(g,d),d.B=0}}function Xk(d,g){return GC(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Tu(h(d.Ga,d,g),px(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let k=new so(this,this.j,d),L=this.o;if(this.S&&(L?(L=E(L),S(L,this.S)):L=this.S),this.m!==null||this.O||(k.H=L,L=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=lx(this,k,g),v=gi(this.I),mt(v,"RID",d),mt(v,"CVER",22),this.D&&mt(v,"X-HTTP-Session-Id",this.D),Fu(this,v),L&&(this.O?g="headers="+encodeURIComponent(String(tx(L)))+"&"+g:this.m&&r0(v,this.m,L)),n0(this.h,k),this.Ua&&mt(v,"TYPE","init"),this.P?(mt(v,"$req",g),mt(v,"SID","null"),k.T=!0,Qm(k,v,null)):Qm(k,v,g),this.G=2}}else this.G==3&&(d?ux(this,d):this.i.length==0||$C(this.h)||ux(this))};function ux(d,g){var v;g?v=g.l:v=d.U++;let w=gi(d.I);mt(w,"SID",d.K),mt(w,"RID",v),mt(w,"AID",d.T),Fu(d,w),d.m&&d.o&&r0(w,d.m,d.o),v=new so(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),g&&(d.i=g.D.concat(d.i)),g=lx(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),n0(d.h,v),Qm(v,w,g)}function Fu(d,g){d.H&&U(d.H,function(v,w){mt(g,w,v)}),d.l&&qC({},function(v,w){mt(g,w,v)})}function lx(d,g,v){v=Math.min(d.i.length,v);var w=d.l?h(d.l.Na,d.l,d):null;e:{var k=d.i;let L=-1;for(;;){let Z=["count="+v];L==-1?0<v?(L=k[0].g,Z.push("ofs="+L)):L=0:Z.push("ofs="+L);let ct=!0;for(let sn=0;sn<v;sn++){let ze=k[sn].g,mn=k[sn].map;if(ze-=L,0>ze)L=Math.max(0,k[sn].g-100),ct=!1;else try{zk(mn,Z,"req"+ze+"_")}catch{w&&w(mn)}}if(ct){w=Z.join("&");break e}}}return d=d.i.splice(0,v),g.D=d,w}function dx(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;hi||wC(),pi||(hi(),pi=!0),Lm.add(g,d),d.v=0}}function o0(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Tu(h(d.Fa,d),px(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,fx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Tu(h(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nn(10),hf(this),fx(this))};function s0(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function fx(d){d.g=new so(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=gi(d.qa);mt(g,"RID","rpc"),mt(g,"SID",d.K),mt(g,"AID",d.T),mt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&mt(g,"TO",d.ja),mt(g,"TYPE","xmlhttp"),Fu(d,g),d.m&&d.o&&r0(g,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=lf(gi(g)),v.m=null,v.P=!0,BC(v,d)}n.Za=function(){this.C!=null&&(this.C=null,hf(this),o0(this),Nn(19))};function gf(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function hx(d,g){var v=null;if(d.g==g){gf(d),s0(d),d.g=null;var w=2}else if(t0(d.h,g))v=g.D,zC(d.h,g),w=1;else return;if(d.G!=0){if(g.o)if(w==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var k=d.B;w=rf(),Rn(w,new kC(w,v)),pf(d)}else dx(d);else if(k=g.s,k==3||k==0&&0<g.X||!(w==1&&Xk(d,g)||w==2&&o0(d)))switch(v&&0<v.length&&(g=d.h,g.i=g.i.concat(v)),k){case 1:rs(d,5);break;case 4:rs(d,10);break;case 3:rs(d,6);break;default:rs(d,2)}}}function px(d,g){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*g}function rs(d,g){if(d.j.info("Error code "+g),g==2){var v=h(d.fb,d),w=d.Xa;let k=!w;w=new ns(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cf(w,"https"),lf(w),k?Hk(w.toString(),v):$k(w.toString(),v)}else Nn(2);d.G=0,d.l&&d.l.sa(g),gx(d),cx(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Nn(2)):(this.j.info("Failed to ping google.com"),Nn(1))};function gx(d){if(d.G=0,d.ka=[],d.l){let g=WC(d.h);(g.length!=0||d.i.length!=0)&&(_(d.ka,g),_(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function mx(d,g,v){var w=v instanceof ns?gi(v):new ns(v);if(w.g!="")g&&(w.g=g+"."+w.g),uf(w,w.s);else{var k=a.location;w=k.protocol,g=g?g+"."+k.hostname:k.hostname,k=+k.port;var L=new ns(null);w&&cf(L,w),g&&(L.g=g),k&&uf(L,k),v&&(L.l=v),w=L}return v=d.D,g=d.ya,v&&g&&mt(w,v,g),mt(w,"VER",d.la),Fu(d,w),w}function vx(d,g,v){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new At(new Mu({eb:v})):new At(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function yx(){}n=yx.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function mf(){}mf.prototype.g=function(d,g){return new Yn(d,g)};function Yn(d,g){gn.call(this),this.g=new ax(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!x(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new ua(this)}m(Yn,gn),Yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){i0(this.g)},Yn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=Wm(d),d=v);g.i.push(new Mk(g.Ya++,d)),g.G==3&&pf(g)},Yn.prototype.N=function(){this.g.l=null,delete this.j,i0(this.g),delete this.g,Yn.aa.N.call(this)};function _x(d){Km.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let v in g){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}m(_x,Km);function wx(){Xm.call(this),this.status=1}m(wx,Xm);function ua(d){this.g=d}m(ua,yx),ua.prototype.ua=function(){Rn(this.g,"a")},ua.prototype.ta=function(d){Rn(this.g,new _x(d))},ua.prototype.sa=function(d){Rn(this.g,new wx)},ua.prototype.ra=function(){Rn(this.g,"b")},mf.prototype.createWebChannel=mf.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,iE=Qi.createWebChannelTransport=function(){return new mf},rE=Qi.getStatEventTarget=function(){return rf()},nE=Qi.Event=es,Lg=Qi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},of.NO_ERROR=0,of.TIMEOUT=8,of.HTTP_ERROR=6,Sd=Qi.ErrorCode=of,FC.COMPLETE="complete",tE=Qi.EventType=FC,NC.EventType=xu,xu.OPEN="a",xu.CLOSE="b",xu.ERROR="c",xu.MESSAGE="d",gn.prototype.listen=gn.prototype.K,Xc=Qi.WebChannel=NC,FK=Qi.FetchXmlHttpFactory=Mu,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,eE=Qi.XhrIo=At}).apply(typeof Fg<"u"?Fg:typeof self<"u"?self:typeof window<"u"?window:{});var XM="@firebase/firestore",YM="4.7.9";var rn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");var gu="11.4.0";var Qs=new ri("@firebase/firestore");function Yc(){return Qs.logLevel}function ee(n,...e){if(Qs.logLevel<=Pe.DEBUG){let t=e.map(qI);Qs.debug(`Firestore (${gu}): ${n}`,...t)}}function Ji(n,...e){if(Qs.logLevel<=Pe.ERROR){let t=e.map(qI);Qs.error(`Firestore (${gu}): ${n}`,...t)}}function nu(n,...e){if(Qs.logLevel<=Pe.WARN){let t=e.map(qI);Qs.warn(`Firestore (${gu}): ${n}`,...t)}}function qI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function me(n="Unexpected state"){let e=`FIRESTORE (${gu}) INTERNAL ASSERTION FAILED: `+n;throw Ji(e),new Error(e)}function et(n,e){n||me()}function Ee(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ce=class extends or{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ai=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Gg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},uE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rn.UNAUTHENTICATED))}shutdown(){}},lE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},dE=class{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ai,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ai)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string"),new Gg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new rn(e)}},fE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},hE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new fE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},zg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},pE=class{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Un(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){et(this.o===void 0);let r=o=>{o.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,ee("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new zg(this.V));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(et(typeof t.token=="string"),this.R=t.token,new zg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function LK(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Wg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=LK(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Be(n,e){return n<e?-1:n>e?1:0}function ru(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ZM=-62135596800,QM=1e6,hn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*QM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ZM)throw new ce(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QM}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-ZM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var xe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new hn(0,0))}static max(){return new n(new hn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var JM="__name__",qg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(),r===void 0?r=e.length-t:r>e.length-t&&me(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zi.fromString(e.substring(4,e.length-2))}},jt=class n extends qg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ce(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},VK=/^[_a-zA-Z][_a-zA-Z0-9]*$/,sr=class n extends qg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return VK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===JM}static keyField(){return new n([JM])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ce(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ce(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ce(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ce(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var pe=class n{constructor(e){this.path=e}static fromPath(e){return new n(jt.fromString(e))}static fromName(e){return new n(jt.fromString(e).popFirst(5))}static empty(){return new n(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new jt(e.slice()))}};var Pd=-1,gE=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};gE.UNKNOWN_ID=-1;function BK(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new hn(t+1,0):new hn(t,r));return new Js(i,pe.empty(),e)}function UK(n){return new Js(n.readTime,n.key,Pd)}var Js=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(xe.min(),pe.empty(),Pd)}static max(){return new n(xe.max(),pe.empty(),Pd)}};function jK(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}var HK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",mE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function mu(n){return b(this,null,function*(){if(n.code!==q.FAILED_PRECONDITION||n.message!==HK)throw n;ee("LocalStore","Unexpectedly lost primary lease")})}var G=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function $K(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vu(n){return n.name==="IndexedDbTransactionError"}var KI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this._e&&this._e(t),t}}n.ae=-1;return n})(),XI=-1;function Cm(n){return n==null}function kd(n){return n===0&&1/n==-1/0}function GK(n){return typeof n=="number"&&Number.isInteger(n)&&!kd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var kO="";function zK(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=eO(e)),e=WK(n.get(t),e);return eO(e)}function WK(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case kO:t+="";break;default:t+=o}}return t}function eO(n){return n+kO+""}var qK="remoteDocuments",FO="owner";var LO="mutationQueues";var VO="mutations";var BO="documentMutations",KK="remoteDocumentsV14";var UO="remoteDocumentGlobal";var jO="targets";var HO="targetDocuments";var $O="targetGlobal",GO="collectionParents";var zO="clientMetadata";var WO="bundles";var qO="namedQueries";var XK="indexConfiguration";var YK="indexState";var ZK="indexEntries";var KO="documentOverlays";var QK="globals";var JK=[LO,VO,BO,qK,jO,FO,$O,HO,zO,UO,GO,WO,qO],CTe=[...JK,KO],eX=[LO,VO,BO,KK,jO,FO,$O,HO,zO,UO,GO,WO,qO,KO],tX=eX,nX=[...tX,XK,YK,ZK];var xTe=[...nX,QK];function tO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ia(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function XO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Nt=class n{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eu(this.root,e,this.comparator,!0)}},eu=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ci=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw me();let e=this.left.check();if(e!==this.right.check())throw me();return e+(this.isRed()?0:1)}};ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1;ci.EMPTY=new class{constructor(){this.size=0}get key(){throw me()}get value(){throw me()}get color(){throw me()}get left(){throw me()}get right(){throw me()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ci(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var on=class n{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Kg(this.data.getIterator())}getIteratorFrom(e){return new Kg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Kg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var si=class n{constructor(e){this.fields=e,e.sort(sr.comparator)}static empty(){return new n([])}unionWith(e){let t=new on(sr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ru(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Xg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var bn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Xg("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};bn.EMPTY_BYTE_STRING=new bn("");var rX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eo(n){if(et(!!n),typeof n=="string"){let e=0,t=rX.exec(n);if(et(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function to(n){return typeof n=="string"?bn.fromBase64String(n):bn.fromUint8Array(n)}var YO="server_timestamp",ZO="__type__",QO="__previous_value__",JO="__local_write_time__";function YI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ZO])===null||t===void 0?void 0:t.stringValue)===YO}function xm(n){let e=n.mapValue.fields[QO];return YI(e)?xm(e):e}function Fd(n){let e=eo(n.mapValue.fields[JO].timestampValue);return new hn(e.seconds,e.nanos)}var vE=class{constructor(e,t,r,i,o,s,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Yg="(default)",Zg=class n{constructor(e,t){this.projectId=e,this.database=t||Yg}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Yg}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ZI="__type__",eP="__max__",Vg={mapValue:{fields:{__type__:{stringValue:eP}}}},QI="__vector__",iu="value";function Zo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YI(n)?4:nP(n)?9007199254740991:tP(n)?10:11:me()}function di(n,e){if(n===e)return!0;let t=Zo(n);if(t!==Zo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fd(n).isEqual(Fd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=eo(i.timestampValue),a=eo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return to(i.bytesValue).isEqual(to(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return wt(i.geoPointValue.latitude)===wt(o.geoPointValue.latitude)&&wt(i.geoPointValue.longitude)===wt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return wt(i.integerValue)===wt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=wt(i.doubleValue),a=wt(o.doubleValue);return s===a?kd(s)===kd(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ru(n.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(tO(s)!==tO(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!di(s[c],a[c])))return!1;return!0}(n,e);default:return me()}}function Ld(n,e){return(n.values||[]).find(t=>di(t,e))!==void 0}function ou(n,e){if(n===e)return 0;let t=Zo(n),r=Zo(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=wt(o.integerValue||o.doubleValue),c=wt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return nO(n.timestampValue,e.timestampValue);case 4:return nO(Fd(n),Fd(e));case 5:return Be(n.stringValue,e.stringValue);case 6:return function(o,s){let a=to(o),c=to(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=Be(a[u],c[u]);if(l!==0)return l}return Be(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Be(wt(o.latitude),wt(s.latitude));return a!==0?a:Be(wt(o.longitude),wt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return rO(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,l;let f=o.fields||{},h=s.fields||{},p=(a=f[iu])===null||a===void 0?void 0:a.arrayValue,m=(c=h[iu])===null||c===void 0?void 0:c.arrayValue,y=Be(((u=p?.values)===null||u===void 0?void 0:u.length)||0,((l=m?.values)===null||l===void 0?void 0:l.length)||0);return y!==0?y:rO(p,m)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Vg.mapValue&&s===Vg.mapValue)return 0;if(o===Vg.mapValue)return 1;if(s===Vg.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let f=0;f<c.length&&f<l.length;++f){let h=Be(c[f],l[f]);if(h!==0)return h;let p=ou(a[c[f]],u[l[f]]);if(p!==0)return p}return Be(c.length,l.length)}(n.mapValue,e.mapValue);default:throw me()}}function nO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);let t=eo(n),r=eo(e),i=Be(t.seconds,r.seconds);return i!==0?i:Be(t.nanos,r.nanos)}function rO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ou(t[i],r[i]);if(o)return o}return Be(t.length,r.length)}function su(n){return yE(n)}function yE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=eo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return to(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=yE(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${yE(t.fields[s])}`;return i+"}"}(n.mapValue):me()}function jg(n){switch(Zo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=xm(n);return e?16+jg(e):16;case 5:return 2*n.stringValue.length;case 6:return to(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+jg(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ia(r.fields,(o,s)=>{i+=o.length+jg(s)}),i}(n.mapValue);default:throw me()}}function _E(n){return!!n&&"integerValue"in n}function JI(n){return!!n&&"arrayValue"in n}function iO(n){return!!n&&"nullValue"in n}function oO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hg(n){return!!n&&"mapValue"in n}function tP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ZI])===null||t===void 0?void 0:t.stringValue)===QI}function Rd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ia(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Rd(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===eP}var TTe={mapValue:{fields:{[ZI]:{stringValue:QI},[iu]:{arrayValue:{}}}}};var Lr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rd(t)}setAll(e){let t=sr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Rd(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Hg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ia(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Rd(this.value))}};function rP(n){let e=[];return ia(n.fields,(t,r)=>{let i=new sr([t]);if(Hg(r)){let o=rP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new si(e)}var Vr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,xe.min(),xe.min(),xe.min(),Lr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,xe.min(),xe.min(),Lr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,xe.min(),xe.min(),Lr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var au=class{constructor(e,t){this.position=e,this.inclusive=t}};function sO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=pe.comparator(pe.fromName(s.referenceValue),t.key):r=ou(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function aO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!di(n.position[t],e.position[t]))return!1;return!0}var cu=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function iX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Qg=class{},Yt=class n extends Qg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new EE(e,t,r):t==="array-contains"?new xE(e,r):t==="in"?new AE(e,r):t==="not-in"?new TE(e,r):t==="array-contains-any"?new DE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new IE(e,r):new CE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ou(t,this.value)):t!==null&&Zo(this.value)===Zo(t)&&this.matchesComparison(ou(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fi=class n extends Qg{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new n(e,t)}matches(e){return iP(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function iP(n){return n.op==="and"}function oP(n){return oX(n)&&iP(n)}function oX(n){for(let e of n.filters)if(e instanceof fi)return!1;return!0}function wE(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+su(n.value);if(oP(n))return n.filters.map(e=>wE(e)).join(",");{let e=n.filters.map(t=>wE(t)).join(",");return`${n.op}(${e})`}}function sP(n,e){return n instanceof Yt?function(r,i){return i instanceof Yt&&r.op===i.op&&r.field.isEqual(i.field)&&di(r.value,i.value)}(n,e):n instanceof fi?function(r,i){return i instanceof fi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&sP(s,i.filters[a]),!0):!1}(n,e):void me()}function aP(n){return n instanceof Yt?function(t){return`${t.field.canonicalString()} ${t.op} ${su(t.value)}`}(n):n instanceof fi?function(t){return t.op.toString()+" {"+t.getFilters().map(aP).join(" ,")+"}"}(n):"Filter"}var EE=class extends Yt{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){let t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}},IE=class extends Yt{constructor(e,t){super(e,"in",t),this.keys=cP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},CE=class extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=cP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function cP(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>pe.fromName(r.referenceValue))}var xE=class extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return JI(t)&&Ld(t.arrayValue,this.value)}},AE=class extends Yt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ld(this.value.arrayValue,t)}},TE=class extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Ld(this.value.arrayValue,t)}},DE=class extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!JI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ld(this.value.arrayValue,r))}};var SE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}};function cO(n,e=null,t=[],r=[],i=null,o=null,s=null){return new SE(n,e,t,r,i,o,s)}function eC(n){let e=Ee(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>wE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Cm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>su(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>su(r)).join(",")),e.le=t}return e.le}function tC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!iX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aO(n.startAt,e.startAt)&&aO(n.endAt,e.endAt)}function bE(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var uu=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function sX(n,e,t,r,i,o,s,a){return new uu(n,e,t,r,i,o,s,a)}function nC(n){return new uu(n)}function uO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aX(n){return n.collectionGroup!==null}function Nd(n){let e=Ee(n);if(e.he===null){e.he=[];let t=new Set;for(let o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new on(sr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new cu(o,r))}),t.has(sr.keyField().canonicalString())||e.he.push(new cu(sr.keyField(),r))}return e.he}function ui(n){let e=Ee(n);return e.Pe||(e.Pe=cX(e,Nd(n))),e.Pe}function cX(n,e){if(n.limitType==="F")return cO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new cu(i.field,o)});let t=n.endAt?new au(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new au(n.startAt.position,n.startAt.inclusive):null;return cO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function RE(n,e,t){return new uu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Am(n,e){return tC(ui(n),ui(e))&&n.limitType===e.limitType}function uP(n){return`${eC(ui(n))}|lt:${n.limitType}`}function Zc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>aP(i)).join(", ")}]`),Cm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>su(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>su(i)).join(",")),`Target(${r})`}(ui(n))}; limitType=${n.limitType})`}function Tm(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Nd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=sO(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,Nd(r),i)||r.endAt&&!function(s,a,c){let u=sO(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,Nd(r),i))}(n,e)}function uX(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lP(n){return(e,t)=>{let r=!1;for(let i of Nd(n)){let o=lX(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function lX(n,e,t){let r=n.field.isKeyField()?pe.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?ou(c,u):me()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return me()}}var no=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return XO(this.inner)}size(){return this.innerSize}};var dX=new Nt(pe.comparator);function ro(){return dX}var dP=new Nt(pe.comparator);function bd(...n){let e=dP;for(let t of n)e=e.insert(t.key,t);return e}function fP(n){let e=dP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xs(){return Md()}function hP(){return Md()}function Md(){return new no(n=>n.toString(),(n,e)=>n.isEqual(e))}var fX=new Nt(pe.comparator),hX=new on(pe.comparator);function Le(...n){let e=hX;for(let t of n)e=e.add(t);return e}var pX=new on(Be);function gX(){return pX}function rC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function pP(n){return{integerValue:""+n}}function mX(n,e){return GK(e)?pP(e):rC(n,e)}var lu=class{constructor(){this._=void 0}};function vX(n,e,t){return n instanceof du?function(i,o){let s={fields:{[ZO]:{stringValue:YO},[JO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&YI(o)&&(o=xm(o)),o&&(s.fields[QO]=o),{mapValue:s}}(t,e):n instanceof ea?mP(n,e):n instanceof ta?vP(n,e):function(i,o){let s=gP(i,o),a=lO(s)+lO(i.Ie);return _E(s)&&_E(i.Ie)?pP(a):rC(i.serializer,a)}(n,e)}function yX(n,e,t){return n instanceof ea?mP(n,e):n instanceof ta?vP(n,e):t}function gP(n,e){return n instanceof fu?function(r){return _E(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var du=class extends lu{},ea=class extends lu{constructor(e){super(),this.elements=e}};function mP(n,e){let t=yP(e);for(let r of n.elements)t.some(i=>di(i,r))||t.push(r);return{arrayValue:{values:t}}}var ta=class extends lu{constructor(e){super(),this.elements=e}};function vP(n,e){let t=yP(e);for(let r of n.elements)t=t.filter(i=>!di(i,r));return{arrayValue:{values:t}}}var fu=class extends lu{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function lO(n){return wt(n.integerValue||n.doubleValue)}function yP(n){return JI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _X(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ea&&i instanceof ea||r instanceof ta&&i instanceof ta?ru(r.elements,i.elements,di):r instanceof fu&&i instanceof fu?di(r.Ie,i.Ie):r instanceof du&&i instanceof du}(n.transform,e.transform)}var NE=class{constructor(e,t){this.version=e,this.transformResults=t}},Zs=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function $g(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var hu=class{};function _P(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Jg(n.key,Zs.none()):new na(n.key,n.data,Zs.none());{let t=n.data,r=Lr.empty(),i=new on(sr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new io(n.key,r,new si(i.toArray()),Zs.none())}}function wX(n,e,t){n instanceof na?function(i,o,s){let a=i.value.clone(),c=fO(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof io?function(i,o,s){if(!$g(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=fO(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(wP(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Od(n,e,t,r){return n instanceof na?function(o,s,a,c){if(!$g(o.precondition,s))return a;let u=o.value.clone(),l=hO(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof io?function(o,s,a,c){if(!$g(o.precondition,s))return a;let u=hO(o.fieldTransforms,c,s),l=s.data;return l.setAll(wP(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return $g(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function EX(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=gP(r.transform,i||null);o!=null&&(t===null&&(t=Lr.empty()),t.set(r.field,o))}return t||null}function dO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ru(r,i,(o,s)=>_X(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var na=class extends hu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},io=class extends hu{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function wP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function fO(n,e,t){let r=new Map;et(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,yX(s,a,t[i]))}return r}function hO(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,vX(o,s,e))}return r}var Jg=class extends hu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ME=class extends hu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var OE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&wX(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Od(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Od(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=hP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=_P(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&ru(this.mutations,e.mutations,(t,r)=>dO(t,r))&&ru(this.baseMutations,e.baseMutations,(t,r)=>dO(t,r))}},PE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){et(e.mutations.length===r.length);let i=function(){return fX}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var kE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var FE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Bt,He;function IX(n){switch(n){case q.OK:return me();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return me()}}function EP(n){if(n===void 0)return Ji("GRPC error has no .code"),q.UNKNOWN;switch(n){case Bt.OK:return q.OK;case Bt.CANCELLED:return q.CANCELLED;case Bt.UNKNOWN:return q.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return q.INTERNAL;case Bt.UNAVAILABLE:return q.UNAVAILABLE;case Bt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Bt.NOT_FOUND:return q.NOT_FOUND;case Bt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Bt.ABORTED:return q.ABORTED;case Bt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Bt.DATA_LOSS:return q.DATA_LOSS;default:return me()}}(He=Bt||(Bt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";var pO=null;function CX(){return new TextEncoder}var xX=new Zi([4294967295,4294967295],0);function gO(n){let e=CX().encode(n),t=new Jw;return t.update(e),new Uint8Array(t.digest())}function mO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Zi([t,r],0),new Zi([i,o],0)]}var LE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ys(`Invalid padding: ${t}`);if(r<0)throw new Ys(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ys(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ys(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Zi.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(Zi.fromNumber(r)));return i.compare(xX)===1&&(i=new Zi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;let t=gO(e),[r,i]=mO(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ee===0)return;let t=gO(e),[r,i]=mO(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ys=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var em=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Vd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(xe.min(),i,new Nt(Be),ro(),Le())}},Vd=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Le(),Le(),Le())}};var tu=class{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}},tm=class{constructor(e,t){this.targetId=e,this.ge=t}},nm=class{constructor(e,t,r=bn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},rm=class{constructor(){this.pe=0,this.ye=vO(),this.we=bn.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Le(),t=Le(),r=Le();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:me()}}),new Vd(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=vO()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,et(this.pe>=0)}Le(){this.Se=!0,this.be=!0}},VE=class{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ro(),this.$e=Bg(),this.Ke=Bg(),this.Ue=new Nt(Be)}We(e){for(let t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(let t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{let r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:me()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){let t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){let o=i.target;if(bE(o))if(r===0){let s=new pe(o.path);this.ze(t,s,Vr.newNoDocument(s,xe.min()))}else et(r===1);else{let s=this.et(t);if(s!==r){let a=this.tt(e),c=a?this.nt(a,e,s):1;if(c!==0){this.Ye(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,u)}pO?.rt(function(l,f,h,p,m){var y,_,C,x,R,O;let V={localCacheCount:l,existenceFilterCount:f.count,databaseId:h.database,projectId:h.projectId},U=f.unchangedNames;return U&&(V.bloomFilter={applied:m===0,hashCount:(y=U?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(x=(C=(_=U?.bits)===null||_===void 0?void 0:_.bitmap)===null||C===void 0?void 0:C.length)!==null&&x!==void 0?x:0,padding:(O=(R=U?.bits)===null||R===void 0?void 0:R.padding)!==null&&O!==void 0?O:0,mightContain:A=>{var E;return(E=p?.mightContain(A))!==null&&E!==void 0&&E}}),V}(s,e.ge,this.ke.it(),a,c))}}}}tt(e){let t=e.ge.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=to(r).toUint8Array()}catch(c){if(c instanceof Xg)return nu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new LE(s,i,o)}catch(c){return nu(c instanceof Ys?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){let r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,o,null),i++)}),i}ot(e){let t=new Map;this.qe.forEach((o,s)=>{let a=this.Xe(s);if(a){if(o.current&&bE(a.target)){let c=new pe(a.target.path);this._t(c).has(s)||this.ut(s,c)||this.ze(s,c,Vr.newNoDocument(c,e))}o.ve&&(t.set(s,o.Fe()),o.Me())}});let r=Le();this.Ke.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Xe(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));let i=new em(e,t,this.Ue,this.Qe,r);return this.Qe=ro(),this.$e=Bg(),this.Ke=Bg(),this.Ue=new Nt(Be),i}Ge(e,t){if(!this.Je(e))return;let r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;let i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){let t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new rm,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new on(Be),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new on(Be),this.$e=this.$e.insert(e,t)),t}Je(e){let t=this.Xe(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){let t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new rm),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}};function Bg(){return new Nt(pe.comparator)}function vO(){return new Nt(pe.comparator)}var AX={asc:"ASCENDING",desc:"DESCENDING"},TX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DX={and:"AND",or:"OR"},BE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function UE(n,e){return n.useProto3Json||Cm(e)?e:{value:e}}function im(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SX(n,e){return im(n,e.toTimestamp())}function li(n){return et(!!n),xe.fromTimestamp(function(t){let r=eo(t);return new hn(r.seconds,r.nanos)}(n))}function iC(n,e){return jE(n,e).canonicalString()}function jE(n,e){let t=function(i){return new jt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function CP(n){let e=jt.fromString(n);return et(SP(e)),e}function HE(n,e){return iC(n.databaseId,e.path)}function oE(n,e){let t=CP(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(AP(t))}function xP(n,e){return iC(n.databaseId,e)}function bX(n){let e=CP(n);return e.length===4?jt.emptyPath():AP(e)}function $E(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AP(n){return et(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function yO(n,e,t){return{name:HE(n,e),fields:t.value.mapValue.fields}}function RX(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:me()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(et(l===void 0||typeof l=="string"),bn.fromBase64String(l||"")):(et(l===void 0||l instanceof Buffer||l instanceof Uint8Array),bn.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let l=u.code===void 0?q.UNKNOWN:EP(u.code);return new ce(l,u.message||"")}(s);t=new nm(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=oE(n,r.document.name),o=li(r.document.updateTime),s=r.document.createTime?li(r.document.createTime):xe.min(),a=new Lr({mapValue:{fields:r.document.fields}}),c=Vr.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];t=new tu(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=oE(n,r.document),o=r.readTime?li(r.readTime):xe.min(),s=Vr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new tu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=oE(n,r.document),o=r.removedTargetIds||[];t=new tu([],o,i,null)}else{if(!("filter"in e))return me();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new FE(i,o),a=r.targetId;t=new tm(a,s)}}return t}function NX(n,e){let t;if(e instanceof na)t={update:yO(n,e.key,e.value)};else if(e instanceof Jg)t={delete:HE(n,e.key)};else if(e instanceof io)t={update:yO(n,e.key,e.data),updateMask:UX(e.fieldMask)};else{if(!(e instanceof ME))return me();t={verify:HE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof du)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ea)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ta)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fu)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw me()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:SX(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me()}(n,e.precondition)),t}function MX(n,e){return n&&n.length>0?(et(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?li(i.updateTime):li(o);return s.isEqual(xe.min())&&(s=li(o)),new NE(s,i.transformResults||[])}(t,e))):[]}function OX(n,e){return{documents:[xP(n,e.path)]}}function PX(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xP(n,i);let o=function(u){if(u.length!==0)return DP(fi.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:Qc(h.field),direction:LX(h.dir)}}(l))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=UE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ht:t,parent:i}}function kX(n){let e=bX(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){et(r===1);let l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];t.where&&(o=function(f){let h=TP(f);return h instanceof fi&&oP(h)?h.getFilters():[h]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(h=>function(m){return new cu(Jc(m.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(t.orderBy));let a=null;t.limit&&(a=function(f){let h;return h=typeof f=="object"?f.value:f,Cm(h)?null:h}(t.limit));let c=null;t.startAt&&(c=function(f){let h=!!f.before,p=f.values||[];return new au(p,h)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let h=!f.before,p=f.values||[];return new au(p,h)}(t.endAt)),sX(e,i,s,o,a,"F",c,u)}function FX(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Jc(t.unaryFilter.field);return Yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Jc(t.unaryFilter.field);return Yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Jc(t.unaryFilter.field);return Yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Jc(t.unaryFilter.field);return Yt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return me()}}(n):n.fieldFilter!==void 0?function(t){return Yt.create(Jc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return me()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fi.create(t.compositeFilter.filters.map(r=>TP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me()}}(t.compositeFilter.op))}(n):me()}function LX(n){return AX[n]}function VX(n){return TX[n]}function BX(n){return DX[n]}function Qc(n){return{fieldPath:n.canonicalString()}}function Jc(n){return sr.fromServerFormat(n.fieldPath)}function DP(n){return n instanceof Yt?function(t){if(t.op==="=="){if(oO(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NAN"}};if(iO(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(oO(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NOT_NAN"}};if(iO(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qc(t.field),op:VX(t.op),value:t.value}}}(n):n instanceof fi?function(t){let r=t.getFilters().map(i=>DP(i));return r.length===1?r[0]:{compositeFilter:{op:BX(t.op),filters:r}}}(n):me()}function UX(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Bd=class n{constructor(e,t,r,i,o=xe.min(),s=xe.min(),a=bn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var GE=class{constructor(e){this.Tt=e}};function jX(n){let e=kX({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?RE(e,e.limit,"L"):e}var om=class{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(wt(e.integerValue));else if("doubleValue"in e){let r=wt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),kd(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=eo(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(to(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?nP(e)?this.ft(t,Number.MAX_SAFE_INTEGER):tP(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):me()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){let r=e.fields||{};this.ft(t,55);for(let i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;let o=e.fields||{};this.ft(t,53);let s=iu,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(wt(a)),this.wt(s,t),this.Rt(o[s],t)}Ft(e,t){let r=e.values||[];this.ft(t,50);for(let i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),pe.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}bt(e){e.gt(2)}};om.xt=new om;var zE=class{constructor(){this.Tn=new WE}addToCollectionParentIndex(e,t){return this.Tn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Js.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},WE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new on(jt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new on(jt.comparator)).toArray()}};var DTe=new Uint8Array(0);var _O={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bP=41943040,_r=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};_r.DEFAULT_COLLECTION_PERCENTILE=10,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_r.DEFAULT=new _r(bP,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_r.DISABLED=new _r(-1,0,0);var Ud=class n{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new n(0)}static Un(){return new n(-1)}};var wO="LruGarbageCollector",HX=1048576;function EO([n,e],[t,r]){let i=Be(n,t);return i===0?Be(e,r):i}var qE=class{constructor(e){this.Hn=e,this.buffer=new on(EO),this.Jn=0}Yn(){return++this.Jn}Zn(e){let t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();EO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},KE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ee(wO,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){vu(t)?ee(wO,"Ignoring IndexedDB error during garbage collection: ",t):yield mu(t)}yield this.er(3e5)}))}},XE=class{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(KI.ae);let r=new qE(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(_O)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_O):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,s,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Yc()<=Pe.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function $X(n,e){return new XE(n,e)}var YE=class{constructor(){this.changes=new no(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ZE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var QE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Od(r.mutation,i,si.empty(),hn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Le()){let i=Xs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=bd();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Xs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Le()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ro(),s=Md(),a=function(){return Md()}();return t.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof io)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),Od(l.mutation,u,l.mutation.getFieldMask(),hn.now())):s.set(u.key,si.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),t.forEach((u,l)=>{var f;return a.set(u,new ZE(l,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Md(),i=new Nt((s,a)=>s-a),o=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let l=r.get(c)||si.empty();l=a.applyToLocalView(u,l),r.set(c,l);let f=(i.get(a.batchId)||Le()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,f=hP();l.forEach(h=>{if(!o.has(h)){let p=_P(t.get(h),r.get(h));p!==null&&f.set(h,p),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return G.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aX(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):G.resolve(Xs()),a=Pd,c=o;return s.next(u=>G.forEach(u,(l,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(l)?G.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Le())).next(l=>({batchId:a,changes:fP(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(r=>{let i=bd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=bd();return this.indexManager.getCollectionParents(e,o).next(a=>G.forEach(a,c=>{let u=function(f,h){return new uu(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((f,h)=>{s=s.insert(f,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let l=u.getKey();s.get(l)===null&&(s=s.insert(l,Vr.newInvalidDocument(l)))});let a=bd();return s.forEach((c,u)=>{let l=o.get(c);l!==void 0&&Od(l.mutation,u,si.empty(),hn.now()),Tm(t,u)&&(a=a.insert(c,u))}),a})}};var JE=class{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return G.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:li(i.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:jX(i.bundledQuery),readTime:li(i.readTime)}}(t)),G.resolve()}};var eI=class{constructor(){this.overlays=new Nt(pe.comparator),this.Rr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Xs();return G.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),G.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){let i=Xs(),o=t.length+1,s=new pe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Nt((u,l)=>u-l),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=o.get(u.largestBatchId);l===null&&(l=Xs(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Xs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return G.resolve(a)}Et(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new kE(t,r));let o=this.Rr.get(t);o===void 0&&(o=Le(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}};var tI=class{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}};var jd=class{constructor(){this.Vr=new on(Ut.mr),this.gr=new on(Ut.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){let r=new Ut(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Ut(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){let t=new pe(new jt([])),r=new Ut(t,e),i=new Ut(t,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){let t=new pe(new jt([])),r=new Ut(t,e),i=new Ut(t,e+1),o=Le();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ut(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ut=class{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return pe.comparator(e.key,t.key)||Be(e.Cr,t.Cr)}static pr(e,t){return Be(e.Cr,t.Cr)||pe.comparator(e.key,t.key)}};var nI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new on(Ut.mr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new OE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Mr=this.Mr.add(new Ut(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(s)}lookupMutationBatch(e,t){return G.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Nr(r),o=i<0?0:i;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?XI:this.Fr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ut(t,0),i=new Ut(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{let a=this.Or(s.Cr);o.push(a)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new on(Be);return t.forEach(i=>{let o=new Ut(i,0),s=new Ut(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),G.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;pe.isDocumentKey(o)||(o=o.child(""));let s=new Ut(new pe(o),0),a=new on(Be);return this.Mr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Cr)),!0)},s),G.resolve(this.Br(a))}Br(e){let t=[];return e.forEach(r=>{let i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){et(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return G.forEach(t.mutations,i=>{let o=new Ut(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){let r=new Ut(t,0),i=this.Mr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){let t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var rI=class{constructor(e){this.kr=e,this.docs=function(){return new Nt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():Vr.newInvalidDocument(t))}getEntries(e,t){let r=ro();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Vr.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ro(),s=t.path,a=new pe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||jK(UK(l),r)<=0||(i.has(l.key)||Tm(t,l))&&(o=o.insert(l.key,l.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,t,r,i){me()}qr(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iI(this)}getSize(e){return G.resolve(this.size)}},iI=class extends YE{constructor(e){super(),this.Ir=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}};var oI=class{constructor(e){this.persistence=e,this.Qr=new no(t=>eC(t),tC),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new jd,this.targetCount=0,this.Ur=Ud.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),G.resolve()}zn(e){this.Qr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Ur=new Ud(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.zn(t),G.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(o).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let r=this.Qr.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Kr.vr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.Kr.containsKey(t))}};var sm=class{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new KI(0),this.zr=!1,this.zr=!0,this.jr=new tI,this.referenceDelegate=e(this),this.Hr=new oI(this),this.indexManager=new zE,this.remoteDocumentCache=function(i){return new rI(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new GE(t),this.Yr=new JE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new nI(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);let i=new sI(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return G.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}},sI=class extends mE{constructor(e){super(),this.currentSequenceNumber=e}},aI=class n{constructor(e){this.persistence=e,this.ti=new jd,this.ni=null}static ri(e){return new n(e)}get ii(){if(this.ni)return this.ni;throw me()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),G.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.ii,r=>{let i=pe.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,xe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return G.or([()=>G.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}},am=class n{constructor(e,t){this.persistence=e,this.oi=new no(r=>zK(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=$X(this,t)}static ri(e,t){return new n(e,t)}Zr(){}Xr(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){let t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return G.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,t).next(a=>{a||(r++,o.removeEntry(s,xe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),G.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jg(e.data.value)),t}ar(e,t,r){return G.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.oi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var cI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Le(),i=Le();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var uI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var lI=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return gN()?8:$K(nn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new uI;return this._s(e,t,s).next(a=>{if(o.result=a,this.Xi)return this.us(e,t,s,a.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(Yc()<=Pe.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Zc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),G.resolve()):(Yc()<=Pe.DEBUG&&ee("QueryEngine","Query:",Zc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(Yc()<=Pe.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Zc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(t))):G.resolve())}rs(e,t){if(uO(t))return G.resolve(null);let r=ui(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=RE(t,null,"F"),r=ui(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Le(...o);return this.ns.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.cs(t,a);return this.ls(t,u,s,c.readTime)?this.rs(e,RE(t,null,"F")):this.hs(e,u,t,c)}))})))}ss(e,t,r,i){return uO(t)||i.isEqual(xe.min())?G.resolve(null):this.ns.getDocuments(e,r).next(o=>{let s=this.cs(t,o);return this.ls(t,s,r,i)?G.resolve(null):(Yc()<=Pe.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zc(t)),this.hs(e,s,t,BK(i,Pd)).next(a=>a))})}cs(e,t){let r=new on(lP(e));return t.forEach((i,o)=>{Tm(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return Yc()<=Pe.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Zc(t)),this.ns.getDocumentsMatchingQuery(e,t,Js.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var oC="LocalStore",GX=3e8,dI=class{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Nt(Be),this.Is=new no(o=>eC(o),tC),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QE(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}};function zX(n,e,t,r){return new dI(n,e,t,r)}function RP(n,e){return b(this,null,function*(){let t=Ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Le();for(let u of i){s.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of o){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Rs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function WX(n,e){let t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let f=u.batch,h=f.keys(),p=G.resolve();return h.forEach(m=>{p=p.next(()=>l.getEntry(c,m)).next(y=>{let _=u.docVersions.get(m);et(_!==null),y.version.compareTo(_)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Le();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function NP(n){let e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function qX(n,e){let t=Ee(n),r=e.snapshotVersion,i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;let a=[];e.targetChanges.forEach((l,f)=>{let h=i.get(f);if(!h)return;a.push(t.Hr.removeMatchingKeys(o,l.removedDocuments,f).next(()=>t.Hr.addMatchingKeys(o,l.addedDocuments,f)));let p=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(bn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(f,p),function(y,_,C){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=GX?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(h,p,l)&&a.push(t.Hr.updateTargetData(o,p))});let c=ro(),u=Le();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(KX(o,s,e.documentUpdates).next(l=>{c=l.Vs,u=l.fs})),!r.isEqual(xe.min())){let l=t.Hr.getLastRemoteSnapshotVersion(o).next(f=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return G.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Ts=i,o))}function KX(n,e,t){let r=Le(),i=Le();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ro();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ee(oC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Vs:s,fs:i}})}function XX(n,e){let t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=XI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YX(n,e){let t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,G.resolve(i)):t.Hr.allocateTargetId(r).next(s=>(i=new Bd(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}function fI(n,e,t){return b(this,null,function*(){let r=Ee(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!vu(s))throw s;ee(oC,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)})}function IO(n,e,t){let r=Ee(n),i=xe.min(),o=Le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,l){let f=Ee(c),h=f.Is.get(l);return h!==void 0?G.resolve(f.Ts.get(h)):f.Hr.getTargetData(u,l)}(r,s,ui(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,t?i:xe.min(),t?o:Le())).next(a=>(ZX(r,uX(e),a),{documents:a,gs:o})))}function ZX(n,e,t){let r=n.Es.get(e)||xe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}var cm=class{constructor(){this.activeTargetIds=gX()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var hI=class{constructor(){this.ho=new cm,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new cm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var pI=class{To(e){}shutdown(){}};var CO="ConnectivityMonitor",um=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ee(CO,"Network connectivity changed: AVAILABLE");for(let e of this.Vo)e(0)}Ro(){ee(CO,"Network connectivity changed: UNAVAILABLE");for(let e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ug=null;function gI(){return Ug===null?Ug=function(){return 268435456+Math.round(2147483648*Math.random())}():Ug++,"0x"+Ug.toString(16)}var sE="RestConnection",QX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},mI=class{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Yg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}bo(e,t,r,i,o){let s=gI(),a=this.So(e,t.toUriEncodedString());ee(sE,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,i,o),this.vo(e,a,c,r).then(u=>(ee(sE,`Received RPC '${e}' ${s}: `,u),u),u=>{throw nu(sE,`RPC '${e}' ${s} failed with error: `,u,"url: ",a,"request:",r),u})}Co(e,t,r,i,o,s){return this.bo(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}So(e,t){let r=QX[e];return`${this.po}/v1/${t}:${r}`}terminate(){}};var vI=class{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}};var Sn="WebChannelConnection",yI=class extends mI{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){let o=gI();return new Promise((s,a)=>{let c=new eE;c.setWithCredentials(!0),c.listenOnce(tE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Sd.NO_ERROR:let l=c.getResponseJson();ee(Sn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case Sd.TIMEOUT:ee(Sn,`RPC '${e}' ${o} timed out`),a(new ce(q.DEADLINE_EXCEEDED,"Request time out"));break;case Sd.HTTP_ERROR:let f=c.getStatus();if(ee(Sn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let p=h?.error;if(p&&p.status&&p.message){let m=function(_){let C=_.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(C)>=0?C:q.UNKNOWN}(p.status);a(new ce(m,p.message))}else a(new ce(q.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new ce(q.UNAVAILABLE,"Connection failed."));break;default:me()}}finally{ee(Sn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);ee(Sn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}Wo(e,t,r){let i=gI(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=iE(),a=rE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let l=o.join("");ee(Sn,`Creating RPC '${e}' stream ${i}: ${l}`,c);let f=s.createWebChannel(l,c),h=!1,p=!1,m=new vI({Fo:_=>{p?ee(Sn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(ee(Sn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),ee(Sn,`RPC '${e}' stream ${i} sending:`,_),f.send(_))},Mo:()=>f.close()}),y=(_,C,x)=>{_.listen(C,R=>{try{x(R)}catch(O){setTimeout(()=>{throw O},0)}})};return y(f,Xc.EventType.OPEN,()=>{p||(ee(Sn,`RPC '${e}' stream ${i} transport opened.`),m.Qo())}),y(f,Xc.EventType.CLOSE,()=>{p||(p=!0,ee(Sn,`RPC '${e}' stream ${i} transport closed`),m.Ko())}),y(f,Xc.EventType.ERROR,_=>{p||(p=!0,nu(Sn,`RPC '${e}' stream ${i} transport errored:`,_),m.Ko(new ce(q.UNAVAILABLE,"The operation could not be completed")))}),y(f,Xc.EventType.MESSAGE,_=>{var C;if(!p){let x=_.data[0];et(!!x);let R=x,O=R?.error||((C=R[0])===null||C===void 0?void 0:C.error);if(O){ee(Sn,`RPC '${e}' stream ${i} received error:`,O);let V=O.status,U=function(T){let S=Bt[T];if(S!==void 0)return EP(S)}(V),A=O.message;U===void 0&&(U=q.INTERNAL,A="Unknown error status: "+V+" with message "+O.message),p=!0,m.Ko(new ce(U,A)),f.close()}else ee(Sn,`RPC '${e}' stream ${i} received:`,x),m.Uo(x)}}),y(a,nE.STAT_EVENT,_=>{_.stat===Lg.PROXY?ee(Sn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===Lg.NOPROXY&&ee(Sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.$o()},0),m}};function aE(){return typeof document<"u"?document:null}function Dm(n){return new BE(n,!0)}var lm=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();let t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var xO="PersistentStream",dm=class{constructor(e,t,r,i,o,s,a,c){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new lm(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return b(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}T_(){return b(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(e,t){return b(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(Ji(t.toString()),Ji("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Lo(t)})}A_(){}auth(){this.state=1;let e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{let i=new ce(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){let r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(()=>b(this,null,function*(){this.state=0,this.start()}))}m_(e){return ee(xO,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ee(xO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_I=class extends dm{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();let t=RX(this.serializer,e),r=function(o){if(!("targetChange"in o))return xe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?xe.min():s.readTime?li(s.readTime):xe.min()}(e);return this.listener.p_(t,r)}y_(e){let t={};t.database=$E(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=bE(c)?{documents:OX(o,c)}:{query:PX(o,c).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=IP(o,s.resumeToken);let u=UE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(xe.min())>0){a.readTime=im(o,s.snapshotVersion.toTimestamp());let u=UE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=FX(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){let t={};t.database=$E(this.serializer),t.removeTarget=e,this.I_(t)}},wI=class extends dm{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();let t=MX(e.writeResults,e.commitTime),r=li(e.commitTime);return this.listener.v_(r,t)}C_(){let e={};e.database=$E(this.serializer),this.I_(e)}S_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>NX(this.serializer,r))};this.I_(t)}};var EI=class{},II=class extends EI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new ce(q.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.bo(e,jE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(q.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,jE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(q.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},CI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ji(t),this.N_=!1):ee("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var ra="RemoteStore",xI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(()=>b(this,null,function*(){oa(this)&&(ee(ra,"Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let u=Ee(c);u.W_.add(4),yield Yd(u),u.j_.set("Unknown"),u.W_.delete(4),yield Sm(u)})}(this))}))}),this.j_=new CI(r,i)}};function Sm(n){return b(this,null,function*(){if(oa(n))for(let e of n.G_)yield e(!0)})}function Yd(n){return b(this,null,function*(){for(let e of n.G_)yield e(!1)})}function MP(n,e){let t=Ee(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),uC(t)?cC(t):yu(t).c_()&&aC(t,e))}function sC(n,e){let t=Ee(n),r=yu(t);t.U_.delete(e),r.c_()&&OP(t,e),t.U_.size===0&&(r.c_()?r.P_():oa(t)&&t.j_.set("Unknown"))}function aC(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yu(n).y_(e)}function OP(n,e){n.H_.Ne(e),yu(n).w_(e)}function cC(n){n.H_=new VE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),yu(n).start(),n.j_.B_()}function uC(n){return oa(n)&&!yu(n).u_()&&n.U_.size>0}function oa(n){return Ee(n).W_.size===0}function PP(n){n.H_=void 0}function JX(n){return b(this,null,function*(){n.j_.set("Online")})}function eY(n){return b(this,null,function*(){n.U_.forEach((e,t)=>{aC(n,e)})})}function tY(n,e){return b(this,null,function*(){PP(n),uC(n)?(n.j_.q_(e),cC(n)):n.j_.set("Unknown")})}function nY(n,e,t){return b(this,null,function*(){if(n.j_.set("Online"),e instanceof nm&&e.state===2&&e.cause)try{yield function(i,o){return b(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.U_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.U_.delete(a),i.H_.removeTarget(a))})}(n,e)}catch(r){ee(ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fm(n,r)}else if(e instanceof tu?n.H_.We(e):e instanceof tm?n.H_.Ze(e):n.H_.je(e),!t.isEqual(xe.min()))try{let r=yield NP(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.H_.ot(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=o.U_.get(u);l&&o.U_.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let l=o.U_.get(c);if(!l)return;o.U_.set(c,l.withResumeToken(bn.EMPTY_BYTE_STRING,l.snapshotVersion)),OP(o,c);let f=new Bd(l.target,c,u,l.sequenceNumber);aC(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ee(ra,"Failed to raise snapshot:",r),yield fm(n,r)}})}function fm(n,e,t){return b(this,null,function*(){if(!vu(e))throw e;n.W_.add(1),yield Yd(n),n.j_.set("Offline"),t||(t=()=>NP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){ee(ra,"Retrying IndexedDB access"),yield t(),n.W_.delete(1),yield Sm(n)}))})}function kP(n,e){return e().catch(t=>fm(n,t,e))}function bm(n){return b(this,null,function*(){let e=Ee(n),t=Qo(e),r=e.K_.length>0?e.K_[e.K_.length-1].batchId:XI;for(;rY(e);)try{let i=yield XX(e.localStore,r);if(i===null){e.K_.length===0&&t.P_();break}r=i.batchId,iY(e,i)}catch(i){yield fm(e,i)}FP(e)&&LP(e)})}function rY(n){return oa(n)&&n.K_.length<10}function iY(n,e){n.K_.push(e);let t=Qo(n);t.c_()&&t.b_&&t.S_(e.mutations)}function FP(n){return oa(n)&&!Qo(n).u_()&&n.K_.length>0}function LP(n){Qo(n).start()}function oY(n){return b(this,null,function*(){Qo(n).C_()})}function sY(n){return b(this,null,function*(){let e=Qo(n);for(let t of n.K_)e.S_(t.mutations)})}function aY(n,e,t){return b(this,null,function*(){let r=n.K_.shift(),i=PE.from(r,e,t);yield kP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield bm(n)})}function cY(n,e){return b(this,null,function*(){e&&Qo(n).b_&&(yield function(r,i){return b(this,null,function*(){if(function(s){return IX(s)&&s!==q.ABORTED}(i.code)){let o=r.K_.shift();Qo(r).h_(),yield kP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield bm(r)}})}(n,e)),FP(n)&&LP(n)})}function AO(n,e){return b(this,null,function*(){let t=Ee(n);t.asyncQueue.verifyOperationInProgress(),ee(ra,"RemoteStore received new credentials");let r=oa(t);t.W_.add(3),yield Yd(t),r&&t.j_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),yield Sm(t)})}function uY(n,e){return b(this,null,function*(){let t=Ee(n);e?(t.W_.delete(2),yield Sm(t)):e||(t.W_.add(2),yield Yd(t),t.j_.set("Unknown"))})}function yu(n){return n.J_||(n.J_=function(t,r,i){let o=Ee(t);return o.M_(),new _I(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:JX.bind(null,n),No:eY.bind(null,n),Lo:tY.bind(null,n),p_:nY.bind(null,n)}),n.G_.push(e=>b(this,null,function*(){e?(n.J_.h_(),uC(n)?cC(n):n.j_.set("Unknown")):(yield n.J_.stop(),PP(n))}))),n.J_}function Qo(n){return n.Y_||(n.Y_=function(t,r,i){let o=Ee(t);return o.M_(),new wI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:oY.bind(null,n),Lo:cY.bind(null,n),D_:sY.bind(null,n),v_:aY.bind(null,n)}),n.G_.push(e=>b(this,null,function*(){e?(n.Y_.h_(),yield bm(n)):(yield n.Y_.stop(),n.K_.length>0&&(ee(ra,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))}))),n.Y_}var AI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function lC(n,e){if(Ji("AsyncQueue",`${e}: ${n}`),vu(n))return new ce(q.UNAVAILABLE,`${e}: ${n}`);throw n}var hm=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=bd(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var pm=class{constructor(){this.Z_=new Nt(pe.comparator)}track(e){let t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):me():this.Z_=this.Z_.insert(t,e)}X_(){let e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}},pu=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,hm.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Am(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var TI=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}},DI=class{constructor(){this.queries=TO(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){let i=Ee(t),o=i.queries;i.queries=TO(),o.forEach((s,a)=>{for(let c of a.ta)c.onError(r)})})(this,new ce(q.ABORTED,"Firestore shutting down"))}};function TO(){return new no(n=>uP(n),Am)}function lY(n,e){return b(this,null,function*(){let t=Ee(n),r=3,i=e.query,o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new TI,r=e.ra()?0:1);try{switch(r){case 0:o.ea=yield t.onListen(i,!0);break;case 1:o.ea=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=lC(s,`Initialization of query '${Zc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&dC(t)})}function dY(n,e){return b(this,null,function*(){let t=Ee(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function fY(n,e){let t=Ee(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&dC(t)}function hY(n,e,t){let r=Ee(n),i=r.queries.get(e);if(i)for(let o of i.ta)o.onError(t);r.queries.delete(e)}function dC(n){n.ia.forEach(e=>{e.next()})}var SI,DO;(DO=SI||(SI={}))._a="default",DO.Cache="cache";var bI=class{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new pu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;let r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;let t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=pu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==SI.Cache}};var gm=class{constructor(e){this.key=e}},mm=class{constructor(e){this.key=e}},RI=class{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Le(),this.mutatedKeys=Le(),this.ya=lP(e),this.wa=new hm(this.ya)}get ba(){return this.fa}Sa(e,t){let r=t?t.Da:new pm,i=t?t.wa:this.wa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,f)=>{let h=i.get(l),p=Tm(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),_=!1;h&&p?h.data.isEqual(p.data)?m!==y&&(r.track({type:3,doc:p}),_=!0):this.va(h,p)||(r.track({type:2,doc:p}),_=!0,(c&&this.ya(p,c)>0||u&&this.ya(p,u)<0)&&(a=!0)):!h&&p?(r.track({type:0,doc:p}),_=!0):h&&!p&&(r.track({type:1,doc:h}),_=!0,(c||u)&&(a=!0)),_&&(p?(s=s.add(p),o=y?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;let s=e.Da.X_();s.sort((l,f)=>function(p,m){let y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me()}};return y(p)-y(m)}(l.type,f.type)||this.ya(l.doc,f.doc)),this.Ca(r),i=i!=null&&i;let a=t&&!i?this.Fa():[],c=this.pa.size===0&&this.current&&!i?1:0,u=c!==this.ga;return this.ga=c,s.length!==0||u?{snapshot:new pu(this.query,e.wa,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new pm,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];let e=this.pa;this.pa=Le(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});let t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new mm(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new gm(r))}),t}Oa(e){this.fa=e.gs,this.pa=Le();let t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return pu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},fC="SyncEngine",NI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},MI=class{constructor(e){this.key=e,this.Ba=!1}},OI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new no(a=>uP(a),Am),this.qa=new Map,this.Qa=new Set,this.$a=new Nt(pe.comparator),this.Ka=new Map,this.Ua=new jd,this.Wa={},this.Ga=new Map,this.za=Ud.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function pY(n,e,t=!0){return b(this,null,function*(){let r=$P(n),i,o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=yield VP(r,e,t,!0),i})}function gY(n,e){return b(this,null,function*(){let t=$P(n);yield VP(t,e,!0,!1)})}function VP(n,e,t,r){return b(this,null,function*(){let i=yield YX(n.localStore,ui(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield mY(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&MP(n.remoteStore,i),a})}function mY(n,e,t,r,i){return b(this,null,function*(){n.Ha=(f,h,p)=>function(y,_,C,x){return b(this,null,function*(){let R=_.view.Sa(C);R.ls&&(R=yield IO(y.localStore,_.query,!1).then(({documents:A})=>_.view.Sa(A,R)));let O=x&&x.targetChanges.get(_.targetId),V=x&&x.targetMismatches.get(_.targetId)!=null,U=_.view.applyChanges(R,y.isPrimaryClient,O,V);return bO(y,_.targetId,U.Ma),U.snapshot})}(n,f,h,p);let o=yield IO(n.localStore,e,!0),s=new RI(e,o.gs),a=s.Sa(o.documents),c=Vd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);bO(n,t,u.Ma);let l=new NI(e,t,s);return n.ka.set(e,l),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),u.snapshot})}function vY(n,e,t){return b(this,null,function*(){let r=Ee(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!Am(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield fI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&sC(r.remoteStore,i.targetId),PI(r,i.targetId)}).catch(mu))):(PI(r,i.targetId),yield fI(r.localStore,i.targetId,!0))})}function yY(n,e){return b(this,null,function*(){let t=Ee(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),sC(t.remoteStore,r.targetId))})}function _Y(n,e,t){return b(this,null,function*(){let r=TY(n);try{let i=yield function(s,a){let c=Ee(s),u=hn.now(),l=a.reduce((p,m)=>p.add(m.key),Le()),f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=ro(),y=Le();return c.ds.getEntries(p,l).next(_=>{m=_,m.forEach((C,x)=>{x.isValidDocument()||(y=y.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,m)).next(_=>{f=_;let C=[];for(let x of a){let R=EX(x,f.get(x.key).overlayedDocument);R!=null&&C.push(new io(x.key,R,rP(R.value.mapValue),Zs.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,C,a)}).next(_=>{h=_;let C=_.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(p,_.batchId,C)})}).then(()=>({batchId:h.batchId,changes:fP(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Wa[s.currentUser.toKey()];u||(u=new Nt(Be)),u=u.insert(a,c),s.Wa[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Zd(r,i.changes),yield bm(r.remoteStore)}catch(i){let o=lC(i,"Failed to persist write");t.reject(o)}})}function BP(n,e){return b(this,null,function*(){let t=Ee(n);try{let r=yield qX(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Ka.get(o);s&&(et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?et(s.Ba):i.removedDocuments.size>0&&(et(s.Ba),s.Ba=!1))}),yield Zd(t,r,e)}catch(r){yield mu(r)}})}function SO(n,e,t){let r=Ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ka.forEach((o,s)=>{let a=s.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Ee(s);c.onlineState=a;let u=!1;c.queries.forEach((l,f)=>{for(let h of f.ta)h.sa(a)&&(u=!0)}),u&&dC(c)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wY(n,e,t){return b(this,null,function*(){let r=Ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ka.get(e),o=i&&i.key;if(o){let s=new Nt(pe.comparator);s=s.insert(o,Vr.newNoDocument(o,xe.min()));let a=Le().add(o),c=new em(xe.min(),new Map,new Nt(Be),s,a);yield BP(r,c),r.$a=r.$a.remove(o),r.Ka.delete(e),hC(r)}else yield fI(r.localStore,e,!1).then(()=>PI(r,e,t)).catch(mu)})}function EY(n,e){return b(this,null,function*(){let t=Ee(n),r=e.batch.batchId;try{let i=yield WX(t.localStore,e);jP(t,r,null),UP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Zd(t,i)}catch(i){yield mu(i)}})}function IY(n,e,t){return b(this,null,function*(){let r=Ee(n);try{let i=yield function(s,a){let c=Ee(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(et(f!==null),l=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);jP(r,e,t),UP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Zd(r,i)}catch(i){yield mu(i)}})}function UP(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function jP(n,e,t){let r=Ee(n),i=r.Wa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function PI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||HP(n,r)})}function HP(n,e){n.Qa.delete(e.path.canonicalString());let t=n.$a.get(e);t!==null&&(sC(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),hC(n))}function bO(n,e,t){for(let r of t)r instanceof gm?(n.Ua.addReference(r.key,e),CY(n,r)):r instanceof mm?(ee(fC,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||HP(n,r.key)):me()}function CY(n,e){let t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ee(fC,"New document in limbo: "+t),n.Qa.add(r),hC(n))}function hC(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){let e=n.Qa.values().next().value;n.Qa.delete(e);let t=new pe(jt.fromString(e)),r=n.za.next();n.Ka.set(r,new MI(t)),n.$a=n.$a.insert(t,r),MP(n.remoteStore,new Bd(ui(nC(t.path)),r,"TargetPurposeLimboResolution",KI.ae))}}function Zd(n,e,t){return b(this,null,function*(){let r=Ee(n),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,c)=>{s.push(r.Ha(c,e,t).then(u=>{var l;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(l=t?.targetChanges.get(c.targetId))===null||l===void 0?void 0:l.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=cI.Yi(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.La.p_(i),yield function(c,u){return b(this,null,function*(){let l=Ee(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(u,h=>G.forEach(h.Hi,p=>l.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>G.forEach(h.Ji,p=>l.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!vu(f))throw f;ee(oC,"Failed to update sequence numbers: "+f)}for(let f of u){let h=f.targetId;if(!f.fromCache){let p=l.Ts.get(h),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);l.Ts=l.Ts.insert(h,y)}}})}(r.localStore,o))})}function xY(n,e){return b(this,null,function*(){let t=Ee(n);if(!t.currentUser.isEqual(e)){ee(fC,"User change. New user:",e.toKey());let r=yield RP(t.localStore,e);t.currentUser=e,function(o,s){o.Ga.forEach(a=>{a.forEach(c=>{c.reject(new ce(q.CANCELLED,s))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zd(t,r.Rs)}})}function AY(n,e){let t=Ee(n),r=t.Ka.get(e);if(r&&r.Ba)return Le().add(r.key);{let i=Le(),o=t.qa.get(e);if(!o)return i;for(let s of o){let a=t.ka.get(s);i=i.unionWith(a.view.ba)}return i}}function $P(n){let e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=BP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wY.bind(null,e),e.La.p_=fY.bind(null,e.eventManager),e.La.Ja=hY.bind(null,e.eventManager),e}function TY(n){let e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IY.bind(null,e),e}var GP=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=Dm(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),yield this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)})}tu(t,r){return null}nu(t,r){return null}eu(t){return zX(this.persistence,new lI,t.initialUser,this.serializer)}Xa(t){return new sm(aI.ri,this.serializer)}Za(t){return new hI}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),kI=class extends GP{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){et(this.persistence.referenceDelegate instanceof am);let r=this.persistence.referenceDelegate.garbageCollector;return new KE(r,e.asyncQueue,t)}Xa(e){let t=this.cacheSizeBytes!==void 0?_r.withCacheSize(this.cacheSizeBytes):_r.DEFAULT;return new sm(r=>am.ri(r,t),this.serializer)}};var DY=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xY.bind(null,this.syncEngine),yield uY(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new DI}()}createDatastore(t){let r=Dm(t.databaseInfo.databaseId),i=function(s){return new yI(s)}(t.databaseInfo);return function(s,a,c,u){return new II(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new xI(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>SO(this.syncEngine,r,0),function(){return um.D()?new um:new pI}())}createSyncEngine(t,r){return function(o,s,a,c,u,l,f){let h=new OI(o,s,a,c,u,l);return f&&(h.ja=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(o){return b(this,null,function*(){let s=Ee(o);ee(ra,"RemoteStore shutting down."),s.W_.add(5),yield Yd(s),s.z_.shutdown(),s.j_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var FI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ji("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Jo="FirestoreClient",LI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rn.UNAUTHENTICATED,this.clientId=Wg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>b(this,null,function*(){ee(Jo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ee(Jo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=lC(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function cE(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ee(Jo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield RP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function RO(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield SY(n);ee(Jo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>AO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>AO(e.remoteStore,i)),n._onlineComponents=e})}function SY(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ee(Jo,"Using user provided OfflineComponentProvider");try{yield cE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;nu("Error using user provided cache. Falling back to memory cache: "+t),yield cE(n,new GP)}}else ee(Jo,"Using default OfflineComponentProvider"),yield cE(n,new kI(void 0));return n._offlineComponents})}function zP(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ee(Jo,"Using user provided OnlineComponentProvider"),yield RO(n,n._uninitializedComponentsProvider._online)):(ee(Jo,"Using default OnlineComponentProvider"),yield RO(n,new DY))),n._onlineComponents})}function bY(n){return zP(n).then(e=>e.syncEngine)}function RY(n){return b(this,null,function*(){let e=yield zP(n),t=e.eventManager;return t.onListen=pY.bind(null,e.syncEngine),t.onUnlisten=vY.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=gY.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yY.bind(null,e.syncEngine),t})}function NY(n,e,t={}){let r=new ai;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(o,s,a,c,u){let l=new FI({next:h=>{l.su(),s.enqueueAndForget(()=>dY(o,f));let p=h.docs.has(a);!p&&h.fromCache?u.reject(new ce(q.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?u.reject(new ce(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new bI(nC(a.path),l,{includeMetadataChanges:!0,Ta:!0});return lY(o,f)}(yield RY(n),n.asyncQueue,e,t,r)})),r.promise}function WP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var NO=new Map;function MY(n,e,t){if(!t)throw new ce(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function OY(n,e,t,r){if(e===!0&&r===!0)throw new ce(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MO(n){if(!pe.isDocumentKey(n))throw new ce(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pC(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me()}function Hd(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=pC(n);throw new ce(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var qP="firestore.googleapis.com",OO=!0,vm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qP,this.ssl=OO}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:OO;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HX)throw new ce(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ce(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ce(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ce(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$d=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uE;switch(r.type){case"firstParty":return new hE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=NO.get(t);r&&(ee("ComponentProvider","Removing Datastore"),NO.delete(t),r.terminate())}(this),Promise.resolve()}};function KP(n,e,t,r={}){var i;let o=(n=Hd(n,$d))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;o.host!==qP&&o.host!==a&&nu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!ni(c,s)&&(n._setSettings(c),r.mockUserToken)){let u,l;if(typeof r.mockUserToken=="string")u=r.mockUserToken,l=rn.MOCK_USER;else{u=uN(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ce(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new rn(f)}n._authCredentials=new lE(new Gg(u,l))}}var VI=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},wr=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Gd=class n extends VI{constructor(e,t,r){super(e,t,nC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new pe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function XP(n,e,...t){if(n=fn(n),arguments.length===1&&(e=Wg.newId()),MY("doc","path",e),n instanceof $d){let r=jt.fromString(e,...t);return MO(r),new wr(n,null,new pe(r))}{if(!(n instanceof wr||n instanceof Gd))throw new ce(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(jt.fromString(e,...t));return MO(r),new wr(n.firestore,n instanceof Gd?n.converter:null,new pe(r))}}var PO="AsyncQueue",ym=class{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new lm(this,"async_queue_retry"),this.bu=()=>{let r=aE();r&&ee(PO,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;let t=aE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;let t=aE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});let t=new ai;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}Cu(){return b(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!vu(e))throw e;ee(PO,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(e){let t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ji("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);let i=AI.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&me()}verifyOperationInProgress(){}Mu(){return b(this,null,function*(){let e;do e=this.Su,yield e;while(e!==this.Su)})}xu(e){for(let t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){let t=this.fu.indexOf(e);this.fu.splice(t,1)}};var zd=class extends $d{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ym,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ym(e),this._firestoreClient=void 0,yield e}})}};function YP(n,e){let t=typeof n=="object"?n:$s(),r=typeof n=="string"?n:e||Yg,i=Uc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=cN("firestore");o&&KP(i,...o)}return i}function ZP(n){if(n._terminated)throw new ce(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PY(n),n._firestoreClient}function PY(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,l){return new vE(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,WP(l.experimentalLongPollingOptions),l.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new LI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Wd=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(bn.fromBase64String(e))}catch(t){throw new ce(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var qd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var _m=class{constructor(e){this._methodName=e}};var Kd=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}};var Xd=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var kY=/^__.*__$/,BI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new io(e,this.data,this.fieldMask,t,this.fieldTransforms):new na(e,this.data,t,this.fieldTransforms)}};function QP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me()}}var UI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Ku(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return wm(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(QP(this.Lu)&&kY.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}},jI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Dm(e)}ju(e,t,r,i=!1){return new UI({Lu:e,methodName:t,zu:r,path:sr.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function FY(n){let e=n._freezeSettings(),t=Dm(n._databaseId);return new jI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function LY(n,e,t,r,i,o={}){let s=n.ju(o.merge||o.mergeFields?2:0,e,t,i);nk("Data must be an object, but it was:",s,r);let a=ek(r,s),c,u;if(o.merge)c=new si(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let f of o.mergeFields){let h=VY(e,f,t);if(!s.contains(h))throw new ce(q.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);UY(l,h)||l.push(h)}c=new si(l),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new BI(new Lr(a),c,u)}function JP(n,e){if(tk(n=fn(n)))return nk("Unsupported field value:",e,n),ek(n,e);if(n instanceof _m)return function(r,i){if(!QP(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=JP(a,i.Uu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=fn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=hn.fromDate(r);return{timestampValue:im(i.serializer,o)}}if(r instanceof hn){let o=new hn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:im(i.serializer,o)}}if(r instanceof Kd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wd)return{bytesValue:IP(i.serializer,r._byteString)};if(r instanceof wr){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:iC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xd)return function(s,a){return{mapValue:{fields:{[ZI]:{stringValue:QI},[iu]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Wu("VectorValues must only contain numeric values.");return rC(a.serializer,u)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${pC(r)}`)}(n,e)}function ek(n,e){let t={};return XO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(n,(r,i)=>{let o=JP(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function tk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof hn||n instanceof Kd||n instanceof Wd||n instanceof wr||n instanceof _m||n instanceof Xd)}function nk(n,e,t){if(!tk(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=pC(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function VY(n,e,t){if((e=fn(e))instanceof qd)return e._internalPath;if(typeof e=="string")return rk(n,e);throw wm("Field path arguments must be of type string or ",n,!1,void 0,t)}var BY=new RegExp("[~\\*/\\[\\]]");function rk(n,e,t){if(e.search(BY)>=0)throw wm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qd(...e.split("."))._internalPath}catch{throw wm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ce(q.INVALID_ARGUMENT,a+n+c)}function UY(n,e){return n.some(t=>t.isEqual(e))}var Em=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new HI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ik("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},HI=class extends Em{data(){return super.data()}};function ik(n,e){return typeof e=="string"?rk(n,e):e instanceof qd?e._internalPath:e._delegate._internalPath}var $I=class{convertValue(e,t="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(to(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ia(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[iu].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>wt(s.doubleValue));return new Xd(o)}convertGeoPoint(e){return new Kd(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=xm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fd(e));default:return null}}convertTimestamp(e){let t=eo(e);return new hn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=jt.fromString(e);et(SP(r));let i=new Zg(r.get(1),r.get(3)),o=new pe(r.popFirst(5));return i.isEqual(t)||Ji(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function jY(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var GI=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Im=class extends Em{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new zI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ik("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},zI=class extends Im{data(e={}){return super.data(e)}};function ok(n){n=Hd(n,wr);let e=Hd(n.firestore,zd);return NY(ZP(e),n._key).then(t=>$Y(e,n,t))}var WI=class extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wd(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}};function sk(n,e,t){n=Hd(n,wr);let r=Hd(n.firestore,zd),i=jY(n.converter,e,t);return HY(r,[LY(FY(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Zs.none())])}function HY(n,e){return function(r,i){let o=new ai;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return _Y(yield bY(r),i,o)})),o.promise}(ZP(n),e)}function $Y(n,e,t){let r=t.docs.get(e._key),i=new WI(n);return new Im(n,i,e._key,r,new GI(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){gu=i})($o),Pr(new Bn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new zd(new dE(r.getProvider("auth-internal")),new pE(s,r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ce(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zg(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Rt(XM,YM,e),Rt(XM,YM,"esm2017")})();var sa=class{constructor(e){return e}},ak="firestore",gC=class{constructor(){return Hc(ak)}};var mC=new J("angularfire2.firestore-instances");function GY(n,e){let t=pd(ak,n,e);return t&&new sa(t)}function zY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new sa(r)}}var WY={provide:gC,deps:[[new zn,mC]]},qY={provide:sa,useFactory:GY,deps:[[new zn,mC],Wi]};function ck(n,...e){return Rt("angularfire",Go.full,"fst"),Wn([qY,WY,{provide:mC,useFactory:zY(n),multi:!0,deps:[$e,_t,zo,zs,[new zn,Dd],[new zn,$c],...e]}])}var Rm=Dn(XP,!0,2);var vC=Dn(ok,!0);var uk=Dn(YP,!0);var yC=Dn(sk,!0,2);var Xn=class n{constructor(e,t){this.auth=e;this.firestore=t;$M(this.auth,r=>{this.currentUserSubject.next(r)})}currentUserSubject=new Mt(null);currentUser$=this.currentUserSubject.asObservable();register(e,t,r,i){return ke(jM(this.auth,e,t).then(o=>{let s=Rm(this.firestore,`users/${o.user.uid}`);return yC(s,{email:e,username:r,allergies:i}).then(()=>o.user)}))}login(e,t,r){return ke(Qw(this.auth,r?Td:Kc).then(()=>GM(this.auth,e,t)))}googleSignIn(e){return ke(Qw(this.auth,e?Td:Kc).then(()=>zM(this.auth,new Bw)))}saveAllergies(e,t){let r=Rm(this.firestore,`users/${e}`);return ke(vC(r).then(i=>{let o=i.exists()?i.data():{},s=Ae(X({},o||{}),{allergies:t});return yC(r,s,{merge:!0})}))}logout(){return ke(WM(this.auth))}isLoggedIn(){return!!this.auth.currentUser}getUserData(e){let t=Rm(this.firestore,`users/${e}`);return ke(vC(t).then(r=>r.exists()?r.data():null))}getCurrentUser(){return this.auth.currentUser}static \u0275fac=function(t){return new(t||n)(ie(Ks),ie(sa))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};function XY(n,e){if(n&1&&(B(0,"div",21),z(1),j()),n&2){let t=Dt();le(),In(" ",t.errorMessage," ")}}var Mm=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";rememberMe=!0;errorMessage="";showPassword=!1;login(){this.errorMessage="",this.authService.login(this.email,this.password,this.rememberMe).subscribe({next:()=>{this.router.navigate(["/user"])},error:e=>{this.errorMessage=e.message||"Error logging in"}})}googleLogin(){this.errorMessage="",this.authService.googleSignIn(this.rememberMe).subscribe({next:()=>{this.router.navigate(["/user"])},error:e=>{this.errorMessage=e.message||"Error logging in with Google"}})}static \u0275fac=function(t){return new(t||n)(ge(Xn),ge(Lt))};static \u0275cmp=Ft({type:n,selectors:[["app-login"]],decls:32,vars:7,consts:[[1,"login-page"],[1,"login-title","text-center"],[1,"login-content","container"],[1,"login-illustration"],["src","assets/login-illustration.png","alt","Sign In Illustration"],[1,"login-form"],[1,"mb-3"],["type","email","placeholder","Email",1,"form-control","placeholder-green",3,"ngModelChange","ngModel"],[1,"mb-3","position-relative"],["placeholder","Password",1,"form-control","placeholder-green",3,"ngModelChange","type","ngModel"],[1,"material-icons","toggle-password",3,"click"],[1,"form-check","mb-3"],["type","checkbox","id","rememberMe",1,"form-check-input",3,"ngModelChange","ngModel"],["for","rememberMe",1,"form-check-label"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"btn","btn-primary","w-100","mb-3",3,"click"],[1,"text-center","mb-3"],["routerLink","/register",1,"create-link"],[1,"separator","mb-3"],[1,"btn","btn-google-auth","w-100","mb-3","d-flex","align-items-center","justify-content-center",3,"click"],["src","https://developers.google.com/identity/images/g-logo.png","alt","Google Logo"],[1,"alert","alert-danger","mb-3"]],template:function(t,r){t&1&&(B(0,"div",0)(1,"h1",1),z(2,"Sign in"),j(),B(3,"div",2)(4,"div",3),De(5,"img",4),j(),B(6,"div",5)(7,"div",6)(8,"input",7),fr("ngModelChange",function(o){return Dr(r.email,o)||(r.email=o),o}),j()(),B(9,"div",8)(10,"input",9),fr("ngModelChange",function(o){return Dr(r.password,o)||(r.password=o),o}),j(),B(11,"span",10),Ye("click",function(){return r.showPassword=!r.showPassword}),z(12),j()(),B(13,"div",11)(14,"input",12),fr("ngModelChange",function(o){return Dr(r.rememberMe,o)||(r.rememberMe=o),o}),j(),B(15,"label",13),z(16,"Keep me logged in"),j()(),qt(17,XY,2,1,"div",14),B(18,"button",15),Ye("click",function(){return r.login()}),z(19," Sign in "),j(),B(20,"div",16)(21,"span"),z(22," Need an account? "),B(23,"a",17),z(24,"Create one"),j()()(),B(25,"div",18)(26,"span"),z(27,"or"),j()(),B(28,"button",19),Ye("click",function(){return r.googleLogin()}),De(29,"img",20),B(30,"span"),z(31,"Sign in with Google"),j()()()()()),t&2&&(le(8),dr("ngModel",r.email),le(2),Fe("type",r.showPassword?"text":"password"),dr("ngModel",r.password),le(),xo("aria-label","Toggle password visibility"),le(),In(" ",r.showPassword?"visibility_off":"visibility"," "),le(2),dr("ngModel",r.rememberMe),le(3),Fe("ngIf",r.errorMessage))},dependencies:[ln,Zr,No,vc,G1,yc,Ns,Ro,bo],encapsulation:2})};function YY(n,e){if(n&1&&(B(0,"option",24),z(1),j()),n&2){let t=e.$implicit;Fe("value",t),le(),In(" ",t," ")}}function ZY(n,e){if(n&1&&(B(0,"div",25),z(1),j()),n&2){let t=Dt();le(),In(" ",t.errorMessage," ")}}var Om=class n{constructor(e,t){this.authService=e;this.router=t}username="";email="";password="";selectedAllergies=[];allergies=["\u062D\u0644\u064A\u0628 - Milk","\u0628\u064A\u0636 - Eggs","\u062C\u0644\u0648\u062A\u064A\u0646 (\u0642\u0645\u062D) - Gluten","\u0645\u0643\u0633\u0631\u0627\u062A - Nuts","\u0635\u0648\u064A\u0627 - Soy"];errorMessage="";step2Google=!1;showPassword=!1;register(){this.errorMessage="",this.authService.register(this.email,this.password,this.username,this.selectedAllergies).subscribe({next:()=>{this.router.navigate(["/user"])},error:e=>{this.errorMessage=e.message||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062D\u0633\u0627\u0628"}})}googleRegister(){this.errorMessage="",this.authService.googleSignIn(!0).subscribe({next:()=>{this.step2Google=!0},error:e=>{this.errorMessage=e.message||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0645\u0639 Google"}})}saveGoogleAllergies(){let e=this.authService.getCurrentUser();if(!e){this.errorMessage="\u0644\u0627 \u064A\u0648\u062C\u062F \u0645\u0633\u062A\u062E\u062F\u0645 \u0645\u0633\u062C\u0644.";return}this.authService.saveAllergies(e.uid,this.selectedAllergies).subscribe({next:()=>{this.router.navigate(["/user"])},error:t=>{this.errorMessage=t.message||"\u062E\u0637\u0623 \u0641\u064A \u062D\u0641\u0638 \u0627\u0644\u062D\u0633\u0627\u0633\u064A\u0629."}})}static \u0275fac=function(t){return new(t||n)(ge(Xn),ge(Lt))};static \u0275cmp=Ft({type:n,selectors:[["app-register"]],decls:37,vars:9,consts:[[1,"register-page"],[1,"register-title","text-center"],[1,"register-subtitle","text-center"],[1,"register-content","container"],[1,"register-illustration"],["src","assets/register-illustration.png","alt","Create Account Illustration"],[1,"register-form"],[1,"mb-3"],["type","text","placeholder","User Name",1,"form-control","placeholder-green",3,"ngModelChange","ngModel"],["type","email","placeholder","Email",1,"form-control","placeholder-green",3,"ngModelChange","ngModel"],[1,"mb-3","position-relative"],["placeholder","Password",1,"form-control","placeholder-green",3,"ngModelChange","type","ngModel"],[1,"material-icons","toggle-password",3,"click"],["multiple","",1,"form-select","placeholder-green",3,"ngModelChange","ngModel"],["disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"btn","btn-primary","w-100","mb-3",3,"click"],[1,"separator","mb-3"],[1,"btn","btn-google-auth","w-100","mb-3","d-flex","align-items-center","justify-content-center",3,"click"],["src","https://developers.google.com/identity/images/g-logo.png","alt","Google Logo"],[1,"text-center"],[1,"text-green","me-1"],["routerLink","/login",1,"text-blue"],[3,"value"],[1,"alert","alert-danger","mb-3"]],template:function(t,r){t&1&&(B(0,"div",0)(1,"h1",1),z(2,"Create Account"),j(),B(3,"p",2),z(4," Fill out the information below to create your account "),j(),B(5,"div",3)(6,"div",4),De(7,"img",5),j(),B(8,"div",6)(9,"div",7)(10,"input",8),fr("ngModelChange",function(o){return Dr(r.username,o)||(r.username=o),o}),j()(),B(11,"div",7)(12,"input",9),fr("ngModelChange",function(o){return Dr(r.email,o)||(r.email=o),o}),j()(),B(13,"div",10)(14,"input",11),fr("ngModelChange",function(o){return Dr(r.password,o)||(r.password=o),o}),j(),B(15,"span",12),Ye("click",function(){return r.showPassword=!r.showPassword}),z(16),j()(),B(17,"div",7)(18,"select",13),fr("ngModelChange",function(o){return Dr(r.selectedAllergies,o)||(r.selectedAllergies=o),o}),B(19,"option",14),z(20,"Select one or more allergens"),j(),qt(21,YY,2,2,"option",15),j()(),qt(22,ZY,2,1,"div",16),B(23,"button",17),Ye("click",function(){return r.register()}),z(24," Create "),j(),B(25,"div",18)(26,"span"),z(27,"or"),j()(),B(28,"button",19),Ye("click",function(){return r.googleRegister()}),De(29,"img",20),B(30,"span"),z(31,"Continue with Google"),j()(),B(32,"div",21)(33,"span",22),z(34,"Already have an account?"),j(),B(35,"a",23),z(36,"Sign in"),j()()()()()),t&2&&(le(10),dr("ngModel",r.username),le(2),dr("ngModel",r.email),le(2),Fe("type",r.showPassword?"text":"password"),dr("ngModel",r.password),le(),xo("aria-label","Toggle password visibility"),le(),In(" ",r.showPassword?"visibility_off":"visibility"," "),le(2),dr("ngModel",r.selectedAllergies),le(3),Fe("ngForOf",r.allergies),le(),Fe("ngIf",r.errorMessage))},dependencies:[ln,ec,Zr,No,Mp,Op,vc,_c,yc,Ns,Ro,bo],encapsulation:2})};function QY(n,e){if(n&1&&(B(0,"option",10),z(1),j()),n&2){let t=e.$implicit;Fe("value",t),le(),In(" ",t," ")}}function JY(n,e){if(n&1&&(B(0,"li",13),z(1),j()),n&2){let t=e.$implicit;le(),In(" ",t," ")}}function eZ(n,e){if(n&1&&(B(0,"div")(1,"ul",11),qt(2,JY,2,1,"li",12),j()()),n&2){let t=Dt();le(2),Fe("ngForOf",t.userAllergies)}}function tZ(n,e){n&1&&(B(0,"p"),z(1,"You have no saved allergies."),j())}var Pm=class n{constructor(e,t){this.authService=e;this.router=t}userAllergies=null;userName="";userId="";allAllergies=["\u062D\u0644\u064A\u0628 - Milk","\u0628\u064A\u0636 - Eggs","\u062C\u0644\u0648\u062A\u064A\u0646 (\u0642\u0645\u062D) - Gluten","\u0645\u0643\u0633\u0631\u0627\u062A - Nuts","\u0635\u0648\u064A\u0627 - Soy"];ngOnInit(){let e=this.authService.getCurrentUser();if(!e){this.router.navigate(["/login"]);return}this.userId=e.uid,this.userName=e.displayName||e.email||"",this.authService.getUserData(e.uid).subscribe(t=>{t?.allergies?this.userAllergies=t.allergies:this.userAllergies=[]})}logout(){this.authService.logout().subscribe(()=>{this.router.navigate(["/"])})}updateAllergies(){!this.userId||!this.userAllergies||this.authService.saveAllergies(this.userId,this.userAllergies).subscribe({next:()=>{},error:e=>{console.error("Error saving allergies:",e)}})}static \u0275fac=function(t){return new(t||n)(ge(Xn),ge(Lt))};static \u0275cmp=Ft({type:n,selectors:[["app-user"]],decls:20,vars:5,consts:[["noAllergies",""],[1,"user-page"],[1,"user-container","container"],[1,"allergy-section","mt-4"],["multiple","",1,"form-select","w-50","mx-auto","my-3",3,"ngModelChange","ngModel"],["disabled",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"btn","btn-outline-danger","mt-4",3,"click"],[3,"value"],[1,"list-group","mx-auto",2,"max-width","200px"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(t,r){if(t&1){let i=Tr();B(0,"div",1)(1,"div",2)(2,"h2"),z(3,"User Account"),j(),B(4,"p"),z(5),j(),B(6,"div",3)(7,"h4"),z(8,"Your Allergies:"),j(),B(9,"select",4),fr("ngModelChange",function(s){return wn(i),Dr(r.userAllergies,s)||(r.userAllergies=s),En(s)}),B(10,"option",5),z(11,"Select allergies to remove or add"),j(),qt(12,QY,2,2,"option",6),j(),qt(13,eZ,3,1,"div",7)(14,tZ,2,0,"ng-template",null,0,ll),B(16,"button",8),Ye("click",function(){return wn(i),En(r.updateAllergies())}),z(17," Save Changes "),j()(),B(18,"button",9),Ye("click",function(){return wn(i),En(r.logout())}),z(19," Logout "),j()()()}if(t&2){let i=ul(15);le(5),In("Welcome, ",r.userName,""),le(4),dr("ngModel",r.userAllergies),le(3),Fe("ngForOf",r.allAllergies),le(),Fe("ngIf",r.userAllergies&&r.userAllergies.length>0)("ngIfElse",i)}},dependencies:[ln,ec,Zr,No,Mp,Op,_c,yc,Ns],encapsulation:2})};var lk=()=>{let n=H(Xn),e=H(Lt);return n.isLoggedIn()?!0:e.createUrlTree(["/login"])};var _C=()=>{let n=H(Xn),e=H(Lt);return n.isLoggedIn()?e.createUrlTree(["/"]):!0};var dk=[{path:"",component:xp},{path:"about",component:Ap},{path:"barcode",component:ag,canActivate:[lk]},{path:"login",component:Mm,canActivate:[_C]},{path:"register",component:Om,canActivate:[_C]},{path:"user",component:Pm},{path:"**",redirectTo:""}];var fk={production:!1,firebase:{apiKey:"AIzaSyAXHp3XgnuJD4RUarFZSBhGdd9imCV4bV4",authDomain:"diraya-6d033.firebaseapp.com",projectId:"diraya-6d033",storageBucket:"diraya-6d033.firebasestorage.app",messagingSenderId:"930443909863",appId:"1:930443909863:web:0bf61969a04ea2457aa042",measurementId:"G-VVN1SS488B"}};var Jd="Service workers are disabled or not supported by this browser";function nZ(n){return cs(()=>po(new Error(n)))}var _u=class{serviceWorker;worker;registration;events;constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=nZ(Jd);else{let r=Ca(e,"controllerchange").pipe(ue(()=>e.controller)),i=cs(()=>ae(e.controller)),o=Ur(i,r);this.worker=o.pipe($t(l=>!!l)),this.registration=this.worker.pipe(zt(()=>e.getRegistration()));let u=Ca(e,"message").pipe(ue(l=>l.data)).pipe($t(l=>l&&l.type)).pipe(k0());u.connect(),this.events=u}}postMessage(e,t){return this.worker.pipe(Gt(1),kt(r=>{r.postMessage(X({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe($t(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Gt(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe($t(t=>t.nonce===e),Gt(1),ue(t=>{if(t.result!==void 0)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},rZ=(()=>{class n{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new pt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=us,this.notificationClicks=us,this.subscription=us;return}this.messages=this.sw.eventsOfType("PUSH").pipe(ue(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ue(i=>i.data)),this.pushManager=this.sw.registration.pipe(ue(i=>i.pushManager));let r=this.pushManager.pipe(zt(i=>i.getSubscription()));this.subscription=qf(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Jd));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,this.pushManager.pipe(zt(s=>s.subscribe(r)),Gt(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Jd));let t=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(Gt(1),zt(t)).toPromise()}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(ie(_u))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),iZ=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=us,this.unrecoverable=us;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Jd));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Jd));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(ie(_u))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();var hk=new J("");function oZ(n,e,t){return()=>{if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let r=n.get($e),i=n.get(lr);r.runOutsideAngular(()=>{let s=navigator.serviceWorker,a=()=>s.controller?.postMessage({action:"INITIALIZE"});s.addEventListener("controllerchange",a),i.onDestroy(()=>{s.removeEventListener("controllerchange",a)})});let o;if(typeof t.registrationStrategy=="function")o=t.registrationStrategy();else{let[s,...a]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":o=ae(null);break;case"registerWithDelay":o=pk(+a[0]||0);break;case"registerWhenStable":let c=ke(n.get(lr).whenStable());o=a[0]?qf(c,pk(+a[0])):c;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}r.runOutsideAngular(()=>o.pipe(Gt(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(s=>console.error("Service worker registration failed with:",s))))}}function pk(n){return ae(null).pipe(O0(n))}function sZ(n){return new _u(n.enabled!==!1?navigator.serviceWorker:void 0)}var Qd=class{enabled;scope;registrationStrategy};function gk(n,e={}){return Wn([rZ,iZ,{provide:hk,useValue:n},{provide:Qd,useValue:e},{provide:_u,useFactory:sZ,deps:[Qd]},{provide:Xa,useFactory:oZ,deps:[_t,hk,Qd],multi:!0}])}var mk={providers:[TS({eventCoalescing:!0}),n2(dk,a2()),kN(()=>FN(fk.firebase)),UM(()=>HM()),ck(()=>uk()),gk("ngsw-worker.js",{enabled:!dl(),registrationStrategy:"registerWhenStable:30000"})]};function aZ(n,e){n&1&&(B(0,"li",8)(1,"a",23),z(2,"Barcode Scanning"),j()())}function cZ(n,e){n&1&&(B(0,"div")(1,"a",24),z(2,"Login / Register"),j()())}function uZ(n,e){if(n&1){let t=Tr();B(0,"div",25),Ye("click",function(){wn(t);let i=Dt();return En(i.goToUserPage())}),De(1,"img",26),B(2,"span",27),z(3),j()()}if(n&2){let t=Dt();le(),Fe("src",t.avatarUrl,qa),le(2),qh((t.user==null?null:t.user.displayName)||(t.user==null?null:t.user.email))}}function lZ(n,e){if(n&1){let t=Tr();B(0,"div",28)(1,"a",29),Ye("click",function(){wn(t);let i=Dt();return En(i.dismissOffcanvas())}),z(2,"Login / Register"),j()()}}function dZ(n,e){if(n&1){let t=Tr();B(0,"div",30),Ye("click",function(){wn(t);let i=Dt();return i.goToUserPage(),En(i.dismissOffcanvas())}),De(1,"img",26),B(2,"span",31),z(3),j()()}if(n&2){let t=Dt();le(),Fe("src",t.avatarUrl,qa),le(2),qh((t.user==null?null:t.user.displayName)||(t.user==null?null:t.user.email))}}function fZ(n,e){if(n&1){let t=Tr();B(0,"li",8)(1,"a",32),Ye("click",function(){wn(t);let i=Dt();return En(i.dismissOffcanvas())}),z(2,"Barcode Scanning"),j()()}}var km=class n{constructor(e,t){this.authService=e;this.router=t}user=null;avatarUrl="https://via.placeholder.com/40";ngOnInit(){this.authService.currentUser$.subscribe(e=>{this.user=e,this.user?.photoURL?this.avatarUrl=this.user.photoURL:this.avatarUrl="https://avatar.iran.liara.run/public/76"})}goToUserPage(){this.router.navigate(["/user"])}dismissOffcanvas(){let e=document.getElementById("offcanvasNavbar");if(e){let t=bootstrap.Offcanvas.getInstance(e);t||(t=new bootstrap.Offcanvas(e)),t.hide()}}static \u0275fac=function(t){return new(t||n)(ge(Xn),ge(Lt))};static \u0275cmp=Ft({type:n,selectors:[["app-nav"]],decls:33,vars:6,consts:[["loggedIn",""],["mobileLoggedIn",""],[1,"navbar","navbar-expand-lg","custom-nav"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","assets/logo.png","alt","Diraya Logo",1,"diraya-logo"],[1,"d-none","d-lg-flex","flex-grow-1","justify-content-center"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/",1,"nav-link"],["routerLink","/about",1,"nav-link"],["class","nav-item",4,"ngIf"],[1,"d-none","d-lg-flex","align-items-center","ms-auto"],[4,"ngIf","ngIfElse"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasNavbar","aria-controls","offcanvasNavbar","aria-label","Toggle navigation",1,"navbar-toggler","d-lg-none"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasNavbar",1,"offcanvas","offcanvas-end","d-lg-none","custom-offcanvas"],[1,"offcanvas-header","d-none"],[1,"offcanvas-body"],["class","mb-3",4,"ngIf","ngIfElse"],[1,"navbar-nav","mb-2","mb-lg-0"],["routerLink","/",1,"nav-link",3,"click"],["routerLink","/about",1,"nav-link",3,"click"],["routerLink","/barcode",1,"nav-link"],["routerLink","/login",1,"btn","btn-login"],[1,"d-flex","align-items-center","user-info",3,"click"],["alt","Avatar",1,"rounded-circle","me-2","user-avatar",3,"src"],[1,"d-none","d-md-inline"],[1,"mb-3"],["routerLink","/login",1,"btn","btn-login","w-100","text-white",3,"click"],[1,"d-flex","align-items-center","user-info","mb-3",3,"click"],[1,"text-white"],["routerLink","/barcode",1,"nav-link",3,"click"]],template:function(t,r){if(t&1){let i=Tr();B(0,"nav",2)(1,"div",3)(2,"a",4),De(3,"img",5),j(),B(4,"div",6)(5,"ul",7)(6,"li",8)(7,"a",9),z(8,"Home"),j()(),B(9,"li",8)(10,"a",10),z(11,"About Us"),j()(),qt(12,aZ,3,0,"li",11),j()(),B(13,"div",12),qt(14,cZ,3,0,"div",13)(15,uZ,4,2,"ng-template",null,0,ll),j(),B(17,"button",14),De(18,"span",15),j(),B(19,"div",16),De(20,"div",17),B(21,"div",18),qt(22,lZ,3,0,"div",19)(23,dZ,4,2,"ng-template",null,1,ll),B(25,"ul",20)(26,"li",8)(27,"a",21),Ye("click",function(){return wn(i),En(r.dismissOffcanvas())}),z(28,"Home"),j()(),B(29,"li",8)(30,"a",22),Ye("click",function(){return wn(i),En(r.dismissOffcanvas())}),z(31,"About Us"),j()(),qt(32,fZ,3,0,"li",11),j()()()()()}if(t&2){let i=ul(16),o=ul(24);le(12),Fe("ngIf",r.user),le(2),Fe("ngIf",!r.user)("ngIfElse",i),le(8),Fe("ngIf",!r.user)("ngIfElse",o),le(10),Fe("ngIf",r.user)}},dependencies:[ln,Zr,Ro,bo],encapsulation:2})};var Fm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ft({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){t&1&&De(0,"app-nav")(1,"router-outlet")},dependencies:[P1,km],encapsulation:2})};fb(Fm,mk).catch(n=>console.error(n));
